[Script Info]
ScriptType: v4.00+

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, AlphaLevel, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,1,1,0,2,10,10,10,0,0

[Events]
Format: Layer, Start, End, Style, Text
Dialogue: 0,0:00:00.51,0:00:04.40,Default,[ Music ]
Dialogue: 0,0:00:04.90,0:00:05.99,Default,>> Stanford University.
Dialogue: 0,0:00:08.00,0:00:15.33,Default,>> Welcome to the lecture 14 of\NCS193P for Fall of 2013 and 14.
Dialogue: 0,0:00:16.01,0:00:20.15,Default,Today I'm going to talk a little\Nbit about miscellaneous topics,
Dialogue: 0,0:00:20.15,0:00:23.83,Default,UI application and\Nnetwork activity indicator,
Dialogue: 0,0:00:24.19,0:00:26.20,Default,and then I'm going to\Nfollow up a little bit
Dialogue: 0,0:00:26.20,0:00:29.70,Default,on the demo we did last time,\Nthen I'm going to continue
Dialogue: 0,0:00:29.70,0:00:32.39,Default,that demo, and we're\Ngoing to take Photo Mania
Dialogue: 0,0:00:32.39,0:00:34.17,Default,that we built last week and\Nwe're going to make it work
Dialogue: 0,0:00:34.17,0:00:38.58,Default,on the iPad, and we're going\Nto add a popover segue to it,
Dialogue: 0,0:00:38.58,0:00:40.57,Default,because I talked about\Npopovers a couple weeks ago,
Dialogue: 0,0:00:40.57,0:00:43.24,Default,but I never showed you how to do\Nit, and you know, all this stuff
Dialogue: 0,0:00:43.24,0:00:46.19,Default,if I just tell you about it,\Nit's really not real probably
Dialogue: 0,0:00:46.19,0:00:48.38,Default,for you until I show you how to\Ndo it, so we'll do a popover.
Dialogue: 0,0:00:48.38,0:00:51.32,Default,And then we're going\Nto dive into maps,
Dialogue: 0,0:00:51.32,0:00:53.34,Default,so I'll be doing the\Nlecture today on maps.
Dialogue: 0,0:00:53.34,0:00:54.69,Default,Hopefully, I'll get\Nall the way through it.
Dialogue: 0,0:00:55.08,0:00:58.05,Default,And then on Wednesday, I\Nwill do a demo with the maps,
Dialogue: 0,0:00:58.05,0:01:01.46,Default,and also then on Wednesday,\NI will demo some more segues,
Dialogue: 0,0:01:01.46,0:01:02.79,Default,especially the embed segue.
Dialogue: 0,0:01:02.79,0:01:05.47,Default,Okay? So that's what\Nwe're talking about today.
Dialogue: 0,0:01:05.58,0:01:08.07,Default,So let's talk about a couple\Nof miscellaneous topics.
Dialogue: 0,0:01:08.07,0:01:11.32,Default,So UI application\Nis my first one.
Dialogue: 0,0:01:11.37,0:01:12.87,Default,What is UI application?
Dialogue: 0,0:01:12.87,0:01:14.36,Default,It sounds important.
Dialogue: 0,0:01:14.44,0:01:18.26,Default,It's not really that\Nimportant, we dive right
Dialogue: 0,0:01:18.38,0:01:20.61,Default,into using the application\Ndelegate last week,
Dialogue: 0,0:01:20.61,0:01:21.74,Default,where we did things\Nlike application,
Dialogue: 0,0:01:21.74,0:01:24.25,Default,did finish launching with\Noptions and, you know,
Dialogue: 0,0:01:24.25,0:01:26.93,Default,handling background\NURLs coming in,
Dialogue: 0,0:01:27.03,0:01:29.21,Default,and background fetching\Nand all that.
Dialogue: 0,0:01:29.21,0:01:30.85,Default,That was all in the\Napplications delegate.
Dialogue: 0,0:01:30.85,0:01:34.01,Default,So the applications delegate\Nis actually set by a property
Dialogue: 0,0:01:34.01,0:01:36.92,Default,on another object\Ncalled UI application.
Dialogue: 0,0:01:37.06,0:01:40.36,Default,So UI application, this class,\Nit only has one instance
Dialogue: 0,0:01:40.36,0:01:41.41,Default,in your entire application.
Dialogue: 0,0:01:41.41,0:01:44.62,Default,You get it by calling this UI\Napplication shared application,
Dialogue: 0,0:01:44.98,0:01:47.98,Default,and there's really not a lot\Nof really interesting stuff
Dialogue: 0,0:01:48.12,0:01:51.55,Default,in this thing, you can go\Ncheck out the documentation,
Dialogue: 0,0:01:51.75,0:01:54.20,Default,but all the real stuff is\Nin applications delegate.
Dialogue: 0,0:01:54.85,0:01:56.07,Default,Alright? So it has a property
Dialogue: 0,0:01:56.07,0:01:57.40,Default,on your application\Ncalled delegate,
Dialogue: 0,0:01:57.57,0:01:59.06,Default,that gets automatically\Nset for you,
Dialogue: 0,0:01:59.32,0:02:01.39,Default,and then your application\Ndelegate object,
Dialogue: 0,0:02:01.62,0:02:03.93,Default,which we did a lot\Nin last Wednesday,
Dialogue: 0,0:02:03.93,0:02:05.30,Default,that's where all the action is.
Dialogue: 0,0:02:05.75,0:02:08.60,Default,Okay? So you can check out\NUI application if you want.
Dialogue: 0,0:02:08.94,0:02:11.54,Default,I did want to point out\None particular property
Dialogue: 0,0:02:11.54,0:02:12.90,Default,on UI application, however,
Dialogue: 0,0:02:13.19,0:02:16.13,Default,which is the network activity\Nindicator visible property.
Dialogue: 0,0:02:16.13,0:02:17.46,Default,This is a Boolean property.
Dialogue: 0,0:02:17.46,0:02:21.73,Default,If you set it to yes, then\Nthe little spinner that shows
Dialogue: 0,0:02:21.73,0:02:23.58,Default,up on the status bar,\Nhave you ever seen that?
Dialogue: 0,0:02:23.58,0:02:24.78,Default,When you're doing network stuff,
Dialogue: 0,0:02:24.78,0:02:28.46,Default,there's a little spinner that's\Nspinning, that turns that on
Dialogue: 0,0:02:28.60,0:02:30.54,Default,when your application is\Nthe active application.
Dialogue: 0,0:02:30.99,0:02:35.77,Default,And this thing, you know,\Nit's Boolean, yes or no,
Dialogue: 0,0:02:35.77,0:02:37.27,Default,that spinner is either\Non or it's off,
Dialogue: 0,0:02:37.27,0:02:40.42,Default,it's totally your responsibility\Nto turn this thing on and off.
Dialogue: 0,0:02:40.42,0:02:43.33,Default,It's a little bit difficult\Nto deal with because A,
Dialogue: 0,0:02:43.36,0:02:47.83,Default,it's global, it's in UI\Napplication, so all the threads
Dialogue: 0,0:02:47.90,0:02:50.47,Default,in your application are all\Nusing this same spinner,
Dialogue: 0,0:02:51.03,0:02:55.11,Default,and number two, it's a Boolean,\Nit's not like a push and pop
Dialogue: 0,0:02:55.11,0:02:57.41,Default,or a count, and so imagine
Dialogue: 0,0:02:57.41,0:02:59.62,Default,that you fire off a big\NFLickr fetch that's going
Dialogue: 0,0:02:59.62,0:03:01.10,Default,to take ten seconds.
Dialogue: 0,0:03:01.69,0:03:02.52,Default,And you start the app,
Dialogue: 0,0:03:02.70,0:03:04.95,Default,this network activity\Nindicator, turn it to yes.
Dialogue: 0,0:03:05.45,0:03:08.45,Default,Then, in another thread, you\Nfire off a little FLickr fetch,
Dialogue: 0,0:03:08.45,0:03:10.24,Default,it's only going to\Ntake one second, okay?
Dialogue: 0,0:03:10.53,0:03:13.92,Default,So it fires off, it turns\Nthis on, one second goes on,
Dialogue: 0,0:03:14.15,0:03:15.82,Default,it finishes, it turns\Nit back off.
Dialogue: 0,0:03:16.11,0:03:18.64,Default,Now it's off, but the ten\Nsecond one is still running.
Dialogue: 0,0:03:19.23,0:03:20.61,Default,Okay? So that's bad.
Dialogue: 0,0:03:20.94,0:03:24.74,Default,So it's totally up to you,\Nunfortunately, to put mechanism
Dialogue: 0,0:03:24.74,0:03:26.25,Default,in your app for dealing
Dialogue: 0,0:03:26.25,0:03:30.21,Default,with that unfortunate\Nsimplicity of API.
Dialogue: 0,0:03:30.21,0:03:32.67,Default,I'm sure, I mean, I don't\Nknow, but I'm guessing
Dialogue: 0,0:03:32.67,0:03:35.66,Default,that Apple tried to put more\Ncomplicated API on top of this,
Dialogue: 0,0:03:35.94,0:03:38.94,Default,and it just didn't work for all\Ndifferent kinds of ways people,
Dialogue: 0,0:03:39.27,0:03:41.47,Default,you know, are doing network\Nactivity in different threads,
Dialogue: 0,0:03:41.47,0:03:43.65,Default,so they just kind of said,\Nokay we'll give you this
Dialogue: 0,0:03:43.65,0:03:44.51,Default,and we'll leave it to you.
Dialogue: 0,0:03:44.77,0:03:46.33,Default,But you should turn this on.
Dialogue: 0,0:03:46.63,0:03:49.46,Default,I'm not sure if Apple would\Nreject an application submitted
Dialogue: 0,0:03:49.46,0:03:51.03,Default,to the App Store that\Ndidn't turn this on,
Dialogue: 0,0:03:51.03,0:03:52.96,Default,and did do network\Nactivity, but they might.
Dialogue: 0,0:03:52.96,0:03:55.57,Default,Okay? And they'd probably be\Nwithin their rights to doing it.
Dialogue: 0,0:03:55.85,0:03:56.95,Default,Why do we have this thing?
Dialogue: 0,0:03:57.22,0:04:00.05,Default,Because a lot of users\Nmight be on cellular,
Dialogue: 0,0:04:00.26,0:04:02.88,Default,and they only have 300\Nmegabytes a month or something,
Dialogue: 0,0:04:02.88,0:04:05.97,Default,and they want to know when\Napps are using that up, right?
Dialogue: 0,0:04:06.05,0:04:07.82,Default,So they want to see that\Nlittle thing spinning.
Dialogue: 0,0:04:08.15,0:04:10.03,Default,So that's why it's important\Nto turn this thing on.
Dialogue: 0,0:04:10.10,0:04:12.64,Default,Only when you're doing network\Nactivity, this is not a spinner
Dialogue: 0,0:04:12.64,0:04:14.43,Default,for please wait, okay.
Dialogue: 0,0:04:14.43,0:04:16.75,Default,Your app first of all should\Nnever be doing please wait,
Dialogue: 0,0:04:16.75,0:04:18.45,Default,because as we know, we do\Neverything off the main thread,
Dialogue: 0,0:04:18.85,0:04:21.79,Default,but this is just to tell them\Nnetwork activity is happening,
Dialogue: 0,0:04:21.79,0:04:23.01,Default,even in the background\Nin my app.
Dialogue: 0,0:04:23.54,0:04:24.11,Default,Question back there?
Dialogue: 0,0:04:24.27,0:04:26.23,Default,>> Is there a reason\Nwhy I always [inaudible]
Dialogue: 0,0:04:26.73,0:04:29.01,Default,when you're doing\Nnetwork activity
Dialogue: 0,0:04:29.01,0:04:30.25,Default,and doing that on its own?
Dialogue: 0,0:04:30.47,0:04:33.41,Default,>> Yeah, so the question\Nis can't iOS know
Dialogue: 0,0:04:33.41,0:04:36.62,Default,that I'm doing network activity\Nin my app and turn it on for me?
Dialogue: 0,0:04:36.82,0:04:38.95,Default,And the answer is, I'll be\Nit could figure it out most
Dialogue: 0,0:04:38.95,0:04:41.45,Default,of the time, okay, but not\N100 percent of the time,
Dialogue: 0,0:04:41.54,0:04:43.04,Default,because when you do\Na network activity,
Dialogue: 0,0:04:43.04,0:04:46.24,Default,you fire something off, maybe\Nyou're doing that URL session,
Dialogue: 0,0:04:46.24,0:04:49.10,Default,things like that, I think\Nif you do the URL session
Dialogue: 0,0:04:49.10,0:04:52.12,Default,where it's actually happening\NI bet they do turn it on,
Dialogue: 0,0:04:52.18,0:04:52.74,Default,or they might.
Dialogue: 0,0:04:52.86,0:04:54.14,Default,I really don't know\Nwhat they do,
Dialogue: 0,0:04:54.14,0:04:57.04,Default,but then the bottom line is they\Ncan't reliably 100 percent do
Dialogue: 0,0:04:57.04,0:04:58.89,Default,it, so they're asking\Nyou, you can do it here.
Dialogue: 0,0:04:59.18,0:05:01.97,Default,So, this is the best to my\Nknowledge, that's the answer.
Dialogue: 0,0:05:02.32,0:05:04.79,Default,Um, okay so that was\Njust a little aside.
Dialogue: 0,0:05:04.92,0:05:07.47,Default,So now, a little\Nfollow up on our demo
Dialogue: 0,0:05:07.47,0:05:08.63,Default,that we did last Wednesday.
Dialogue: 0,0:05:08.85,0:05:12.05,Default,Two things that I want to\Nclarify and that I did clarify
Dialogue: 0,0:05:12.05,0:05:14.93,Default,if you downloaded the posted\Ncode and read the comments,
Dialogue: 0,0:05:15.31,0:05:17.51,Default,one is, as I was\Ngoing through my demo,
Dialogue: 0,0:05:17.56,0:05:20.07,Default,sometimes I forget things,\Nand I did forget this one line
Dialogue: 0,0:05:20.07,0:05:23.34,Default,of code, which is you have\Nto send a message if you want
Dialogue: 0,0:05:23.34,0:05:27.08,Default,to get these background\Nfetches to happen,
Dialogue: 0,0:05:27.11,0:05:28.42,Default,to your shared application,
Dialogue: 0,0:05:28.42,0:05:31.03,Default,you shared your application\Ncalled set minimum background
Dialogue: 0,0:05:31.03,0:05:31.72,Default,fetch interval.
Dialogue: 0,0:05:31.97,0:05:34.83,Default,Okay? So that interval, and it's\Ntime interval, it's the number
Dialogue: 0,0:05:34.83,0:05:39.51,Default,of seconds that is the\Nminimum between the times
Dialogue: 0,0:05:39.56,0:05:42.07,Default,that iOS will send\Nyou the opportunity
Dialogue: 0,0:05:42.07,0:05:43.48,Default,to do a background fetch, right?
Dialogue: 0,0:05:43.48,0:05:44.76,Default,So you're in the\Nbackground, remember,
Dialogue: 0,0:05:44.87,0:05:47.37,Default,the iOS can send you a\Nthing, it says "Hey, wake up,
Dialogue: 0,0:05:47.37,0:05:48.93,Default,you can do a background\Nfetch if you want,"
Dialogue: 0,0:05:49.45,0:05:50.48,Default,and this says the minimum.
Dialogue: 0,0:05:50.97,0:05:53.77,Default,Now, this minimum, you\Ncan't set it to one second,
Dialogue: 0,0:05:53.77,0:05:55.17,Default,it's going to wake\Nyou up every second
Dialogue: 0,0:05:55.29,0:05:58.09,Default,because there's a UI application\Nbackground fetch interval
Dialogue: 0,0:05:58.34,0:06:00.67,Default,minimum and that's the\Nminimum you can set it to,
Dialogue: 0,0:06:01.01,0:06:04.60,Default,and so if you want to set it\Nto that, then you'll get woken
Dialogue: 0,0:06:04.60,0:06:07.65,Default,up as much as the system\Nis willing to wake you up,
Dialogue: 0,0:06:08.03,0:06:09.78,Default,remember that only the minimum.
Dialogue: 0,0:06:09.78,0:06:11.80,Default,It could take much\Nlonger to wake you up,
Dialogue: 0,0:06:11.80,0:06:12.86,Default,depending on what's happening.
Dialogue: 0,0:06:13.39,0:06:15.00,Default,One thing about these\Nbackground fetches,
Dialogue: 0,0:06:15.00,0:06:17.60,Default,the system is quite smart\Nabout when it wakes you
Dialogue: 0,0:06:17.60,0:06:19.11,Default,up to do a background\Nfetch, it's probably waking
Dialogue: 0,0:06:19.11,0:06:21.32,Default,up a whole bunch of other apps\Ndoing background fetches too,
Dialogue: 0,0:06:21.32,0:06:23.68,Default,and doing it all at\None time because all
Dialogue: 0,0:06:23.68,0:06:27.36,Default,of this multi-tasking in iOS is\Nall about saving the battery.
Dialogue: 0,0:06:27.96,0:06:29.63,Default,Okay? Why, you might ask?
Dialogue: 0,0:06:29.83,0:06:32.00,Default,Can't I have four apps on\Nthe screen at the same time?
Dialogue: 0,0:06:32.00,0:06:33.56,Default,Well that would be\Na lot of processor,
Dialogue: 0,0:06:33.56,0:06:35.91,Default,a lot of network activity,\Na lot of battery drain.
Dialogue: 0,0:06:36.31,0:06:38.48,Default,Okay? And so when an\Napplication is in the background
Dialogue: 0,0:06:38.53,0:06:42.09,Default,and it's not running, we want\Nminimum battery drain going on,
Dialogue: 0,0:06:42.43,0:06:43.81,Default,so if it's going to wake,
Dialogue: 0,0:06:43.81,0:06:46.22,Default,and a lot of the battery drain\Nis not necessarily what your app
Dialogue: 0,0:06:46.22,0:06:48.34,Default,is doing, it's just\Nthe fact that the phone
Dialogue: 0,0:06:48.34,0:06:50.65,Default,or the iPad is awake, right?
Dialogue: 0,0:06:50.65,0:06:52.69,Default,It's up and running,\Nit's OS is running.
Dialogue: 0,0:06:52.96,0:06:55.15,Default,So mostly the phone\Nand iPad are sleeping
Dialogue: 0,0:06:55.27,0:06:56.09,Default,when you're not using it.
Dialogue: 0,0:06:56.59,0:06:58.03,Default,Okay? So you want\Nit to stay that way.
Dialogue: 0,0:06:58.03,0:06:59.86,Default,So if you are going to\Nwake it up from sleep
Dialogue: 0,0:06:59.86,0:07:02.43,Default,and start using battery, you\Nwant to get as many apps going
Dialogue: 0,0:07:02.43,0:07:04.56,Default,with their background\Nfetches and all at once.
Dialogue: 0,0:07:04.65,0:07:06.80,Default,Plus, there's a lot of very\Nbattery intensive things
Dialogue: 0,0:07:06.80,0:07:08.60,Default,like the radio antennas, right?
Dialogue: 0,0:07:08.60,0:07:11.60,Default,The wi-fi and the cellular,\Nthose things use power.
Dialogue: 0,0:07:12.02,0:07:13.95,Default,So if you're going to\Ndo a background fetch,
Dialogue: 0,0:07:14.02,0:07:16.37,Default,you're probably going to fire\Nup the wi-fi, that's going
Dialogue: 0,0:07:16.37,0:07:18.78,Default,to use power, we'd better\Nget everybody who wants
Dialogue: 0,0:07:18.78,0:07:20.43,Default,to do a background fetch\Ndoing it all at once.
Dialogue: 0,0:07:20.43,0:07:21.87,Default,So this is just a minimum.
Dialogue: 0,0:07:21.87,0:07:24.46,Default,Now, the reason I'm\Nmentioning this is
Dialogue: 0,0:07:24.46,0:07:27.02,Default,because the default is\NUI background fetch,
Dialogue: 0,0:07:27.02,0:07:29.15,Default,application background\Nfetch interval never
Dialogue: 0,0:07:29.54,0:07:32.13,Default,which means you'll never\Nget background fetch,
Dialogue: 0,0:07:32.17,0:07:33.89,Default,so you definitely\Nneed to call this.
Dialogue: 0,0:07:33.89,0:07:35.50,Default,It also, notice, means you have
Dialogue: 0,0:07:35.50,0:07:37.39,Default,to run your application\Nat least once.
Dialogue: 0,0:07:37.39,0:07:39.16,Default,Your user has to run your\Napplication at least once,
Dialogue: 0,0:07:39.16,0:07:42.36,Default,and this gets called if you want\Nbackground fetching to happen.
Dialogue: 0,0:07:42.64,0:07:45.34,Default,Once you've called this, system\Nknows you want to do that,
Dialogue: 0,0:07:45.70,0:07:49.45,Default,you know, once you go to the\Nbackground, then after that,
Dialogue: 0,0:07:49.59,0:07:52.76,Default,the launch, then it will\Nnot only wake you up,
Dialogue: 0,0:07:52.76,0:07:55.82,Default,but if you were to exit or\Ncrash, it will fire you back
Dialogue: 0,0:07:55.82,0:07:59.49,Default,up once it kind of gets you\Ninto the background fetch world.
Dialogue: 0,0:08:00.74,0:08:03.78,Default,Users might find that they don't\Nlike your application running
Dialogue: 0,0:08:03.78,0:08:05.79,Default,in the background because\Nyou use a lot of resources,
Dialogue: 0,0:08:05.79,0:08:09.05,Default,their battery gets drained\Nwhen they let you fetch
Dialogue: 0,0:08:09.05,0:08:11.56,Default,in the background, because\Nyou're a bad background citizen,
Dialogue: 0,0:08:11.56,0:08:11.91,Default,maybe.
Dialogue: 0,0:08:11.91,0:08:15.74,Default,They can actually go into\Nsettings and turn you off
Dialogue: 0,0:08:16.21,0:08:17.23,Default,when it comes to background.
Dialogue: 0,0:08:17.69,0:08:21.05,Default,Okay, there's actually a switch,\Nit says "don't let Photo Mania
Dialogue: 0,0:08:21.23,0:08:23.04,Default,or Shutterbug fetch\Nin the background."
Dialogue: 0,0:08:23.31,0:08:24.10,Default,Don't do it.
Dialogue: 0,0:08:24.55,0:08:26.45,Default,And if you set that off, then\Nyou won't be able to do it.
Dialogue: 0,0:08:26.45,0:08:28.31,Default,And you can find out if\Nthe user has done that,
Dialogue: 0,0:08:28.60,0:08:30.06,Default,using this property
Dialogue: 0,0:08:30.06,0:08:33.03,Default,in UI application called\Nbackground refresh status,
Dialogue: 0,0:08:33.03,0:08:34.44,Default,and it will return\Nthe refresh status.
Dialogue: 0,0:08:34.68,0:08:36.07,Default,It actually has three\Ndifferent states.
Dialogue: 0,0:08:36.07,0:08:37.99,Default,One can be you're good to go,
Dialogue: 0,0:08:38.17,0:08:42.27,Default,two can be the user turned you\Noff, third can be restricted.
Dialogue: 0,0:08:42.51,0:08:43.76,Default,What restricted means,\Nand you're going
Dialogue: 0,0:08:43.76,0:08:45.14,Default,to see this in various things.
Dialogue: 0,0:08:45.14,0:08:46.43,Default,You'll see this with\Nthe map stuff,
Dialogue: 0,0:08:46.78,0:08:50.28,Default,restricted means you\Ncan't do it, it's off,
Dialogue: 0,0:08:50.61,0:08:51.91,Default,but your user didn't\Nturn it off,
Dialogue: 0,0:08:52.11,0:08:53.56,Default,and they can't turn it back on.
Dialogue: 0,0:08:54.87,0:08:56.69,Default,Okay? Because they're\Nrestricted in some way.
Dialogue: 0,0:08:57.09,0:08:57.95,Default,How would this happen?
Dialogue: 0,0:08:58.33,0:09:00.25,Default,Parental controls, for example.
Dialogue: 0,0:09:00.65,0:09:03.18,Default,It's possible in parental\Ncontrols to make it
Dialogue: 0,0:09:03.18,0:09:05.58,Default,so this app is not\Nallowed to run
Dialogue: 0,0:09:05.58,0:09:07.17,Default,in background mode\Nin parental controls.
Dialogue: 0,0:09:08.06,0:09:09.04,Default,Corporate environment.
Dialogue: 0,0:09:09.36,0:09:12.12,Default,A corporation might not want\Nto allow a certain app to run
Dialogue: 0,0:09:12.12,0:09:14.38,Default,in the background because of\Nwhat it fetches or whatever.
Dialogue: 0,0:09:14.45,0:09:17.37,Default,Okay? So you've got to check\Nall three of those states,
Dialogue: 0,0:09:17.37,0:09:20.16,Default,and if it's in that restricted\Nstate, not just this thing,
Dialogue: 0,0:09:20.16,0:09:21.92,Default,but anything that's in a\Nrestricted state like that,
Dialogue: 0,0:09:22.15,0:09:23.46,Default,you don't want to\Nsay to the user,
Dialogue: 0,0:09:23.46,0:09:25.06,Default,"I want to do background\Nfetches,
Dialogue: 0,0:09:25.06,0:09:27.27,Default,but you haven't turned me on,"\Nbecause then they won't be able
Dialogue: 0,0:09:27.27,0:09:28.73,Default,to go turn you on, and\Nthey'll be like, "What?"
Dialogue: 0,0:09:29.11,0:09:31.66,Default,Okay, they'll be confused,\Nso I just want to make--
Dialogue: 0,0:09:31.66,0:09:33.24,Default,this is a good opportunity\Nto talk
Dialogue: 0,0:09:33.24,0:09:34.75,Default,about those three states, right?
Dialogue: 0,0:09:34.91,0:09:37.56,Default,Okay, it's on, it got\Nturned off by the user,
Dialogue: 0,0:09:37.56,0:09:40.37,Default,and it's restricted, meaning\Nit can't be turned on.
Dialogue: 0,0:09:40.37,0:09:40.96,Default,Go ahead. Question.
Dialogue: 0,0:09:41.15,0:09:44.93,Default,>> [Inaudible] if I want to do\Nsomething in the background,
Dialogue: 0,0:09:45.00,0:09:46.27,Default,but I don't want to do a fetch?
Dialogue: 0,0:09:46.27,0:09:47.60,Default,>> So the question is what\Nif I want to do something
Dialogue: 0,0:09:47.60,0:09:49.15,Default,in the background,\Nbut not a fetch?
Dialogue: 0,0:09:49.35,0:09:50.64,Default,And the answer is,\Nyou can do that.
Dialogue: 0,0:09:50.64,0:09:53.71,Default,This background fetch mechanism\Ndoesn't mean you can only fetch
Dialogue: 0,0:09:53.71,0:09:55.09,Default,on the network, you\Ncan do other things.
Dialogue: 0,0:09:55.40,0:09:57.45,Default,But it's called background\Nfetch and all that, I think,
Dialogue: 0,0:09:57.45,0:10:00.46,Default,for a reason by Apple, is\Nthat they're kind of implying
Dialogue: 0,0:10:00.53,0:10:02.72,Default,"this is kind of what we\Nimagine you're doing with this,"
Dialogue: 0,0:10:02.81,0:10:05.76,Default,so they don't really want you to\Nwake up and then just use a lot
Dialogue: 0,0:10:05.76,0:10:08.05,Default,of resources somehow\Ndoing something else,
Dialogue: 0,0:10:08.39,0:10:10.30,Default,but you are allowed\Nto do something else.
Dialogue: 0,0:10:10.30,0:10:11.53,Default,There's no law that says
Dialogue: 0,0:10:11.53,0:10:13.23,Default,when the background fetch is\Ncalled you couldn't make some
Dialogue: 0,0:10:13.23,0:10:15.48,Default,mathematical calculation\Nor something like that.
Dialogue: 0,0:10:16.85,0:10:18.45,Default,As you can imagine,\Nwhat really would you be
Dialogue: 0,0:10:18.45,0:10:19.79,Default,calculating mathematically?
Dialogue: 0,0:10:19.79,0:10:21.36,Default,Kind of, when you wake up\Nin the background it's kind
Dialogue: 0,0:10:21.36,0:10:23.60,Default,of like you want to check what's\Ngoing on in the world, okay?
Dialogue: 0,0:10:23.60,0:10:25.57,Default,And we're going to talk\Nabout checking things like
Dialogue: 0,0:10:25.57,0:10:26.93,Default,"where am I in the world?"
Dialogue: 0,0:10:27.04,0:10:27.88,Default,That's a different thing.
Dialogue: 0,0:10:28.04,0:10:29.20,Default,There's another mechanism\Nfor that,
Dialogue: 0,0:10:29.20,0:10:30.47,Default,and we're going to\Ntalk about that.
Dialogue: 0,0:10:30.96,0:10:31.51,Default,Yeah. Question?
Dialogue: 0,0:10:31.60,0:10:34.32,Default,>> Is there-- let's say our\NFacebook or snapchat users
Dialogue: 0,0:10:34.52,0:10:37.66,Default,to know that like someone sent\Nyou an E-mail or whatever?
Dialogue: 0,0:10:37.66,0:10:41.16,Default,>> So the question is, is\Nthis what, you know, Facebook
Dialogue: 0,0:10:41.16,0:10:43.58,Default,or some social media app,
Dialogue: 0,0:10:43.68,0:10:45.85,Default,that you know people are\Nsending you messages,
Dialogue: 0,0:10:46.10,0:10:49.68,Default,is this what it's using to say\N"someone sent you a message,"
Dialogue: 0,0:10:49.68,0:10:49.87,Default,>> [ Inaudible Comment ]
Dialogue: 0,0:10:49.87,0:10:52.81,Default,>> Yeah, the little notification\Nline, and the answer is no,
Dialogue: 0,0:10:52.81,0:10:53.78,Default,this is not what it's doing.
Dialogue: 0,0:10:53.78,0:10:56.77,Default,There's another mechanism for\Nthat called push notifications,
Dialogue: 0,0:10:56.84,0:10:58.02,Default,which we're probably\Nnot going to get
Dialogue: 0,0:10:58.02,0:10:59.23,Default,to talk about, unfortunately.
Dialogue: 0,0:10:59.26,0:11:01.17,Default,So that's how they're doing it.
Dialogue: 0,0:11:01.17,0:11:05.26,Default,There is a way to basically\Nhave a user of an app sign up
Dialogue: 0,0:11:05.26,0:11:07.81,Default,and say, with the server\Nsomewhere, saying "hey,
Dialogue: 0,0:11:07.81,0:11:10.06,Default,I'm willing to accept push\Nnotifications from Facebook,"
Dialogue: 0,0:11:10.49,0:11:14.04,Default,and then the Facebook server\Ncan send notifications,
Dialogue: 0,0:11:14.04,0:11:17.52,Default,little tiny JSON packets,\Nbasically, to the phone saying
Dialogue: 0,0:11:17.52,0:11:19.51,Default,"Oh, here's a message"\Nor something like that,
Dialogue: 0,0:11:19.51,0:11:22.98,Default,and the message might be\Nthis guy's got a message.
Dialogue: 0,0:11:23.41,0:11:25.01,Default,When you get those,\Nthere's a way
Dialogue: 0,0:11:25.01,0:11:26.26,Default,to get woken up in\Nthe background.
Dialogue: 0,0:11:26.44,0:11:28.37,Default,So it's a different mechanism\Nfor waking up in the background.
Dialogue: 0,0:11:28.66,0:11:31.15,Default,However, if you're doing\Nsomething, let's say you're
Dialogue: 0,0:11:31.15,0:11:36.19,Default,in "Read It" or in Facebook, and\Nyou have your little page up,
Dialogue: 0,0:11:36.41,0:11:37.50,Default,the last time you\Nwere in Facebook
Dialogue: 0,0:11:37.50,0:11:38.82,Default,and you want that to update.
Dialogue: 0,0:11:38.92,0:11:40.66,Default,No one is sending you\Na message, per se,
Dialogue: 0,0:11:40.66,0:11:42.79,Default,like not a Facebook\Nmessaging thing, but it's just
Dialogue: 0,0:11:42.79,0:11:45.09,Default,like people are posting on\Ntheir wall, you're watching
Dialogue: 0,0:11:45.09,0:11:47.63,Default,or whatever is going on,\Nand you want that to,
Dialogue: 0,0:11:47.80,0:11:50.50,Default,when you go to the app\Nswitcher, you want to see kind
Dialogue: 0,0:11:50.50,0:11:51.45,Default,of what's happening there.
Dialogue: 0,0:11:51.56,0:11:53.42,Default,Not in real time, but\Nkind of like...you know,
Dialogue: 0,0:11:53.70,0:11:54.88,Default,that's what this\Nwould be great for.
Dialogue: 0,0:11:55.27,0:11:58.48,Default,So wake up in the background,\Nfetch the current contents
Dialogue: 0,0:11:58.48,0:12:01.64,Default,of the page, update it, now if\Nsomeone looks in app switcher,
Dialogue: 0,0:12:01.64,0:12:03.53,Default,they can quickly see "Oh,\NI've got new stuff there!"
Dialogue: 0,0:12:03.99,0:12:05.05,Default,and they can go click and look.
Dialogue: 0,0:12:05.38,0:12:08.93,Default,You see? So it's different kinds\Nof things, but sending a message
Dialogue: 0,0:12:08.93,0:12:11.65,Default,and notification, that's\Npush notifications,
Dialogue: 0,0:12:11.70,0:12:12.66,Default,which we're not going\Nto talk about.
Dialogue: 0,0:12:12.98,0:12:14.64,Default,Good question though.
Dialogue: 0,0:12:14.98,0:12:18.00,Default,Okay one other follow\Nup from that demo is,
Dialogue: 0,0:12:18.49,0:12:20.99,Default,I kind of use a little\Ndemo ware in that,
Dialogue: 0,0:12:20.99,0:12:23.91,Default,when we got the background\Nfetch, when we got a chance
Dialogue: 0,0:12:23.91,0:12:27.45,Default,to do a background fetch, I\Ncalled start FLickr fetch, okay,
Dialogue: 0,0:12:27.59,0:12:29.04,Default,just to make it a\None-liner there,
Dialogue: 0,0:12:29.56,0:12:32.42,Default,that was almost a conceptual\Nthing I was doing, just to kind
Dialogue: 0,0:12:32.42,0:12:33.79,Default,of say "Okay, we\Ncan have a chance
Dialogue: 0,0:12:33.79,0:12:34.69,Default,to do a fetch, let's do it."
Dialogue: 0,0:12:34.99,0:12:37.91,Default,But actually calling start\NFLickr fetch there would not be
Dialogue: 0,0:12:37.91,0:12:40.23,Default,good, and probably\Nwould not work, okay?
Dialogue: 0,0:12:40.23,0:12:41.09,Default,And why was that?
Dialogue: 0,0:12:41.36,0:12:44.21,Default,That's because start FLickr\Nfetch starts a background
Dialogue: 0,0:12:44.21,0:12:46.36,Default,session, URL session, okay?
Dialogue: 0,0:12:46.64,0:12:49.01,Default,Background session meaning\Nit's the kind of URL session
Dialogue: 0,0:12:49.21,0:12:52.56,Default,that if the URL comes back\Nand you're not running,
Dialogue: 0,0:12:52.72,0:12:54.04,Default,you get a chance to handle it.
Dialogue: 0,0:12:54.26,0:12:57.20,Default,Right? That whole handle URL\Nbackground session other one we
Dialogue: 0,0:12:57.20,0:12:58.20,Default,looked at.
Dialogue: 0,0:12:58.82,0:13:02.53,Default,Those kind of background session\NURL fetches are discretionary.
Dialogue: 0,0:13:03.16,0:13:05.65,Default,Okay? Meaning that the system\Ncan determine, can decide,
Dialogue: 0,0:13:05.95,0:13:08.23,Default,if you're in the background, I'm\Nnot even going to do that fetch.
Dialogue: 0,0:13:08.58,0:13:11.17,Default,Okay? So those are fetches\Nthat generally you issue them
Dialogue: 0,0:13:11.17,0:13:13.96,Default,in the foreground, they might\Ncomplete in the background.
Dialogue: 0,0:13:14.48,0:13:16.84,Default,Okay? When you get a\Nchance to fetch, okay?
Dialogue: 0,0:13:16.84,0:13:17.78,Default,Because of this fetch thing?
Dialogue: 0,0:13:17.93,0:13:21.17,Default,You want to do that fetch right\Nthere, using ephemeral session
Dialogue: 0,0:13:21.17,0:13:24.05,Default,like we did everywhere else\Nin Shutterbug and stuff,
Dialogue: 0,0:13:24.23,0:13:25.99,Default,ephemeral normal session.
Dialogue: 0,0:13:25.99,0:13:27.02,Default,Not a background session.
Dialogue: 0,0:13:27.02,0:13:28.40,Default,That way, it won't\Nbe discretionary
Dialogue: 0,0:13:28.63,0:13:30.10,Default,and it will actually\Ndo the fetch.
Dialogue: 0,0:13:30.50,0:13:32.90,Default,And since the system is saying,\Nby sending you this message,
Dialogue: 0,0:13:32.94,0:13:34.22,Default,"Okay it's your turn\Nto do a fetch,
Dialogue: 0,0:13:34.22,0:13:35.80,Default,I've fired up all the radios,
Dialogue: 0,0:13:36.07,0:13:38.65,Default,I'm ready to do some network\Nactivity, go ahead and do it."
Dialogue: 0,0:13:39.01,0:13:40.43,Default,So the code that I posed
Dialogue: 0,0:13:40.59,0:13:43.74,Default,after lecture last time\Nis doing the right thing,
Dialogue: 0,0:13:43.95,0:13:46.00,Default,it's doing actual fetch,\Nso you can go take a look
Dialogue: 0,0:13:46.32,0:13:50.23,Default,at the background fetch\Nmessage that gets sent by iOS
Dialogue: 0,0:13:50.23,0:13:52.21,Default,and you'll see that I'm doing\Nan actual ephemeral fetch,
Dialogue: 0,0:13:52.21,0:13:53.50,Default,I'm not calling start\NFLickr fetch.
Dialogue: 0,0:13:53.50,0:13:55.86,Default,I just want to make it clear why\Nthat code was different there.
Dialogue: 0,0:13:56.27,0:13:56.58,Default,Question?
Dialogue: 0,0:13:56.95,0:13:59.82,Default,>> [Inaudible] like update\Na UI in the background
Dialogue: 0,0:13:59.82,0:14:01.83,Default,so that the task manager\Nshowed the current view?
Dialogue: 0,0:14:02.35,0:14:04.75,Default,How do we handle that in\Nterms of using the main queue
Dialogue: 0,0:14:04.75,0:14:07.98,Default,or not the main queue,\Nbecause we can't [inaudible].
Dialogue: 0,0:14:08.38,0:14:09.58,Default,>> Great. Great question.
Dialogue: 0,0:14:10.06,0:14:13.85,Default,Okay, so the question is\Nsomething's happening and I'm
Dialogue: 0,0:14:13.85,0:14:16.06,Default,in the background, and my\NUI needs to get updated.
Dialogue: 0,0:14:16.06,0:14:18.28,Default,Like, a URL comes\Nback or I get offered
Dialogue: 0,0:14:18.28,0:14:19.90,Default,to do a background fetch,\NI'm doing all these things,
Dialogue: 0,0:14:20.35,0:14:23.18,Default,and isn't there a problem\Nthere because I need
Dialogue: 0,0:14:23.18,0:14:24.60,Default,to do all my UI in\Nthe main queue?
Dialogue: 0,0:14:25.04,0:14:26.74,Default,That's the question, and\Nthat's a great question.
Dialogue: 0,0:14:26.74,0:14:29.49,Default,But the answer is, when you're\Nrunning in the background,
Dialogue: 0,0:14:29.97,0:14:31.17,Default,you're not on a different queue.
Dialogue: 0,0:14:31.58,0:14:34.87,Default,That background just means\Nthat you are not the app
Dialogue: 0,0:14:35.07,0:14:36.56,Default,that the people are looking at.
Dialogue: 0,0:14:36.72,0:14:38.68,Default,But every otherwise, it's just
Dialogue: 0,0:14:38.68,0:14:39.74,Default,like you're running\Nin the foreground.
Dialogue: 0,0:14:39.91,0:14:41.62,Default,You can draw, you\Ncan do everything.
Dialogue: 0,0:14:41.62,0:14:43.37,Default,Your main queue is\Nrunning, okay?
Dialogue: 0,0:14:43.53,0:14:45.43,Default,When you get the\Nopportunity to run like this,
Dialogue: 0,0:14:45.61,0:14:47.90,Default,it's your main queue that's\Nrunning, so you can do graphics,
Dialogue: 0,0:14:47.90,0:14:50.46,Default,you can do drawing,\Nanything you want, right?
Dialogue: 0,0:14:50.62,0:14:52.34,Default,So the difference\Nbetween foreground
Dialogue: 0,0:14:52.34,0:14:54.89,Default,and background is not main\Nqueue/some other queue,
Dialogue: 0,0:14:55.13,0:14:56.75,Default,it's am I the active app?
Dialogue: 0,0:14:56.88,0:14:57.98,Default,Am I not the active app?
Dialogue: 0,0:14:57.98,0:14:59.44,Default,That's the difference between\Nforeground and background.
Dialogue: 0,0:14:59.70,0:15:00.50,Default,Normally, when you're
Dialogue: 0,0:15:00.50,0:15:02.30,Default,in the background,\Nyou don't get to run.
Dialogue: 0,0:15:02.55,0:15:04.97,Default,Your main queue gets\Nno cycles, because none
Dialogue: 0,0:15:04.97,0:15:07.20,Default,of your app gets any\Ncycles, okay, normally,
Dialogue: 0,0:15:07.68,0:15:09.71,Default,but then occasionally you'll\Nget the background fetch
Dialogue: 0,0:15:09.71,0:15:12.95,Default,or URL will come back, or\Nif you're a location thing,
Dialogue: 0,0:15:12.95,0:15:14.23,Default,like I was saying we\Nwere talking about today,
Dialogue: 0,0:15:14.23,0:15:16.82,Default,you can get messages that\N"Hey the phone has moved
Dialogue: 0,0:15:16.82,0:15:20.01,Default,to a new location," um,\Nyou get a push notification
Dialogue: 0,0:15:20.01,0:15:21.41,Default,that I was talking\Nabout earlier.
Dialogue: 0,0:15:21.53,0:15:22.86,Default,You know, Facebook\Nsent you a message.
Dialogue: 0,0:15:22.86,0:15:24.42,Default,Those things will wake\Nyou up in the background,
Dialogue: 0,0:15:24.42,0:15:26.25,Default,and you can get a\Nlittle time to process.
Dialogue: 0,0:15:26.25,0:15:28.03,Default,Any time you're given\Nan opportunity to run
Dialogue: 0,0:15:28.03,0:15:30.56,Default,in the background a little, you\Nonly get a little bit of time.
Dialogue: 0,0:15:30.98,0:15:31.74,Default,Understandably.
Dialogue: 0,0:15:31.88,0:15:34.00,Default,You can't sit there and\Nrun for ten minutes, okay?
Dialogue: 0,0:15:34.00,0:15:35.50,Default,The whole point is\Nto kind of keep you
Dialogue: 0,0:15:35.50,0:15:38.65,Default,when you're not the app the user\Nis using, we want to keep you,
Dialogue: 0,0:15:38.65,0:15:40.35,Default,you know, not using\Na lot of resources
Dialogue: 0,0:15:40.35,0:15:41.63,Default,so the battery doesn't drain.
Dialogue: 0,0:15:42.39,0:15:44.62,Default,Okay? So good question.
Dialogue: 0,0:15:44.62,0:15:44.73,Default,Yeah?
Dialogue: 0,0:15:44.80,0:15:48.67,Default,>> If you do happen to start\Nsomething that takes ten minutes
Dialogue: 0,0:15:48.67,0:15:50.31,Default,to finish, is the\Nsystem just going
Dialogue: 0,0:15:50.44,0:15:52.07,Default,to cut off your processor\Nto pause you or?
Dialogue: 0,0:15:52.37,0:15:55.18,Default,>> So the question is, what\Nif I get an opportunity to run
Dialogue: 0,0:15:55.18,0:15:57.61,Default,in the background here from\None of these many mechanisms,
Dialogue: 0,0:15:57.81,0:16:00.08,Default,and I do start doing something\Nthat takes ten minutes.
Dialogue: 0,0:16:00.45,0:16:01.17,Default,What's going to happen?
Dialogue: 0,0:16:01.34,0:16:03.56,Default,And the answer is, the system\Nis going to just stop you,
Dialogue: 0,0:16:03.90,0:16:06.86,Default,your process is going to\Nstop, you're not going to get
Dialogue: 0,0:16:06.98,0:16:10.43,Default,to finish, and that will\Ncreate all kinds of bad things,
Dialogue: 0,0:16:10.43,0:16:12.16,Default,your user will be like\N"what's going on?"
Dialogue: 0,0:16:12.16,0:16:14.80,Default,you know? And that's bad for\Nyou if things will timeout,
Dialogue: 0,0:16:14.80,0:16:18.56,Default,if you're accessing the network,\Nall kinds of bad things,
Dialogue: 0,0:16:18.56,0:16:21.83,Default,so the answer is you don't want\Nto do that, and the answer is,
Dialogue: 0,0:16:21.83,0:16:23.16,Default,the system will not\Nlet you do it.
Dialogue: 0,0:16:24.13,0:16:24.70,Default,Good question.
Dialogue: 0,0:16:25.37,0:16:26.15,Default,Alright, anything else?
Dialogue: 0,0:16:26.44,0:16:28.69,Default,Great question, this is a great\Nslide, because we basically got
Dialogue: 0,0:16:28.69,0:16:31.53,Default,to talk about multi-tasking\Nhere.
Dialogue: 0,0:16:31.53,0:16:33.32,Default,Alright, so let's talk about,
Dialogue: 0,0:16:33.32,0:16:37.10,Default,continuing our Photo Mania\Ndemo here, and like I said,
Dialogue: 0,0:16:37.18,0:16:40.52,Default,I'm going to make it into an\NiPad app, actually I'm going
Dialogue: 0,0:16:40.52,0:16:42.50,Default,to make it a universal\Napp, okay?
Dialogue: 0,0:16:42.64,0:16:45.39,Default,Believe it or not, and this is\Ngoing to be a fairly short demo.
Dialogue: 0,0:16:45.39,0:16:49.57,Default,And we've kind of built so\Nmuch reusable parts here
Dialogue: 0,0:16:49.57,0:16:51.45,Default,and so much knowledge\Nthat you have
Dialogue: 0,0:16:51.45,0:16:54.84,Default,that we can really quickly now\Nmake these apps do much more
Dialogue: 0,0:16:54.84,0:16:57.76,Default,sophisticated things, and then\NI'm going to demo a new thing
Dialogue: 0,0:16:57.76,0:17:00.25,Default,that you've never seen\Nbefore, which is how
Dialogue: 0,0:17:00.25,0:17:02.02,Default,to make a popover segue way.
Dialogue: 0,0:17:02.16,0:17:04.48,Default,Okay? This is a new kind of\Nsegue way, we talked about it
Dialogue: 0,0:17:04.48,0:17:08.01,Default,in lecture, a few lectures ago,\Nbut I never asked you to do it
Dialogue: 0,0:17:08.01,0:17:10.42,Default,on homework, and\NI never demoed it,
Dialogue: 0,0:17:10.42,0:17:11.45,Default,so I'm going to demo it here.
Dialogue: 0,0:17:12.84,0:17:16.00,Default,Oh yes, okay, let's quit that.
Dialogue: 0,0:17:17.51,0:17:20.69,Default,Alright, so, let's\Ngo run Photo Mania.
Dialogue: 0,0:17:20.69,0:17:24.58,Default,This is exactly the way it\Nwas when I posted it, okay?
Dialogue: 0,0:17:24.58,0:17:26.33,Default,So this is the posting,\Nand you can see here,
Dialogue: 0,0:17:26.33,0:17:27.31,Default,this is the perform fetch,
Dialogue: 0,0:17:27.57,0:17:31.38,Default,and you can see how I'm just\Ndoing a normal ephemeral URL
Dialogue: 0,0:17:31.38,0:17:33.83,Default,fetch, I'm not calling\Nstart FLickr fetch here.
Dialogue: 0,0:17:34.57,0:17:37.56,Default,And this guy is not...how,\Nokay, I know how it is,
Dialogue: 0,0:17:37.56,0:17:41.03,Default,okay we'll deal with\NiTunes when we get there.
Dialogue: 0,0:17:41.03,0:17:42.96,Default,Alright, so um, so anyway,
Dialogue: 0,0:17:42.96,0:17:45.57,Default,so this is exactly what\NI posted last week, okay?
Dialogue: 0,0:17:45.57,0:17:46.90,Default,Last Thursday or whatever.
Dialogue: 0,0:17:47.62,0:17:48.92,Default,So what did this do?
Dialogue: 0,0:17:48.92,0:17:52.12,Default,Let's run this, just so we can\Nremind ourselves what Photo
Dialogue: 0,0:17:52.12,0:17:55.26,Default,Mania does, it's been more than\Nhalf a week, and there it is,
Dialogue: 0,0:17:55.26,0:17:57.41,Default,it just fetches in\Nthe background,
Dialogue: 0,0:17:57.57,0:18:03.20,Default,and also when it launches, kind\Nof a bunch of recent photos
Dialogue: 0,0:18:03.53,0:18:08.17,Default,from Flickr, then it\Nbasically makes a table
Dialogue: 0,0:18:08.17,0:18:12.18,Default,of all the photographers\Nwho took the photos,
Dialogue: 0,0:18:12.18,0:18:14.82,Default,so these are all photographers,\Nnot photos, photographers.
Dialogue: 0,0:18:15.20,0:18:17.01,Default,But we'd love to be\Nable to click on these
Dialogue: 0,0:18:17.29,0:18:19.94,Default,and see the photos by\Nthat photographer, right?
Dialogue: 0,0:18:19.94,0:18:22.06,Default,But we can't because we never\Nput any segue ways in here,
Dialogue: 0,0:18:22.06,0:18:26.16,Default,we never did anything, and plus\Nour app doesn't work at all
Dialogue: 0,0:18:26.16,0:18:28.52,Default,on iPad, in fact, let's go\Nlook at our iPad storyboard,
Dialogue: 0,0:18:29.20,0:18:31.71,Default,you can see it right here, it's\Njust this big blank screen.
Dialogue: 0,0:18:31.71,0:18:34.28,Default,So if I ran this on the iPad,\Nit would be a big, blank screen.
Dialogue: 0,0:18:34.28,0:18:34.97,Default,So let's get rid of that.
Dialogue: 0,0:18:35.72,0:18:38.98,Default,Now, I want to build my iPad\NUI here, but I'm going to do it
Dialogue: 0,0:18:38.98,0:18:40.91,Default,in a way that I showed\Nyou a little bit before,
Dialogue: 0,0:18:40.91,0:18:43.33,Default,but it's really powerful,\Nwhich I'm just going to copy
Dialogue: 0,0:18:43.33,0:18:47.08,Default,and paste it from another\Napp, because Shutterbug,
Dialogue: 0,0:18:47.08,0:18:51.24,Default,if you remember, had a UI on\Nthe iPad that's very similar
Dialogue: 0,0:18:51.24,0:18:52.68,Default,to what we want in Photo\NMania, so I'm going
Dialogue: 0,0:18:52.68,0:18:53.71,Default,to go over to Shutterbug.
Dialogue: 0,0:18:53.71,0:18:55.64,Default,This is Shutterbug\Nas we last left it.
Dialogue: 0,0:18:55.64,0:18:59.22,Default,And if you look at\NShutterbug's iPad UI, this,
Dialogue: 0,0:18:59.22,0:19:01.83,Default,it's kind of almost\Nwhat we want.
Dialogue: 0,0:19:02.29,0:19:04.71,Default,Shutterbug just shows\Nthe list of photos here,
Dialogue: 0,0:19:04.71,0:19:07.21,Default,if we could just insert the\Nlist of photographers here
Dialogue: 0,0:19:07.21,0:19:10.61,Default,in the middle, we'd have pretty\Nmuch what we want on the iPad,
Dialogue: 0,0:19:10.61,0:19:13.13,Default,so I'm just going\Nto copy all of this.
Dialogue: 0,0:19:13.89,0:19:15.73,Default,Go back over here\Nto Photo Mania,
Dialogue: 0,0:19:16.20,0:19:18.71,Default,and I'm in my iPad\Nstoryboard here, and paste.
Dialogue: 0,0:19:19.74,0:19:21.96,Default,Oops, I guess maybe\Nselect all over here?
Dialogue: 0,0:19:21.96,0:19:27.62,Default,Okay, select all, copy,\Nover here, and paste.
Dialogue: 0,0:19:27.62,0:19:28.98,Default,Okay? So put it in here.
Dialogue: 0,0:19:29.58,0:19:31.73,Default,As usual it's a little\Nbit of a search party
Dialogue: 0,0:19:31.73,0:19:34.69,Default,to find anything,\Noh, there it is!
Dialogue: 0,0:19:34.69,0:19:39.58,Default,So here is that Shutterbug\NiPad UI.
Dialogue: 0,0:19:39.74,0:19:43.32,Default,And like I said,\Nbasically I want to insert
Dialogue: 0,0:19:43.36,0:19:46.34,Default,in between the list\Nof photos a thing here
Dialogue: 0,0:19:46.34,0:19:47.58,Default,where I can choose\Nthe photographer.
Dialogue: 0,0:19:48.11,0:19:49.60,Default,The same thing, the\Nthing I just showed you,
Dialogue: 0,0:19:49.83,0:19:51.45,Default,that we were running\Nin Photo Mania.
Dialogue: 0,0:19:51.84,0:19:53.26,Default,While I'm here in Shutterbug,
Dialogue: 0,0:19:53.26,0:19:55.37,Default,let's grab the image\Nview controller.
Dialogue: 0,0:19:55.37,0:19:56.64,Default,We're going to need\Nthat obviously,
Dialogue: 0,0:19:56.64,0:19:58.77,Default,our storyboard uses that,\Nso we'll put that over here.
Dialogue: 0,0:19:59.61,0:20:00.49,Default,Copy that in.
Dialogue: 0,0:20:00.49,0:20:02.32,Default,And that's all we\Nneed from Shutterbug.
Dialogue: 0,0:20:02.32,0:20:08.89,Default,So this storyboard is pretty\Nmuch exactly what we want,
Dialogue: 0,0:20:08.89,0:20:11.14,Default,there's a couple of minor\Nthings we need to fix here.
Dialogue: 0,0:20:11.62,0:20:15.15,Default,One thing is we don't\Nwant this list of photos
Dialogue: 0,0:20:15.15,0:20:18.39,Default,to be the root view\Ncontroller of our split view,
Dialogue: 0,0:20:18.39,0:20:20.98,Default,we want the photographer\Nthing to be that.
Dialogue: 0,0:20:21.40,0:20:23.27,Default,So where can we get our\Nphotographer's table?
Dialogue: 0,0:20:23.27,0:20:24.92,Default,Well, we actually have that too,
Dialogue: 0,0:20:25.08,0:20:27.15,Default,that's here in our\NiPhone storyboard.
Dialogue: 0,0:20:27.35,0:20:28.90,Default,That's what I just ran\Nand showed you, right?
Dialogue: 0,0:20:28.90,0:20:30.72,Default,This is the list, this table
Dialogue: 0,0:20:30.72,0:20:34.53,Default,if you inspect its identity is\Nthis photographer's core data
Dialogue: 0,0:20:34.53,0:20:35.70,Default,table view controller, right?
Dialogue: 0,0:20:35.70,0:20:37.80,Default,So this is showing that\Nlist of photographers.
Dialogue: 0,0:20:38.04,0:20:39.35,Default,So let's just copy this.
Dialogue: 0,0:20:40.20,0:20:44.57,Default,Put this in our...oops,\Nand where did it go?
Dialogue: 0,0:20:44.76,0:20:45.76,Default,Whoops? Er!
Dialogue: 0,0:20:46.97,0:20:50.59,Default,Sorry. Sometimes hard to\Nfind all this, there it is.
Dialogue: 0,0:20:50.96,0:20:52.59,Default,Okay? Notice that\Nit looks really big.
Dialogue: 0,0:20:52.89,0:20:55.72,Default,That's because I haven't segued\Nto it yet, so it doesn't know
Dialogue: 0,0:20:55.72,0:20:59.70,Default,that it's going to be in\Na master of a split view
Dialogue: 0,0:20:59.70,0:21:05.81,Default,and be inside of a navigation\Ncontroller like that.
Dialogue: 0,0:21:06.06,0:21:08.80,Default,So let's go ahead and put that\Nroot view controller in there.
Dialogue: 0,0:21:08.80,0:21:09.23,Default,Where is it?
Dialogue: 0,0:21:09.23,0:21:11.35,Default,Okay so here's the root of\Nour navigation controller.
Dialogue: 0,0:21:11.68,0:21:13.98,Default,This thing is also\Nprobably called Shutterbug,
Dialogue: 0,0:21:14.11,0:21:18.02,Default,let's change this to Photo\NMania or maybe photographers,
Dialogue: 0,0:21:18.02,0:21:18.84,Default,because that's what's\Ngoing to show
Dialogue: 0,0:21:18.84,0:21:20.81,Default,up in our root view controller.
Dialogue: 0,0:21:21.01,0:21:24.75,Default,So I'm just going to control\Ndrag to the photographer's one,
Dialogue: 0,0:21:25.17,0:21:27.42,Default,and reset that to be the\Nroot view controller.
Dialogue: 0,0:21:28.15,0:21:33.89,Default,Okay? So now, let's get\Nmore space here, alright?
Dialogue: 0,0:21:33.89,0:21:41.97,Default,So now our API or our UI is a\Nlittle more what we want, okay?
Dialogue: 0,0:21:42.57,0:21:46.74,Default,We have this photographer's\Nthing here, and now we want,
Dialogue: 0,0:21:46.74,0:21:49.53,Default,if each time we click on a\Nphotographer, one of these rows,
Dialogue: 0,0:21:49.85,0:21:52.58,Default,then we want to go\Nto a list of photos.
Dialogue: 0,0:21:53.13,0:21:54.36,Default,Alright? So let's do that.
Dialogue: 0,0:21:54.36,0:21:57.10,Default,I'm just going to control\Ndrag from here to here.
Dialogue: 0,0:21:57.53,0:21:59.31,Default,And this is inside our\Nnavigation control,
Dialogue: 0,0:21:59.31,0:22:00.00,Default,so I'm going to push.
Dialogue: 0,0:22:00.81,0:22:03.79,Default,Okay? Now we're really\Ngetting close to what we want.
Dialogue: 0,0:22:04.13,0:22:06.64,Default,Okay? This is Shutterbug,\Nbut that's okay, that's going
Dialogue: 0,0:22:06.64,0:22:09.03,Default,to be the title, we're going\Nto reset that title anyway.
Dialogue: 0,0:22:09.61,0:22:11.72,Default,And what is the problem\Nwith this UI?
Dialogue: 0,0:22:11.72,0:22:15.62,Default,This UI is actually exactly what\Nwe want except for one thing,
Dialogue: 0,0:22:15.81,0:22:20.46,Default,which is that if we\Ninspect this guy right here,
Dialogue: 0,0:22:21.19,0:22:25.00,Default,it is a just posted\NFlickr photo CDTVC, right?
Dialogue: 0,0:22:25.00,0:22:26.21,Default,Because I copied\Nit from Shutterbug,
Dialogue: 0,0:22:26.21,0:22:27.77,Default,and that's what Shutterbug\Nshows, right?
Dialogue: 0,0:22:27.77,0:22:28.94,Default,The just posted photos.
Dialogue: 0,0:22:29.38,0:22:32.00,Default,So really we want this to\Nbe something like photos
Dialogue: 0,0:22:32.00,0:22:34.52,Default,by photographer CDTVC, right?
Dialogue: 0,0:22:34.52,0:22:37.10,Default,Because we're going to click\Non a photographer here,
Dialogue: 0,0:22:37.10,0:22:39.56,Default,and we want this to show the\Nphotos by that photographer.
Dialogue: 0,0:22:39.56,0:22:41.23,Default,Does everybody understand\Nwhy I'm saying that?
Dialogue: 0,0:22:42.08,0:22:44.23,Default,So let's just set it to be\Nthat, and we're going to have
Dialogue: 0,0:22:44.23,0:22:46.98,Default,to create this view\Ncontroller right here,
Dialogue: 0,0:22:46.98,0:22:47.82,Default,so let's just do that.
Dialogue: 0,0:22:47.85,0:22:51.43,Default,File, new file, the class,
Dialogue: 0,0:22:51.67,0:22:54.07,Default,it's going to be a core\Ndata table view controller.
Dialogue: 0,0:22:54.07,0:22:59.13,Default,We're going to call it\Nphotos by photographer CDTVC,
Dialogue: 0,0:22:59.13,0:23:02.27,Default,we've got to make sure this\Nequals this, because I just set
Dialogue: 0,0:23:02.27,0:23:04.67,Default,that to be the class in here.
Dialogue: 0,0:23:05.46,0:23:08.85,Default,So let's put this\N- I'll bring that,
Dialogue: 0,0:23:09.70,0:23:11.36,Default,let's put this in Photo Mania.
Dialogue: 0,0:23:12.35,0:23:15.77,Default,Huh, that's kind of weird,\Nokay...alright put in there.
Dialogue: 0,0:23:16.32,0:23:19.91,Default,Alright. So here's\Nour new photos
Dialogue: 0,0:23:19.91,0:23:22.02,Default,by photographer core data\Ntable view controller.
Dialogue: 0,0:23:22.02,0:23:25.07,Default,I'm going to not have you\Ndistracted by all this junk,
Dialogue: 0,0:23:25.07,0:23:26.48,Default,let's get rid of all that.
Dialogue: 0,0:23:27.02,0:23:30.22,Default,When we create a new view\Ncontroller, what do we do?
Dialogue: 0,0:23:30.22,0:23:33.15,Default,We always kind of think of\Nwhat is this thing's API?
Dialogue: 0,0:23:33.65,0:23:35.59,Default,What's it's public interface?
Dialogue: 0,0:23:35.59,0:23:37.50,Default,So let's look at the\Npublic interface of photos
Dialogue: 0,0:23:37.50,0:23:41.50,Default,by photographer, and probably\Nsome of you are imagining
Dialogue: 0,0:23:41.50,0:23:43.63,Default,that what this is, it's\Nreally simple, it's just going
Dialogue: 0,0:23:43.63,0:23:45.03,Default,to be non-atomic strong.
Dialogue: 0,0:23:45.52,0:23:48.44,Default,We need to pass the\Nphotographer in that we want
Dialogue: 0,0:23:48.44,0:23:49.75,Default,to show the photos of.
Dialogue: 0,0:23:50.33,0:23:55.11,Default,So I'd better import,\Nimport photographer,
Dialogue: 0,0:23:55.68,0:23:59.11,Default,and then I can have\Na photographer.
Dialogue: 0,0:23:59.70,0:24:05.61,Default,Okay so this is basically our\Npublic model, this is our model
Dialogue: 0,0:24:05.61,0:24:09.30,Default,and it's public, so if\Nsomeone sets this photographer,
Dialogue: 0,0:24:09.30,0:24:12.46,Default,we'd better show the\Nphotos by that photographer.
Dialogue: 0,0:24:12.46,0:24:14.11,Default,So this is a table\Nthat shows photos,
Dialogue: 0,0:24:14.48,0:24:17.37,Default,photographer determines\Nwhich photos we show.
Dialogue: 0,0:24:18.25,0:24:20.50,Default,Okay? Now before we go\Noff and implement this,
Dialogue: 0,0:24:20.50,0:24:24.00,Default,I'm actually going to go down to\Nour photographer's coordinated
Dialogue: 0,0:24:24.00,0:24:24.85,Default,table view controller.
Dialogue: 0,0:24:24.85,0:24:27.30,Default,This is the thing that shows\Nthe list of photographers.
Dialogue: 0,0:24:27.41,0:24:29.59,Default,Okay? That I started off\Nthis lecture showing you.
Dialogue: 0,0:24:30.00,0:24:32.70,Default,Hopefully you remember this\Ncode from last Wednesday,
Dialogue: 0,0:24:32.70,0:24:35.17,Default,you can see that it's doing\Na fetch to the photographer,
Dialogue: 0,0:24:35.17,0:24:37.76,Default,showing them by name, it's\Nfetching all of them right?
Dialogue: 0,0:24:37.76,0:24:41.59,Default,I'm going to put in the\Nnavigation code to navigate
Dialogue: 0,0:24:41.95,0:24:47.75,Default,from this photos one right here,\Nthis is the list of photos,
Dialogue: 0,0:24:48.05,0:24:49.59,Default,sorry, list of photographers.
Dialogue: 0,0:24:50.46,0:24:52.96,Default,This little segue right here.
Dialogue: 0,0:24:53.38,0:24:56.43,Default,So let's give that\Nlittle segue a name,
Dialogue: 0,0:24:56.61,0:25:01.05,Default,we'll call it the show\Nphotos by photographer segue,
Dialogue: 0,0:25:01.05,0:25:02.98,Default,because that's what\Nit does, right?
Dialogue: 0,0:25:02.98,0:25:04.62,Default,When we click on a\Nphotographer here,
Dialogue: 0,0:25:04.62,0:25:05.88,Default,it's going to show the photos.
Dialogue: 0,0:25:05.88,0:25:07.17,Default,And then let's go back
Dialogue: 0,0:25:07.17,0:25:09.36,Default,to our photographer's core\Ndata table view controller
Dialogue: 0,0:25:10.61,0:25:13.32,Default,and let's do the navigation.
Dialogue: 0,0:25:13.32,0:25:15.32,Default,Now, I'm going to\Nshow you something
Dialogue: 0,0:25:15.32,0:25:19.51,Default,that I think you should probably\Ndo for your development process,
Dialogue: 0,0:25:19.51,0:25:21.15,Default,which is to start\Nuse code snippets.
Dialogue: 0,0:25:21.15,0:25:24.02,Default,Now we talked about this in\None of the Friday sections,
Dialogue: 0,0:25:24.24,0:25:27.35,Default,so I'm not going to go over it\Nagain, but I have a code snippet
Dialogue: 0,0:25:27.35,0:25:29.57,Default,that I've created, for\Nexample, which is a kind
Dialogue: 0,0:25:29.57,0:25:32.72,Default,of generic table view\Nnavigation code snippet.
Dialogue: 0,0:25:32.72,0:25:36.30,Default,So I start typing what I called\Nit, table view navigation,
Dialogue: 0,0:25:36.30,0:25:38.60,Default,and I'm going to hit return,\Nand it's going to put it in.
Dialogue: 0,0:25:38.60,0:25:42.62,Default,So put this code in here for me,\Nand this is fairly generic okay?
Dialogue: 0,0:25:42.88,0:25:43.60,Default,And what does it do?
Dialogue: 0,0:25:43.60,0:25:45.09,Default,Well, it does prepare for segue
Dialogue: 0,0:25:45.09,0:25:49.61,Default,and it also does did\Nselect row add index path.
Dialogue: 0,0:25:49.81,0:25:53.63,Default,Okay? So this can work for a\Ntable view that is the master
Dialogue: 0,0:25:53.63,0:25:56.44,Default,of a split view, and it\Nwill also work for something
Dialogue: 0,0:25:56.44,0:25:59.34,Default,that it's just going to\Nsegue via navigation control
Dialogue: 0,0:25:59.34,0:25:59.84,Default,or whatever.
Dialogue: 0,0:26:00.29,0:26:01.12,Default,So how does it work?
Dialogue: 0,0:26:01.68,0:26:04.24,Default,Well if we prepare for segue,\Nit just gets the index path
Dialogue: 0,0:26:04.86,0:26:07.42,Default,from the sender, which\Nis a UI table view cell.
Dialogue: 0,0:26:07.49,0:26:09.71,Default,You've already seen this code\Nbefore, so it's nothing new.
Dialogue: 0,0:26:10.14,0:26:12.46,Default,And then it calls this\Nprepare up here, and we'll talk
Dialogue: 0,0:26:12.46,0:26:13.95,Default,about what the prepare\Ndoes in a second.
Dialogue: 0,0:26:14.29,0:26:16.82,Default,And then the did select row at\Nindex path, it does the trick
Dialogue: 0,0:26:16.82,0:26:19.88,Default,where it's looking at the detail\Ncontrol of the split view,
Dialogue: 0,0:26:20.16,0:26:22.29,Default,if it's a navigation\Ncontroller it looks inside
Dialogue: 0,0:26:22.29,0:26:24.89,Default,for its root view controller,\Nand then is preparing that.
Dialogue: 0,0:26:26.18,0:26:28.92,Default,Okay? Everyone understand\Nwhat these two methods do?
Dialogue: 0,0:26:30.51,0:26:32.98,Default,Okay. So now we've got\Nto look at this prepare,
Dialogue: 0,0:26:32.98,0:26:35.04,Default,because this is the thing that's\Nactually doing the prepare.
Dialogue: 0,0:26:35.04,0:26:35.75,Default,So here's that.
Dialogue: 0,0:26:36.35,0:26:37.77,Default,And what this is going to do,
Dialogue: 0,0:26:37.77,0:26:40.81,Default,it's going to get the managed\Nobject in the row on the table
Dialogue: 0,0:26:40.81,0:26:44.41,Default,that we're talking about,\Nokay, and then it's going
Dialogue: 0,0:26:44.41,0:26:48.44,Default,to check the class of the view\Ncontroller we're segueing to,
Dialogue: 0,0:26:48.76,0:26:51.41,Default,maybe it's going to check the\Nsegue identifiers as well,
Dialogue: 0,0:26:51.41,0:26:52.34,Default,that's not going to be--
Dialogue: 0,0:26:52.41,0:26:54.62,Default,you know, did select row at\Nindex path is not a segue,
Dialogue: 0,0:26:54.62,0:26:56.52,Default,so it's not going to\Nbe applicable there,
Dialogue: 0,0:26:56.52,0:26:59.70,Default,but I check here and see if\Nthere is a segue identifier,
Dialogue: 0,0:26:59.70,0:27:01.52,Default,and if there's not, then\NI'd ignore this part.
Dialogue: 0,0:27:01.52,0:27:05.03,Default,And then I'd prepare that view\Ncontroller for being segued to
Dialogue: 0,0:27:05.03,0:27:07.16,Default,or if it's the detail of\Nthe split view controller.
Dialogue: 0,0:27:07.81,0:27:11.64,Default,Okay? So this case, we\Nhave photographers segueing
Dialogue: 0,0:27:11.64,0:27:13.29,Default,to photos, so let's see\Nwhat this looks like.
Dialogue: 0,0:27:13.29,0:27:15.96,Default,Well, the index manage object\Nwe have here that we're going
Dialogue: 0,0:27:15.96,0:27:18.31,Default,to be looking for is a\Nphotographer, so I'm just going
Dialogue: 0,0:27:18.57,0:27:20.66,Default,to replace this with\Nphotographer.
Dialogue: 0,0:27:21.21,0:27:21.99,Default,Photographer.
Dialogue: 0,0:27:22.68,0:27:25.18,Default,Okay? Just getting my\Nobject in index path
Dialogue: 0,0:27:25.18,0:27:27.49,Default,out of my fetched results\Ncontroller, you know what
Dialogue: 0,0:27:27.49,0:27:29.33,Default,that is, and then what kind
Dialogue: 0,0:27:29.33,0:27:31.90,Default,of view controller\Nare we segueing to?
Dialogue: 0,0:27:31.90,0:27:34.18,Default,Well, we're going to\Nbe segueing to photos
Dialogue: 0,0:27:34.18,0:27:36.97,Default,by photographer core\Ndata view controllers
Dialogue: 0,0:27:36.97,0:27:37.70,Default,that we just created.
Dialogue: 0,0:27:37.70,0:27:39.20,Default,We haven't done the\Nimplementation of this yet,
Dialogue: 0,0:27:39.20,0:27:42.76,Default,but we know what his public API\Nis, to set the photographer,
Dialogue: 0,0:27:42.87,0:27:44.31,Default,which is exactly\Nwhat we would want.
Dialogue: 0,0:27:44.82,0:27:46.51,Default,So let's go ahead\Nand import that.
Dialogue: 0,0:27:47.80,0:27:55.21,Default,Import, m, import photos by\Nphotographer, and then let's go
Dialogue: 0,0:27:55.21,0:27:58.24,Default,down here and check\Nthat that's the class,
Dialogue: 0,0:27:58.27,0:27:59.73,Default,photos by photographer.
Dialogue: 0,0:27:59.73,0:28:02.91,Default,Okay, so now we know that\Nthat's the class that we want.
Dialogue: 0,0:28:03.25,0:28:06.52,Default,Here, this segue identifier\Nwe can check that here,
Dialogue: 0,0:28:06.52,0:28:09.26,Default,and if you remember, I\Nset it to be show photos
Dialogue: 0,0:28:09.33,0:28:11.36,Default,by photographer, right?
Dialogue: 0,0:28:11.36,0:28:13.49,Default,That's, everyone know\Nwhat that is, right?
Dialogue: 0,0:28:13.49,0:28:15.29,Default,That is this thing right here.
Dialogue: 0,0:28:16.40,0:28:17.32,Default,This little segue.
Dialogue: 0,0:28:18.20,0:28:19.98,Default,Okay. It's identifier is this.
Dialogue: 0,0:28:20.76,0:28:22.85,Default,That's got to match what\Nwe're doing in here.
Dialogue: 0,0:28:23.95,0:28:26.36,Default,Alright, so we're\Ntaking that, and again,
Dialogue: 0,0:28:26.36,0:28:29.33,Default,if we're doing the did\Nselect row at index path case
Dialogue: 0,0:28:29.33,0:28:30.35,Default,where it's just the detail view,
Dialogue: 0,0:28:30.35,0:28:33.21,Default,then the segue identifiers can\Nbe nil, so it's length is going
Dialogue: 0,0:28:33.21,0:28:37.34,Default,to be nil, and so I use length\Nthere just in case to check
Dialogue: 0,0:28:37.34,0:28:40.19,Default,for empty string and nil\Nequally, either of them,
Dialogue: 0,0:28:40.19,0:28:43.64,Default,and I'm doing not, so if\Nthere's no segue identifier,
Dialogue: 0,0:28:43.64,0:28:48.28,Default,then as long a we're going to\Na photos by photographer CDTVC,
Dialogue: 0,0:28:48.28,0:28:51.54,Default,then we know we're going\Nto, what we're going to do.
Dialogue: 0,0:28:51.77,0:28:55.13,Default,Now, some people would argue the\Nchecking this segue identifier
Dialogue: 0,0:28:55.13,0:28:57.17,Default,that you should almost\Nnever do that.
Dialogue: 0,0:28:57.77,0:29:02.33,Default,Okay? Because if you're segueing\Nto photos by photographer CDTVC
Dialogue: 0,0:29:02.37,0:29:05.66,Default,from a photographer's CDTVC,\Nyou know what you're doing,
Dialogue: 0,0:29:05.66,0:29:06.95,Default,you don't need a\Nsegue identifier
Dialogue: 0,0:29:06.95,0:29:07.84,Default,to tell you what you're doing.
Dialogue: 0,0:29:07.84,0:29:08.88,Default,That's what some\Npeople would say.
Dialogue: 0,0:29:09.31,0:29:11.89,Default,And I see that argument,\Nit's not a bad argument,
Dialogue: 0,0:29:11.89,0:29:14.50,Default,I even buy that argument\Nthat really you only
Dialogue: 0,0:29:14.50,0:29:16.11,Default,when you segue identifiers
Dialogue: 0,0:29:16.11,0:29:18.53,Default,if for some reason you\Nhad two different segues,
Dialogue: 0,0:29:18.61,0:29:20.95,Default,and we'll talk a little bit\Nlater in this demo an example
Dialogue: 0,0:29:20.95,0:29:22.44,Default,of where you might\Nactually have that.
Dialogue: 0,0:29:22.98,0:29:25.91,Default,So one could argue just delete\Nthat, okay, just get rid
Dialogue: 0,0:29:25.91,0:29:27.46,Default,of that entirely,\Ndon't even check that.
Dialogue: 0,0:29:27.86,0:29:30.61,Default,And here we know that\Nthis is a, if it's photos
Dialogue: 0,0:29:30.61,0:29:36.33,Default,by photographer CDTVC, photos by\Nphotographer CDTVC equals photos
Dialogue: 0,0:29:36.33,0:29:42.16,Default,by photographer CDTVC, start,\NVC, alright, so we have that.
Dialogue: 0,0:29:42.16,0:29:44.66,Default,So now we're going to\Nprepare this view controller.
Dialogue: 0,0:29:44.99,0:29:48.09,Default,Photos by photographer dot\Nphotographer equals the
Dialogue: 0,0:29:48.09,0:29:50.30,Default,photographer that was\Nselected in our row.
Dialogue: 0,0:29:51.47,0:29:51.82,Default,Okay?
Dialogue: 0,0:29:52.02,0:29:52.50,Default,>> [ Inaudible Question ]
Dialogue: 0,0:29:52.50,0:29:58.45,Default,>> Uh, yeah, we'll\Ntalk about that.
Dialogue: 0,0:29:58.45,0:30:01.38,Default,So the question is, don't\NI have to pass the context
Dialogue: 0,0:30:01.61,0:30:04.01,Default,to this new controller?
Dialogue: 0,0:30:04.01,0:30:06.53,Default,And the answer is\Nyes, and I'm doing
Dialogue: 0,0:30:06.53,0:30:08.61,Default,that in this line\Nof code right here.
Dialogue: 0,0:30:09.00,0:30:12.47,Default,So let's go look at\Nphotos by photographer.
Dialogue: 0,0:30:12.47,0:30:14.91,Default,So photos by photographer, it's\Ngoing to get this photographer.
Dialogue: 0,0:30:15.28,0:30:17.04,Default,What do we need to do in\Nphotos by photographer.
Dialogue: 0,0:30:17.04,0:30:18.50,Default,Well, really the\Nmain thing we need
Dialogue: 0,0:30:18.50,0:30:20.97,Default,to do is fetch the photos\Nby that photographer.
Dialogue: 0,0:30:20.97,0:30:24.00,Default,So let's go ahead\Nand look at that.
Dialogue: 0,0:30:24.12,0:30:25.91,Default,Every time I set\Nthe photographer,
Dialogue: 0,0:30:26.50,0:30:29.22,Default,and you're noticing, by the way,
Dialogue: 0,0:30:29.22,0:30:31.86,Default,any time you have a public model\Nset, you almost always are going
Dialogue: 0,0:30:31.86,0:30:35.67,Default,to use the setter\Nto update your view
Dialogue: 0,0:30:35.67,0:30:37.14,Default,when someone sets your model.
Dialogue: 0,0:30:37.28,0:30:38.38,Default,That's kind of an obvious thing.
Dialogue: 0,0:30:38.88,0:30:41.36,Default,One thing I might do here,\Nby the way, is set my title
Dialogue: 0,0:30:41.70,0:30:43.10,Default,to be the photographer's name.
Dialogue: 0,0:30:43.68,0:30:45.14,Default,That would be a good\Nthing, right?
Dialogue: 0,0:30:45.37,0:30:47.85,Default,I'm a controller that's\Nshowing a bunch of photos
Dialogue: 0,0:30:47.85,0:30:49.92,Default,by photographer, so my\Ntitle might want to be that.
Dialogue: 0,0:30:50.41,0:30:52.66,Default,But the real thing I\Nneed to do here is set
Dialogue: 0,0:30:52.66,0:30:55.87,Default,up my fetched results\Ncontroller.
Dialogue: 0,0:30:55.98,0:30:59.64,Default,That's the main thing\Nthat CDTVCs need to do,
Dialogue: 0,0:30:59.64,0:31:01.73,Default,is set up their fetched\Nresults controller,
Dialogue: 0,0:31:01.73,0:31:03.75,Default,and then they just kind of\Nwork automatically right?
Dialogue: 0,0:31:03.75,0:31:07.19,Default,So to save some time, I\Nhave that ready to go here,
Dialogue: 0,0:31:07.19,0:31:08.27,Default,this is what it looks like.
Dialogue: 0,0:31:08.86,0:31:11.40,Default,Let me, I'm going to go through\Nevery line of this, don't worry.
Dialogue: 0,0:31:12.35,0:31:14.25,Default,So first is answering\Nyour question,
Dialogue: 0,0:31:14.25,0:31:15.47,Default,how do I get my context?
Dialogue: 0,0:31:15.47,0:31:17.80,Default,I need a context, I can't\Nfetch without a context.
Dialogue: 0,0:31:18.03,0:31:19.09,Default,And the answer is,\NI'm just going
Dialogue: 0,0:31:19.17,0:31:21.84,Default,to ask the photographer\Nwhat context it's in.
Dialogue: 0,0:31:22.55,0:31:24.94,Default,Okay? Someone gave me a\Nphotographer, and I'm going
Dialogue: 0,0:31:24.94,0:31:27.03,Default,to go find out what\Nthe context is from it.
Dialogue: 0,0:31:27.16,0:31:28.73,Default,That photographer came\Nfrom some database,
Dialogue: 0,0:31:28.73,0:31:30.70,Default,I want to get the photos\Nin the same database.
Dialogue: 0,0:31:30.89,0:31:33.24,Default,Okay? So I don't need to\Npass the context separately,
Dialogue: 0,0:31:33.41,0:31:34.68,Default,it comes along with\Nthe photographer.
Dialogue: 0,0:31:35.26,0:31:38.72,Default,If the context is nil, so\Neither the photographer is nil,
Dialogue: 0,0:31:38.72,0:31:40.86,Default,or for some weird reason\Nthe photographer didn't come
Dialogue: 0,0:31:40.86,0:31:42.25,Default,from a context, that's\Nimpossible,
Dialogue: 0,0:31:42.25,0:31:44.74,Default,but mostly this will be\Nthe photographer is nil,
Dialogue: 0,0:31:44.93,0:31:47.03,Default,then I'm going to set my fetch\Ncontroller results to nil,
Dialogue: 0,0:31:47.03,0:31:48.56,Default,that blanks out my table.
Dialogue: 0,0:31:48.87,0:31:50.55,Default,If you set your fetch\Nresults code to nil,
Dialogue: 0,0:31:50.55,0:31:51.85,Default,then your table's\Ngoing to be blank.
Dialogue: 0,0:31:51.85,0:31:54.10,Default,Which I want in this case, if\Nsomeone gives me a photographer
Dialogue: 0,0:31:54.10,0:31:56.26,Default,with no context, or gives\Nme nil photographer.
Dialogue: 0,0:31:56.95,0:31:59.34,Default,But otherwise, I'm going\Nto set up a fetch request
Dialogue: 0,0:31:59.43,0:32:05.53,Default,for all the photos where my\Npredicate is who took equals
Dialogue: 0,0:32:05.53,0:32:08.23,Default,that photographer, okay?
Dialogue: 0,0:32:08.23,0:32:10.33,Default,Everyone understand that\Nline of code, hopefully?
Dialogue: 0,0:32:10.33,0:32:12.06,Default,If you started on your homework,\Nthen you understand it.
Dialogue: 0,0:32:12.53,0:32:17.18,Default,And then I'm going to show short\Nthe photos by the photos title.
Dialogue: 0,0:32:17.18,0:32:18.41,Default,So they're going to be\Nin alphabetical order
Dialogue: 0,0:32:18.41,0:32:19.65,Default,by the title of the photo.
Dialogue: 0,0:32:19.65,0:32:22.60,Default,So this is a property on\Nphoto, if you'll recall,
Dialogue: 0,0:32:22.60,0:32:23.71,Default,and we're going to sort by that.
Dialogue: 0,0:32:24.01,0:32:25.42,Default,Use this kind of finder
Dialogue: 0,0:32:25.42,0:32:28.11,Default,like sorting order,\Nand then that's it.
Dialogue: 0,0:32:28.11,0:32:31.00,Default,I just create this fetch, self\Ndot fetch results controller,
Dialogue: 0,0:32:31.00,0:32:33.32,Default,it's got the request right\Nhere that I just created,
Dialogue: 0,0:32:33.67,0:32:35.84,Default,and the context, which I\Ngot from the photographer,
Dialogue: 0,0:32:35.84,0:32:38.24,Default,and I'm not doing any\Nsections, and there's no cache.
Dialogue: 0,0:32:40.15,0:32:41.19,Default,Any questions about that?
Dialogue: 0,0:32:41.45,0:32:44.29,Default,Hopefully everyone\Nunderstands that from last time.
Dialogue: 0,0:32:44.29,0:32:45.72,Default,Now, what else does this photos
Dialogue: 0,0:32:45.72,0:32:47.55,Default,by photographer table\Nneed to do?
Dialogue: 0,0:32:47.90,0:32:49.26,Default,Well, not much else, okay,
Dialogue: 0,0:32:49.26,0:32:50.71,Default,by sending the fetch\Nresults controller,
Dialogue: 0,0:32:50.71,0:32:53.92,Default,it's getting the results, but\Nit has to display those results,
Dialogue: 0,0:32:53.92,0:32:55.83,Default,so it has to do self\Nrow at index path.
Dialogue: 0,0:32:56.09,0:32:57.15,Default,Okay? That's the one thing
Dialogue: 0,0:32:57.42,0:32:59.82,Default,that core data table view\Ncontroller cannot do for you,
Dialogue: 0,0:32:59.82,0:33:01.66,Default,because it doesn't\Nknow what attributes
Dialogue: 0,0:33:01.66,0:33:03.39,Default,of the object you want\Nto show in the row,
Dialogue: 0,0:33:03.39,0:33:04.26,Default,so we've got to do that.
Dialogue: 0,0:33:04.26,0:33:07.12,Default,The other thing it needs\Nto do is navigation.
Dialogue: 0,0:33:07.56,0:33:09.52,Default,Because when I click on\Na photo, I want to have
Dialogue: 0,0:33:09.52,0:33:12.09,Default,that image view controller\Nshow its image, right?
Dialogue: 0,0:33:12.14,0:33:13.16,Default,So it needs to do\Nthose two things.
Dialogue: 0,0:33:13.42,0:33:16.44,Default,But I'm not going to put\Nthose in this class, okay?
Dialogue: 0,0:33:17.15,0:33:18.57,Default,Why am I not going to\Nput these in the class?
Dialogue: 0,0:33:18.62,0:33:21.87,Default,Because those two things every\Ncore data table view controller
Dialogue: 0,0:33:21.87,0:33:23.43,Default,that shows photos wants to do.
Dialogue: 0,0:33:23.88,0:33:24.91,Default,Okay? Every single one of them.
Dialogue: 0,0:33:25.25,0:33:29.03,Default,So I'm going to create a generic\Nphotos core data table view
Dialogue: 0,0:33:29.03,0:33:30.64,Default,controller that knows\Nhow to do that.
Dialogue: 0,0:33:31.65,0:33:34.17,Default,Alright? And then I'm going to\Nhave this class inherit from it.
Dialogue: 0,0:33:34.47,0:33:36.67,Default,So I'm doing this to really\Nemphasize because a couple
Dialogue: 0,0:33:36.67,0:33:39.02,Default,of you, a few of you, are\Nstill struggling a little bit
Dialogue: 0,0:33:39.02,0:33:41.83,Default,with this concept of using\Nobject oriented design
Dialogue: 0,0:33:42.09,0:33:43.48,Default,to build your controllers.
Dialogue: 0,0:33:43.64,0:33:45.14,Default,Okay, so we're going to\Ndo it again right here.
Dialogue: 0,0:33:45.38,0:33:49.97,Default,So I'm going to create\Na new controller.
Dialogue: 0,0:33:49.97,0:33:53.11,Default,Okay? It's going to be a\Nnew core data view control,
Dialogue: 0,0:33:53.11,0:33:56.84,Default,it's going to be called photos,\Ncore data table view controller,
Dialogue: 0,0:33:57.24,0:34:00.69,Default,and its job in life is to\Nshow a bunch of photos.
Dialogue: 0,0:34:01.34,0:34:03.22,Default,Okay? So let's do that.
Dialogue: 0,0:34:03.94,0:34:06.27,Default,Let's find out what its\Npublic API is, okay,
Dialogue: 0,0:34:06.27,0:34:07.25,Default,here's its public API.
Dialogue: 0,0:34:07.88,0:34:11.62,Default,This turns out to have no public\NAPI because all you need to do
Dialogue: 0,0:34:11.62,0:34:17.77,Default,to make this thing work is hook\Nup fetched results controller
Dialogue: 0,0:34:17.94,0:34:21.03,Default,to any photo fetch request.
Dialogue: 0,0:34:21.70,0:34:24.64,Default,Okay? This thing is a core\Ndata table view controller,
Dialogue: 0,0:34:24.90,0:34:26.98,Default,so it has this fetched\Nresults controller thing.
Dialogue: 0,0:34:27.37,0:34:29.67,Default,As long as you set that\Nfetch results controller
Dialogue: 0,0:34:29.67,0:34:34.03,Default,to any photo request, then the\Njob of this class is going to be
Dialogue: 0,0:34:34.03,0:34:36.31,Default,to display it and let you\Nnavigate from it as well.
Dialogue: 0,0:34:37.07,0:34:37.87,Default,Okay? Generic.
Dialogue: 0,0:34:38.15,0:34:41.96,Default,Work for any photos, you don't\Neven have to set anything except
Dialogue: 0,0:34:41.96,0:34:43.23,Default,for the fetch results\Ncontroller.
Dialogue: 0,0:34:44.30,0:34:46.53,Default,Alright, so let's look at\Nthis guy's implementation,
Dialogue: 0,0:34:47.15,0:34:48.41,Default,pretty straightforward here.
Dialogue: 0,0:34:48.65,0:34:54.29,Default,Don't need any of this,\Nalright, so here we got
Dialogue: 0,0:34:54.29,0:34:55.79,Default,to just implement\Nthose two things,
Dialogue: 0,0:34:55.82,0:34:57.74,Default,self row at index\Npath and navigation.
Dialogue: 0,0:34:57.74,0:35:01.38,Default,So let's look at self\Nrow at index path.
Dialogue: 0,0:35:01.92,0:35:04.64,Default,Looks like this, table view,\Nself row at index path,
Dialogue: 0,0:35:05.43,0:35:07.94,Default,and of course, we'll\Njust get the cell.
Dialogue: 0,0:35:08.28,0:35:10.76,Default,Okay this code should be\Nvery, very familiar to you.
Dialogue: 0,0:35:10.92,0:35:13.16,Default,Go to the table view,\Nwe DQ, okay,
Dialogue: 0,0:35:13.16,0:35:16.46,Default,I'm going to call\Nthis photo cell.
Dialogue: 0,0:35:16.68,0:35:19.20,Default,Now it's interesting,\Nthis is a generic class,
Dialogue: 0,0:35:19.52,0:35:23.03,Default,and it's using photo\Ncell as it's reuse thing,
Dialogue: 0,0:35:23.03,0:35:25.24,Default,so I probably want to\Nput that information
Dialogue: 0,0:35:25.31,0:35:26.54,Default,into its public header file.
Dialogue: 0,0:35:26.99,0:35:30.81,Default,So I'm probably here going\Nto say use photo cell
Dialogue: 0,0:35:30.81,0:35:36.47,Default,as your table view\Ncells reuse ID.
Dialogue: 0,0:35:36.87,0:35:39.23,Default,Okay? That way anyone who is\Nusing my class doesn't have
Dialogue: 0,0:35:39.23,0:35:40.58,Default,to go look at its\Nimplementation,
Dialogue: 0,0:35:40.58,0:35:42.10,Default,they can just get\Nthis information
Dialogue: 0,0:35:42.10,0:35:43.42,Default,from the header file and do it.
Dialogue: 0,0:35:43.42,0:35:44.47,Default,So let's make sure we do that.
Dialogue: 0,0:35:44.89,0:35:49.17,Default,Let's go back here, here's our\Nphotos by photographer cell.
Dialogue: 0,0:35:49.17,0:35:52.85,Default,Let's see what its cells\Nreuse identifier is,
Dialogue: 0,0:35:53.29,0:35:56.01,Default,and the answer is,\Noooh, Flickr photo cell.
Dialogue: 0,0:35:56.05,0:35:57.60,Default,Because we stole\Nthis from Shutterbug,
Dialogue: 0,0:35:57.60,0:35:59.11,Default,and Shutterbug is\Na Flickr thing,
Dialogue: 0,0:35:59.11,0:36:00.44,Default,whereas we are a\Ncore database thing.
Dialogue: 0,0:36:00.47,0:36:02.91,Default,So I'm going to get rid of\Nthat word Flickr, and make sure
Dialogue: 0,0:36:02.91,0:36:05.55,Default,that this is what it's\Nsupposed to be, photo cell.
Dialogue: 0,0:36:06.44,0:36:08.83,Default,Okay? Everyone understand that?
Dialogue: 0,0:36:09.66,0:36:10.53,Default,So back to here.
Dialogue: 0,0:36:10.53,0:36:13.50,Default,So now I've got this\Nphoto cell, okay,
Dialogue: 0,0:36:13.81,0:36:15.27,Default,what am I going to do with it?
Dialogue: 0,0:36:15.56,0:36:17.98,Default,Well, I need to get the photo
Dialogue: 0,0:36:17.98,0:36:19.77,Default,that I'm supposed to\Nshow in this cell.
Dialogue: 0,0:36:19.95,0:36:24.20,Default,So that's photo star and of\Ncourse we need to import photo.
Dialogue: 0,0:36:26.98,0:36:30.03,Default,Photo equals self dot\Nfetch results controller,
Dialogue: 0,0:36:30.23,0:36:32.91,Default,object at index path,\Nthe index path.
Dialogue: 0,0:36:34.11,0:36:35.14,Default,Okay? This argument right here.
Dialogue: 0,0:36:35.72,0:36:39.35,Default,This, hopefully, is\Ncompletely you understand this.
Dialogue: 0,0:36:39.35,0:36:41.81,Default,Now, I just need to\Nset the text label.
Dialogue: 0,0:36:41.81,0:36:44.65,Default,I'm going to set it's text\Nto be the photo's title,
Dialogue: 0,0:36:45.03,0:36:48.40,Default,and let's set the detail, the\Nsubtext, the subtitle thing,
Dialogue: 0,0:36:48.40,0:36:49.98,Default,to the photo's subtitle.
Dialogue: 0,0:36:50.86,0:36:51.61,Default,And return the cell.
Dialogue: 0,0:36:52.47,0:36:54.55,Default,Okay? So you can see\Nthat writing cell
Dialogue: 0,0:36:54.55,0:36:56.49,Default,for row index path\Nis pretty easy
Dialogue: 0,0:36:56.49,0:36:59.54,Default,when it's a core data table view\Ncell, because usually the object
Dialogue: 0,0:36:59.65,0:37:01.42,Default,in the row which\Nyou can get one line
Dialogue: 0,0:37:01.42,0:37:03.58,Default,of code has what you\Nwant, you just display it.
Dialogue: 0,0:37:04.33,0:37:06.86,Default,Okay? Now, let's talk\Nabout the navigation.
Dialogue: 0,0:37:07.04,0:37:10.30,Default,I told you I have this generic\Ntable view navigation thing,
Dialogue: 0,0:37:10.30,0:37:11.71,Default,I'm going to use it\Nagain right here.
Dialogue: 0,0:37:11.71,0:37:14.66,Default,Okay? So it's the exact\Nsame thing that I put
Dialogue: 0,0:37:14.66,0:37:17.81,Default,in the other one, I just have\Nto make sure this is appropriate
Dialogue: 0,0:37:17.81,0:37:18.78,Default,to what we're doing here.
Dialogue: 0,0:37:19.03,0:37:21.93,Default,So this is photos, again, so\Nthe managed objects are going
Dialogue: 0,0:37:21.93,0:37:23.99,Default,to be photo star photo, okay,
Dialogue: 0,0:37:23.99,0:37:25.60,Default,so now I got the\Nphoto out of the row.
Dialogue: 0,0:37:25.89,0:37:28.13,Default,What does this thing do\Nin terms of navigation?
Dialogue: 0,0:37:28.13,0:37:29.51,Default,Well, it will navigate
Dialogue: 0,0:37:29.51,0:37:31.93,Default,to an image view controller\Nand show the image.
Dialogue: 0,0:37:32.48,0:37:35.62,Default,Alright? So let's import\Nimage view controller,
Dialogue: 0,0:37:35.62,0:37:37.78,Default,because that's what we're\Ngoing to be navigating to.
Dialogue: 0,0:37:38.43,0:37:42.17,Default,Okay? Get down here, kind of\Nclass image view controller,
Dialogue: 0,0:37:42.33,0:37:44.69,Default,again I could probably\Nskip the segue thing here,
Dialogue: 0,0:37:44.69,0:37:46.77,Default,because if I'm navigating\Nto an image view controller
Dialogue: 0,0:37:47.02,0:37:48.53,Default,from this photos\Nview controller,
Dialogue: 0,0:37:48.53,0:37:50.31,Default,I almost certainly\Nwant to show my image.
Dialogue: 0,0:37:50.42,0:37:52.28,Default,There's really nothing\Nelse I might want to do.
Dialogue: 0,0:37:52.28,0:37:52.97,Default,So we'll just do that.
Dialogue: 0,0:37:53.69,0:37:57.55,Default,So image view controller IVC\Nequals image view controller VC,
Dialogue: 0,0:37:58.09,0:38:04.10,Default,and we just need to set\Nthe IVC's image URL equal
Dialogue: 0,0:38:04.10,0:38:09.63,Default,to an NSURL with the\Nphotos image URL.
Dialogue: 0,0:38:09.69,0:38:11.24,Default,The reason I have to\Ndo this, of course,
Dialogue: 0,0:38:11.24,0:38:14.00,Default,is because you can't store\Nan image URL in the database,
Dialogue: 0,0:38:14.00,0:38:17.92,Default,we stored it as a string, so\Nthis converts it into a URL
Dialogue: 0,0:38:17.92,0:38:21.67,Default,because image view controller\Ntakes a URL as it's public API.
Dialogue: 0,0:38:21.67,0:38:25.36,Default,I could also do something here,\Ntitle equals the photo's title.
Dialogue: 0,0:38:26.91,0:38:29.80,Default,Okay? Because really the\Nimage view controller,
Dialogue: 0,0:38:29.80,0:38:31.25,Default,since it only has an image URL,
Dialogue: 0,0:38:31.25,0:38:32.59,Default,it doesn't have enough\Ninformation
Dialogue: 0,0:38:32.59,0:38:35.48,Default,to set its own title, like the\Nother one did, the photographer,
Dialogue: 0,0:38:35.75,0:38:41.44,Default,this one-- this guy's\Nsubclass that we created,
Dialogue: 0,0:38:41.44,0:38:42.90,Default,it knew how to do it,\Nbut this one really can't
Dialogue: 0,0:38:42.90,0:38:44.51,Default,so we'll help it out\Nand set its title.
Dialogue: 0,0:38:45.61,0:38:47.45,Default,Okay? Everyone understand that?
Dialogue: 0,0:38:48.19,0:38:51.56,Default,So now we have this nice\Ngeneric photos showing thing.
Dialogue: 0,0:38:51.56,0:38:54.01,Default,Let's go ahead and\Nmake our photos
Dialogue: 0,0:38:54.01,0:38:56.96,Default,by photographer inherit\Nfrom it, instead.
Dialogue: 0,0:38:57.25,0:39:03.34,Default,Photos CDTVC, photos\NCDTVC, okay?
Dialogue: 0,0:39:03.34,0:39:05.13,Default,So now it just inherited\Nthe ability
Dialogue: 0,0:39:05.13,0:39:07.40,Default,to do self row index\Nand navigation.
Dialogue: 0,0:39:08.35,0:39:11.14,Default,Okay, and it still\Ndoes the fetch itself.
Dialogue: 0,0:39:11.62,0:39:13.69,Default,So its the one determining\Nwhat photos show up,
Dialogue: 0,0:39:14.15,0:39:16.51,Default,it super classes the one,\Nputting them in the rows.
Dialogue: 0,0:39:16.51,0:39:18.75,Default,Everyone understand\Nwhat I'm doing there?
Dialogue: 0,0:39:19.14,0:39:22.04,Default,Okay. Okay, so that's awesome.
Dialogue: 0,0:39:22.39,0:39:26.47,Default,Everybody kind of knows how to\Nnavigate, everyone knows how
Dialogue: 0,0:39:26.47,0:39:30.73,Default,to load themselves up, and might\Nbe that's all we need to do?
Dialogue: 0,0:39:30.73,0:39:32.07,Default,Let's see if I can\Nremember anything else.
Dialogue: 0,0:39:32.28,0:39:32.95,Default,I think that's it.
Dialogue: 0,0:39:32.95,0:39:34.30,Default,So let's go see if\Nwe're working.
Dialogue: 0,0:39:34.35,0:39:36.93,Default,Let's try this on the iPad,\Nbecause we just built...whoops,
Dialogue: 0,0:39:36.93,0:39:38.19,Default,let's do it on the real iPad.
Dialogue: 0,0:39:38.19,0:39:43.08,Default,We just built this, so let's\Ngo ahead and do that and see
Dialogue: 0,0:39:43.33,0:39:45.71,Default,if we have any bugs,\Nthings not working.
Dialogue: 0,0:39:46.77,0:39:48.94,Default,Maybe we didn't forget,\Nwe didn't set some
Dialogue: 0,0:39:48.94,0:39:51.26,Default,of our segues right or\Nsomething like that,
Dialogue: 0,0:39:51.83,0:39:53.34,Default,so we can see what's\Ngoing on here.
Dialogue: 0,0:39:53.34,0:39:57.04,Default,So here it's Photo Mania,\Nso hopefully it's fetching
Dialogue: 0,0:39:57.04,0:39:59.35,Default,from Flickr right now into\Nthis photography table,
Dialogue: 0,0:39:59.35,0:40:00.93,Default,and it is, that's very good.
Dialogue: 0,0:40:01.14,0:40:02.92,Default,So here, we have\Nphotographers, right?
Dialogue: 0,0:40:02.92,0:40:04.40,Default,That's what Photo Mania does.
Dialogue: 0,0:40:04.65,0:40:05.99,Default,Shutterbug fetched the photos
Dialogue: 0,0:40:05.99,0:40:07.33,Default,and showed you the\Nphotos titles,
Dialogue: 0,0:40:07.33,0:40:09.50,Default,Photo Mania fetches the photos
Dialogue: 0,0:40:09.50,0:40:10.76,Default,and then shows you\Nthe photographer.
Dialogue: 0,0:40:10.76,0:40:12.24,Default,And we can look and see, some
Dialogue: 0,0:40:12.24,0:40:14.60,Default,of our photographers have\Nthree photos, some nine,
Dialogue: 0,0:40:14.60,0:40:16.79,Default,so let's pick this\Nguy, he has nine.
Dialogue: 0,0:40:16.79,0:40:18.38,Default,Let's pick this guy,\Nhe has three.
Dialogue: 0,0:40:18.75,0:40:20.18,Default,And we can click\Non one of these.
Dialogue: 0,0:40:20.33,0:40:23.03,Default,Again, hopefully nothing,\Nthis is Rio De Janeiro,
Dialogue: 0,0:40:23.03,0:40:24.11,Default,maybe we'll pick somewhere else.
Dialogue: 0,0:40:24.22,0:40:26.36,Default,No, there's no titles.
Dialogue: 0,0:40:26.39,0:40:27.38,Default,Uh, how about this one?
Dialogue: 0,0:40:27.38,0:40:28.79,Default,Nah, there's no titles.
Dialogue: 0,0:40:28.79,0:40:30.15,Default,Okay, we'll do Rio.
Dialogue: 0,0:40:30.15,0:40:32.05,Default,Hopefully Rio is not\Ngoing to do anything bad.
Dialogue: 0,0:40:32.36,0:40:32.97,Default,Here we go [chuckles].
Dialogue: 0,0:40:33.62,0:40:34.24,Default,There's Rio.
Dialogue: 0,0:40:34.24,0:40:35.28,Default,Oh, good! Not bad [laughter].
Dialogue: 0,0:40:35.81,0:40:38.31,Default,Okay, so there's our\Nimage view controller,
Dialogue: 0,0:40:38.31,0:40:39.31,Default,so this all worked great.
Dialogue: 0,0:40:39.31,0:40:42.84,Default,So hopefully it works\Nhere in porcher mode too
Dialogue: 0,0:40:42.84,0:40:44.68,Default,and it does seem to\Nbe working there too.
Dialogue: 0,0:40:44.85,0:40:46.89,Default,Okay? Oh - there,\Nokay [laughter].
Dialogue: 0,0:40:46.99,0:40:49.63,Default,Okay, so that's that.
Dialogue: 0,0:40:50.04,0:40:53.60,Default,Okay? You guys all got that?
Dialogue: 0,0:40:53.60,0:40:54.45,Default,It worked perfectly.
Dialogue: 0,0:40:54.57,0:40:57.80,Default,So now we can quickly move on\Nto the next thing we're going
Dialogue: 0,0:40:57.80,0:41:03.70,Default,to show, which is we're going\Nto show how to put a little--
Dialogue: 0,0:41:04.28,0:41:07.21,Default,put it in landscape\Nmode just to show here--
Dialogue: 0,0:41:07.46,0:41:10.82,Default,so right above where this\Nduck's nose is, okay,
Dialogue: 0,0:41:10.82,0:41:14.33,Default,I'm going to put a little button\Ncalled URL, and when I click
Dialogue: 0,0:41:14.33,0:41:16.97,Default,on it, it's going to do a\Npopover, and in that popover,
Dialogue: 0,0:41:16.97,0:41:19.32,Default,it's going to show me the\NURL that's showing here,
Dialogue: 0,0:41:19.80,0:41:22.13,Default,the text of it, you know,\Nhttp slash something.
Dialogue: 0,0:41:22.26,0:41:25.27,Default,Okay, so this is mostly to\Nshow you how to do popovers.
Dialogue: 0,0:41:25.56,0:41:27.41,Default,So let's go back and see\Nhow we would do that.
Dialogue: 0,0:41:28.85,0:41:31.27,Default,This turns out to be\Nquite straightforward.
Dialogue: 0,0:41:31.95,0:41:35.63,Default,So here we are, here's\Nour UI, and what we want
Dialogue: 0,0:41:35.63,0:41:39.06,Default,to do is add a little\Nbutton here that does URL.
Dialogue: 0,0:41:39.06,0:41:42.42,Default,Okay. So we're going to\Ndrag this bar button item
Dialogue: 0,0:41:42.55,0:41:45.40,Default,into the bar here, and\Nwe're going to call it URL.
Dialogue: 0,0:41:45.56,0:41:47.49,Default,Okay, so this is going\Nto be a bar button item
Dialogue: 0,0:41:47.49,0:41:49.92,Default,that when you click on\Nit, it's going to bring
Dialogue: 0,0:41:49.92,0:41:54.28,Default,up a popover here, a little view\Nor view controller that's going
Dialogue: 0,0:41:54.28,0:41:56.63,Default,to appear, overlapping\Neverything else.
Dialogue: 0,0:41:56.63,0:41:59.10,Default,So how do we do that?
Dialogue: 0,0:41:59.10,0:42:01.05,Default,And the answer for that is
Dialogue: 0,0:42:01.10,0:42:05.01,Default,that we create an entirely\Nnew view controller.
Dialogue: 0,0:42:05.68,0:42:09.25,Default,Okay? A popup, a popover\Nsegue is a normal segue.
Dialogue: 0,0:42:09.25,0:42:11.15,Default,You segue to a new\Nview controller.
Dialogue: 0,0:42:11.15,0:42:13.32,Default,So we're going to create a new\Nview controller that's going
Dialogue: 0,0:42:13.32,0:42:15.51,Default,to display the URL\Nthat's showing here
Dialogue: 0,0:42:15.51,0:42:16.58,Default,in image view controller.
Dialogue: 0,0:42:17.01,0:42:19.14,Default,Alright? So how do we create\Na new view controller,
Dialogue: 0,0:42:19.14,0:42:20.21,Default,you all know how to do that.
Dialogue: 0,0:42:20.51,0:42:23.05,Default,We go into here, we\Ngo up to the top,
Dialogue: 0,0:42:23.29,0:42:25.29,Default,we grab a view controller\Nand we drag it out.
Dialogue: 0,0:42:25.76,0:42:29.86,Default,Okay? Now this view controller\Nis quite big, let's make it
Dialogue: 0,0:42:29.86,0:42:30.80,Default,so we can see a little better.
Dialogue: 0,0:42:30.80,0:42:31.83,Default,So here's our view controller.
Dialogue: 0,0:42:32.07,0:42:34.08,Default,So this is the view controller,\Nit's going to pop over.
Dialogue: 0,0:42:34.24,0:42:39.73,Default,Okay? And we then just create\Na segue by control dragging,
Dialogue: 0,0:42:39.73,0:42:42.01,Default,so I'm holding down\Ncontrol, and dragging,
Dialogue: 0,0:42:42.21,0:42:44.93,Default,just like any other\Nsegue, and this is going
Dialogue: 0,0:42:44.93,0:42:46.28,Default,to be a popover segue.
Dialogue: 0,0:42:46.28,0:42:48.28,Default,So this is the first time\Nwe've ever done popover.
Dialogue: 0,0:42:48.86,0:42:54.35,Default,Okay? So now once you create a\Npopover segue, you can now kind
Dialogue: 0,0:42:54.35,0:42:56.47,Default,of create this view\Ncontroller how ever you want,
Dialogue: 0,0:42:56.56,0:42:58.20,Default,it's a look, to pop over.
Dialogue: 0,0:42:58.61,0:43:01.29,Default,And one of the things you\Nmight want to set it its size.
Dialogue: 0,0:43:01.66,0:43:04.07,Default,Because if this is\Nour popover size,
Dialogue: 0,0:43:04.07,0:43:05.21,Default,that's not going to be good.
Dialogue: 0,0:43:05.21,0:43:06.82,Default,It's going to cover\Nour whole screen,
Dialogue: 0,0:43:06.82,0:43:07.74,Default,that's going to be horrendous.
Dialogue: 0,0:43:07.74,0:43:11.56,Default,So display URL, we only\Nneed it to be small.
Dialogue: 0,0:43:11.56,0:43:14.38,Default,And it's nice to have URL on\None line so it's not wrapping
Dialogue: 0,0:43:14.38,0:43:15.67,Default,because URLs have\Nall those slashes.
Dialogue: 0,0:43:15.67,0:43:17.70,Default,So let's try to make\Na really wide one
Dialogue: 0,0:43:17.70,0:43:19.40,Default,that will hopefully\Nfit in one line.
Dialogue: 0,0:43:19.40,0:43:22.27,Default,So how do we change the\Nsize of a view controller?
Dialogue: 0,0:43:22.85,0:43:24.59,Default,Okay? Because all our other\Nview controllers have kind
Dialogue: 0,0:43:24.59,0:43:28.00,Default,of inferred their size using\Nthese simulated metrics right
Dialogue: 0,0:43:28.00,0:43:29.96,Default,here, you see this\Ninferred size?
Dialogue: 0,0:43:30.51,0:43:34.59,Default,But a pop up view, a\Npopover's controller is special
Dialogue: 0,0:43:34.59,0:43:37.63,Default,in that you can change its size,\Nnotice that you won't be able
Dialogue: 0,0:43:37.63,0:43:40.98,Default,to do this until X code knows\Nthat this is a pop up view,
Dialogue: 0,0:43:41.12,0:43:42.77,Default,popover view controller,\Nor at least knows
Dialogue: 0,0:43:42.77,0:43:45.87,Default,that this view controller is\Ngoing to be in a popover context
Dialogue: 0,0:43:46.09,0:43:48.31,Default,because of this segue right\Nhere, this popover segue.
Dialogue: 0,0:43:49.02,0:43:52.85,Default,Once you do that, if you\Ngo to your view controller
Dialogue: 0,0:43:52.85,0:43:56.72,Default,and select its view, self dot\Nview, then you can go dimensions
Dialogue: 0,0:43:56.72,0:43:57.91,Default,and these will be editable.
Dialogue: 0,0:43:58.81,0:43:59.56,Default,The width and height.
Dialogue: 0,0:43:59.94,0:44:02.22,Default,So, for example, we\Ncould make this 600 wide,
Dialogue: 0,0:44:02.22,0:44:03.75,Default,and maybe 40 pixels high.
Dialogue: 0,0:44:04.63,0:44:07.77,Default,Okay? Which is probably a\Npretty good looking thing.
Dialogue: 0,0:44:07.77,0:44:10.64,Default,So that means when we press this\NURL button it's going to pop
Dialogue: 0,0:44:10.64,0:44:13.39,Default,over and be something like\Nthat, that's pretty good size,
Dialogue: 0,0:44:13.80,0:44:16.59,Default,600 is the widest\Nthey will allow you
Dialogue: 0,0:44:16.59,0:44:18.52,Default,to make a popover, okay?
Dialogue: 0,0:44:18.96,0:44:22.12,Default,So I think if you\Nspecify more than 600,
Dialogue: 0,0:44:22.12,0:44:23.91,Default,it's only going to show up 600.
Dialogue: 0,0:44:24.36,0:44:26.49,Default,Alright, and you can make\Nit any height you want,
Dialogue: 0,0:44:26.76,0:44:28.94,Default,although obviously you\Nwouldn't want it too big,
Dialogue: 0,0:44:29.27,0:44:30.74,Default,cover up all content underneath.
Dialogue: 0,0:44:30.74,0:44:31.33,Default,It doesn't really make a--
Dialogue: 0,0:44:31.33,0:44:33.59,Default,a popover that would cover\Nup everything, you would want
Dialogue: 0,0:44:33.59,0:44:34.47,Default,to use a different\Nkind of segue,
Dialogue: 0,0:44:34.47,0:44:36.02,Default,a modal segue in that case.
Dialogue: 0,0:44:36.80,0:44:41.46,Default,So we have this, and then this\Nis just a normal view controller
Dialogue: 0,0:44:41.46,0:44:43.40,Default,otherwise, this little\Nview controller thing.
Dialogue: 0,0:44:43.66,0:44:45.38,Default,So we need to create a subclass
Dialogue: 0,0:44:45.38,0:44:47.88,Default,of view controller\Nto be its subclass.
Dialogue: 0,0:44:47.88,0:44:48.47,Default,So let's do that.
Dialogue: 0,0:44:49.93,0:44:52.48,Default,And what does this\Nview controller do?
Dialogue: 0,0:44:52.69,0:44:55.01,Default,Well, it's a normal\NUI view controller.
Dialogue: 0,0:44:59.81,0:45:03.41,Default,And it displays a URL, that's\Nall it does, so I'm going
Dialogue: 0,0:45:03.41,0:45:04.34,Default,to call it URL view controller,
Dialogue: 0,0:45:04.34,0:45:06.11,Default,because that's what it\Ndoes, displays the URL.
Dialogue: 0,0:45:07.05,0:45:09.71,Default,Okay? We'll put it in the\Nplace we usually put it.
Dialogue: 0,0:45:09.75,0:45:12.65,Default,Actually let's put it down\Nhere, eh, somewhere like here.
Dialogue: 0,0:45:13.65,0:45:15.18,Default,What's it's public API?
Dialogue: 0,0:45:15.78,0:45:20.96,Default,Very simple, property,\Nnon-atomic strong, NSURL, URL.
Dialogue: 0,0:45:21.01,0:45:23.74,Default,That's the URL it's\Ngoing to display.
Dialogue: 0,0:45:24.20,0:45:26.28,Default,Okay? What's its implementation?
Dialogue: 0,0:45:26.62,0:45:28.27,Default,Also really, really easy.
Dialogue: 0,0:45:28.98,0:45:29.97,Default,Let's get rid of this.
Dialogue: 0,0:45:30.43,0:45:32.65,Default,It's going, when\Nyou set its URL,
Dialogue: 0,0:45:33.93,0:45:36.59,Default,it's going to update its UI,
Dialogue: 0,0:45:37.90,0:45:39.93,Default,now this is not a table view\Ncontroller, so we're going
Dialogue: 0,0:45:39.93,0:45:40.98,Default,to have to write the update UI,
Dialogue: 0,0:45:41.19,0:45:44.25,Default,also when it's view\Ndid load happens,
Dialogue: 0,0:45:47.80,0:45:50.89,Default,also wants to update its\NUI, don't forget this part.
Dialogue: 0,0:45:51.27,0:45:54.37,Default,Okay, when you have non-table\Nview, table view controllers,
Dialogue: 0,0:45:54.66,0:45:57.92,Default,this set URL might be called\Nbefore your outlets are set.
Dialogue: 0,0:45:58.69,0:46:00.39,Default,Okay? So update UI\Nmight do nothing
Dialogue: 0,0:46:00.51,0:46:01.59,Default,because you have no outlets.
Dialogue: 0,0:46:02.43,0:46:04.74,Default,So if you want to do it\Nagain, view did load.
Dialogue: 0,0:46:04.74,0:46:07.47,Default,This is very inexpensive to\Ndo, so I'm just going to do it,
Dialogue: 0,0:46:07.47,0:46:09.77,Default,possibly twice, if\Nsomeone were to set this
Dialogue: 0,0:46:09.97,0:46:12.30,Default,and my outlets were set,\Nand view did load happened
Dialogue: 0,0:46:12.30,0:46:14.58,Default,after that, it might happen\Ntwice, but it's very inexpensive
Dialogue: 0,0:46:14.58,0:46:17.26,Default,to update my UI,\Nso I can do that.
Dialogue: 0,0:46:17.26,0:46:19.13,Default,So we need to write update UI.
Dialogue: 0,0:46:19.13,0:46:22.89,Default,To update UI, we need a UI, so\Nlet's go back to our storyboard
Dialogue: 0,0:46:22.89,0:46:23.65,Default,and give this thing a UI.
Dialogue: 0,0:46:23.65,0:46:27.31,Default,And what I'm going to do\Nfor this UI is just drag
Dialogue: 0,0:46:27.31,0:46:29.36,Default,out a text view, so I'm\Ngoing to go down here,
Dialogue: 0,0:46:29.91,0:46:34.17,Default,find a text view right here,\Nwe saw a text view from before,
Dialogue: 0,0:46:34.17,0:46:35.72,Default,so I'm going to put\Nthe text view in here.
Dialogue: 0,0:46:36.33,0:46:39.82,Default,I'm going to line it\Nup, let's go ahead
Dialogue: 0,0:46:39.82,0:46:43.59,Default,and get its auto layout\Ngoing, so I'm going to reset
Dialogue: 0,0:46:43.59,0:46:45.64,Default,to suggest a constraints,\NI'm going to check to see
Dialogue: 0,0:46:45.64,0:46:48.82,Default,if it did something good,\Nwhich, it definitely did.
Dialogue: 0,0:46:48.82,0:46:50.72,Default,You see that it's going\Nto stick to the size
Dialogue: 0,0:46:50.72,0:46:51.90,Default,of its super view, I like that.
Dialogue: 0,0:46:52.57,0:46:55.62,Default,Let's inspect the text view,\NI don't want all this code,
Dialogue: 0,0:46:55.62,0:47:00.33,Default,I'm going to put like\Nhttp slash, slash,
Dialogue: 0,0:47:00.33,0:47:04.87,Default,www dot Stanford dot edu, okay,\Nin there, that looks terrible,
Dialogue: 0,0:47:04.87,0:47:06.48,Default,let's make it a little bigger.
Dialogue: 0,0:47:07.62,0:47:09.62,Default,18 point, that looks better.
Dialogue: 0,0:47:09.62,0:47:15.59,Default,Let's make it be centered,\Nlet's make it be selectable
Dialogue: 0,0:47:15.65,0:47:18.09,Default,but not editable, so someone\Ncould select this and then copy
Dialogue: 0,0:47:18.09,0:47:20.72,Default,and paste it into their\Nbrowser and look at it that way,
Dialogue: 0,0:47:20.72,0:47:22.92,Default,so that's good, we\Ndefinitely like that.
Dialogue: 0,0:47:22.92,0:47:23.92,Default,So that looks pretty good.
Dialogue: 0,0:47:24.05,0:47:27.51,Default,That's a pretty good\Nlooking view of URL or UIL,
Dialogue: 0,0:47:27.88,0:47:30.49,Default,and so now let's go ahead and\Nwire this up to an outlet.
Dialogue: 0,0:47:31.06,0:47:32.58,Default,Notice that when I do that,
Dialogue: 0,0:47:32.58,0:47:34.78,Default,it's trying to do UI view\Ncontroller, why is that?
Dialogue: 0,0:47:35.11,0:47:38.36,Default,That's because we need to set\Nthe identity of this thing
Dialogue: 0,0:47:38.36,0:47:41.08,Default,to be a URL view\Ncontroller, right?
Dialogue: 0,0:47:41.08,0:47:42.91,Default,This thought it was a\Ngeneral view controller,
Dialogue: 0,0:47:42.91,0:47:46.05,Default,as soon as I do that, you can\Nsee that now it understands
Dialogue: 0,0:47:46.05,0:47:47.68,Default,that this is a URL\Nview controller.
Dialogue: 0,0:47:47.68,0:47:49.52,Default,So I'm going to go\Nahead and drag
Dialogue: 0,0:47:49.98,0:47:51.91,Default,to create an outlet\Nto that text view.
Dialogue: 0,0:47:51.91,0:47:55.01,Default,I'll call it URL text view.
Dialogue: 0,0:47:56.14,0:47:56.80,Default,There it is.
Dialogue: 0,0:47:57.15,0:47:58.23,Default,Normal ID outlet.
Dialogue: 0,0:47:58.23,0:48:03.31,Default,Let's go ahead and\Ngo full screen
Dialogue: 0,0:48:03.31,0:48:05.64,Default,on the code here, like that.
Dialogue: 0,0:48:05.84,0:48:08.71,Default,And now we can do our\Nupdate UI, which is that,
Dialogue: 0,0:48:08.71,0:48:14.94,Default,let's just have our URL text\Nview's text be the URLs,
Dialogue: 0,0:48:15.14,0:48:18.21,Default,its path basically\Nand there's a method
Dialogue: 0,0:48:18.21,0:48:20.16,Default,in URL called absolute string,
Dialogue: 0,0:48:20.36,0:48:23.59,Default,which will return the\Nabsolute path of that URL.
Dialogue: 0,0:48:24.28,0:48:25.65,Default,Sorry, self dot URL.
Dialogue: 0,0:48:26.37,0:48:28.94,Default,The absolute path as a\Nstring, which is what we want,
Dialogue: 0,0:48:28.94,0:48:30.10,Default,because text is a string.
Dialogue: 0,0:48:30.63,0:48:32.20,Default,Okay? And we can do a\Nlot more fun things,
Dialogue: 0,0:48:32.20,0:48:34.87,Default,attribute a text view, you can\Nset fonts, colors, whatever,
Dialogue: 0,0:48:35.21,0:48:37.24,Default,but we're just going to do a\Nvery, very simple update UI.
Dialogue: 0,0:48:37.66,0:48:40.13,Default,So now we have this URL\Nview controller, okay,
Dialogue: 0,0:48:40.13,0:48:41.35,Default,that we're going to segue to.
Dialogue: 0,0:48:41.60,0:48:42.50,Default,Right? This is a segue.
Dialogue: 0,0:48:42.50,0:48:46.23,Default,We are segueing...man, I should\Nput my doc somewhere else.
Dialogue: 0,0:48:46.83,0:48:49.97,Default,We are segueing from\Nthis view controller,
Dialogue: 0,0:48:49.97,0:48:52.58,Default,which is an image view\Ncontroller, right,
Dialogue: 0,0:48:53.09,0:48:56.61,Default,to this which is a\NURL view controller,
Dialogue: 0,0:48:56.61,0:48:58.48,Default,via this segue right here.
Dialogue: 0,0:48:59.39,0:49:03.08,Default,Okay? So let's go ahead\Nand give that segue a name.
Dialogue: 0,0:49:04.12,0:49:07.62,Default,We'll call it show URL, that's\Nprobably a good name for it.
Dialogue: 0,0:49:07.88,0:49:10.53,Default,Okay? And let's do the\Nprepare for segue for this.
Dialogue: 0,0:49:10.77,0:49:11.96,Default,That's the last piece\Nwe have to do.
Dialogue: 0,0:49:12.22,0:49:13.72,Default,So how are we going to\Nprepare for this segue?
Dialogue: 0,0:49:13.72,0:49:14.83,Default,It's a normal segue.
Dialogue: 0,0:49:15.15,0:49:18.31,Default,This image view controller\Nis where it happens, right?
Dialogue: 0,0:49:18.46,0:49:20.19,Default,That's where the UI is,\Nso that's where we have
Dialogue: 0,0:49:20.19,0:49:23.56,Default,to put the prepare for segue.
Dialogue: 0,0:49:23.56,0:49:24.63,Default,So we're going to do that.
Dialogue: 0,0:49:24.63,0:49:26.70,Default,Let's put it right down here.
Dialogue: 0,0:49:27.60,0:49:32.90,Default,So I'm going to put a nice\Npragma mark navigation,
Dialogue: 0,0:49:33.62,0:49:36.77,Default,and I'm just going to do\Nvoid prepare for segue.
Dialogue: 0,0:49:37.68,0:49:39.63,Default,And so here, I'm\Njust going to say
Dialogue: 0,0:49:39.63,0:49:44.76,Default,if the segue's destination\Nview controller is kind
Dialogue: 0,0:49:44.76,0:49:48.92,Default,of class a URL view\Ncontroller, okay,
Dialogue: 0,0:49:52.64,0:49:57.50,Default,then I'm going to segue to it.
Dialogue: 0,0:49:57.82,0:50:01.30,Default,And yeah, I could also say if\Nthe identifier equals show URL,
Dialogue: 0,0:50:01.30,0:50:03.70,Default,but for speed here,\Nwe're just going
Dialogue: 0,0:50:03.70,0:50:05.24,Default,to go ahead and not do that.
Dialogue: 0,0:50:06.30,0:50:07.64,Default,View, controller, class.
Dialogue: 0,0:50:08.54,0:50:11.27,Default,Okay. So now I have the\NURL view controller.
Dialogue: 0,0:50:12.27,0:50:18.17,Default,URLVC equals URL\Nview controller, uh,
Dialogue: 0,0:50:18.29,0:50:20.45,Default,the segue dot destination\Nview controller.
Dialogue: 0,0:50:20.45,0:50:22.08,Default,Okay? I've got the\NURL view controller,
Dialogue: 0,0:50:22.08,0:50:25.07,Default,and I can just set the URL view\Ncontroller's image, or sorry,
Dialogue: 0,0:50:25.07,0:50:28.38,Default,URL to be my image URL.
Dialogue: 0,0:50:28.38,0:50:31.83,Default,I am an image view controller,\Nso image view URL happens
Dialogue: 0,0:50:31.83,0:50:34.06,Default,to be my model, right?
Dialogue: 0,0:50:34.06,0:50:37.75,Default,So I have it handy dandy, and\NI'm just going to set that.
Dialogue: 0,0:50:38.88,0:50:42.54,Default,Okay? So now, I'm totally\Nprepared to segue to this thing,
Dialogue: 0,0:50:42.57,0:50:45.56,Default,so let's go ahead and give\Nthis a try and see if it works.
Dialogue: 0,0:50:47.52,0:50:58.81,Default,[ Background Sounds ]
Dialogue: 0,0:50:59.31,0:51:02.29,Default,>> Okay, so let's\Npick a photo here.
Dialogue: 0,0:51:02.29,0:51:03.90,Default,Let's pick a better one\Nthan that, let's pick, okay,
Dialogue: 0,0:51:03.90,0:51:06.36,Default,let's go back to Rio De Janeiro.
Dialogue: 0,0:51:06.36,0:51:06.99,Default,Okay, there we go.
Dialogue: 0,0:51:06.99,0:51:08.84,Default,So what is the URL for this?
Dialogue: 0,0:51:08.84,0:51:10.59,Default,It's going to be\Nsomething Flickr URL.
Dialogue: 0,0:51:10.59,0:51:13.05,Default,So we click on URL\Nand it shows it to us.
Dialogue: 0,0:51:13.16,0:51:15.75,Default,Some farm, some server\Nfarm at Flickr.
Dialogue: 0,0:51:15.99,0:51:16.41,Default,Excellent.
Dialogue: 0,0:51:16.77,0:51:19.03,Default,Now, this looks like, oh,\Ngood, it's all working.
Dialogue: 0,0:51:19.03,0:51:20.61,Default,But actually there's\Na problem here.
Dialogue: 0,0:51:20.61,0:51:21.12,Default,Watch this.
Dialogue: 0,0:51:21.23,0:51:22.64,Default,I'm going to press\Nthe UR button again.
Dialogue: 0,0:51:23.51,0:51:26.61,Default,Oh, the smog is building in\NRio here, look at it, oh,
Dialogue: 0,0:51:26.61,0:51:27.58,Default,it's getting so you\Ncan't even see.
Dialogue: 0,0:51:27.98,0:51:28.82,Default,What's happening there?
Dialogue: 0,0:51:29.08,0:51:31.49,Default,Actually, that segue is\Nhappening over and over,
Dialogue: 0,0:51:31.62,0:51:33.64,Default,it's putting up more\Nand more popovers.
Dialogue: 0,0:51:33.84,0:51:36.04,Default,So there's actually four or\Nfive popovers over the top
Dialogue: 0,0:51:36.04,0:51:38.00,Default,of each other, that's why it's\Ngetting darker and darker,
Dialogue: 0,0:51:38.00,0:51:39.51,Default,because the popover\Nkind of darkens the rest
Dialogue: 0,0:51:39.51,0:51:40.36,Default,of the screen when\Nit puts it up.
Dialogue: 0,0:51:40.68,0:51:41.84,Default,So if I click somewhere else,
Dialogue: 0,0:51:41.84,0:51:45.04,Default,which is how you dismiss a\Npopover, it's slowly getting rid
Dialogue: 0,0:51:45.04,0:51:47.52,Default,of them all, all the way\Nback to the other one.
Dialogue: 0,0:51:47.52,0:51:50.61,Default,Needless to say, this is not\Na great UI, for the user,
Dialogue: 0,0:51:50.61,0:51:51.82,Default,so we don't want this.
Dialogue: 0,0:51:51.82,0:51:52.87,Default,Okay, why is this?
Dialogue: 0,0:51:52.93,0:51:54.24,Default,How are we going to stop this?
Dialogue: 0,0:51:54.30,0:51:56.14,Default,Well, we're going to stop\Nthis when this segue,
Dialogue: 0,0:51:56.14,0:51:59.65,Default,when someone clicks on URL,\Nwe are going to check to see
Dialogue: 0,0:51:59.65,0:52:01.47,Default,if we already have a\Npopover up, and if we do,
Dialogue: 0,0:52:01.47,0:52:03.51,Default,we're not going to\Ndo that segue.
Dialogue: 0,0:52:03.51,0:52:06.10,Default,So let me show you\Nhow to do that.
Dialogue: 0,0:52:06.29,0:52:08.59,Default,So first of all, we\Nhave to keep track
Dialogue: 0,0:52:08.59,0:52:10.14,Default,of whether this popover is up.
Dialogue: 0,0:52:10.14,0:52:13.79,Default,So I'm going to do that\Nby adding a property here
Dialogue: 0,0:52:13.79,0:52:15.08,Default,to my image view controller.
Dialogue: 0,0:52:15.28,0:52:17.18,Default,I'm going to make it weak.
Dialogue: 0,0:52:18.06,0:52:20.56,Default,Here's one of the first times\Nwe've used a weak property
Dialogue: 0,0:52:20.56,0:52:22.89,Default,outside of outlets, okay,\Nbut it's going to be
Dialogue: 0,0:52:22.89,0:52:26.71,Default,in UI popover controller,\NURL popover controller,
Dialogue: 0,0:52:27.18,0:52:30.42,Default,and the reason it's going\Nto be weak is because I want
Dialogue: 0,0:52:30.42,0:52:34.62,Default,to use the weakness so that when\Nthe popover controller is gone,
Dialogue: 0,0:52:35.14,0:52:36.98,Default,no one else will have\Na strong pointer to it,
Dialogue: 0,0:52:36.98,0:52:38.69,Default,my pointer will get set to nil.
Dialogue: 0,0:52:39.24,0:52:42.66,Default,Get it? So now I'm always\Ngoing to know whether
Dialogue: 0,0:52:42.66,0:52:45.84,Default,that popover controller\Nis up, but I've got
Dialogue: 0,0:52:45.84,0:52:47.28,Default,to set it initially, though.
Dialogue: 0,0:52:47.38,0:52:49.82,Default,I've got to set this\Nthing to the popover
Dialogue: 0,0:52:49.82,0:52:51.70,Default,when the segue happens, okay?
Dialogue: 0,0:52:51.70,0:52:52.38,Default,So let's do that.
Dialogue: 0,0:52:52.38,0:52:53.85,Default,And how do we do that?
Dialogue: 0,0:52:54.54,0:52:58.46,Default,I said this in the slide, but\Nyou're probably like "what?"
Dialogue: 0,0:52:58.56,0:53:01.39,Default,but now you'll see it,\Nwhich is this segue,
Dialogue: 0,0:53:01.39,0:53:04.77,Default,if this is a popover\Nsegue, will be a subclass
Dialogue: 0,0:53:04.77,0:53:09.94,Default,of UI storyboard called UI\Nstoryboard popover segue.
Dialogue: 0,0:53:11.33,0:53:19.09,Default,Okay? Popover segue equals\NUI popover storyboard popover
Dialogue: 0,0:53:19.09,0:53:20.84,Default,segue, segue.
Dialogue: 0,0:53:21.30,0:53:24.66,Default,Now I could just do this, but\NI'm going to be a little safe
Dialogue: 0,0:53:24.66,0:53:27.08,Default,and say if my segue is kind
Dialogue: 0,0:53:27.08,0:53:33.54,Default,of class UI popover storyboard\Npopover segue way class, okay,
Dialogue: 0,0:53:33.73,0:53:35.38,Default,then I'll get it,\Nthen I'll do this.
Dialogue: 0,0:53:35.38,0:53:37.96,Default,I just don't like to do\Ncasts like that without,
Dialogue: 0,0:53:38.33,0:53:39.23,Default,you know, checking first.
Dialogue: 0,0:53:39.23,0:53:41.93,Default,Although if I got to\Nhere, it probably is going
Dialogue: 0,0:53:41.93,0:53:44.23,Default,to be a popover, but, you\Nknow, it should be a popover,
Dialogue: 0,0:53:44.23,0:53:45.31,Default,but I'm going to check anyway.
Dialogue: 0,0:53:45.86,0:53:49.21,Default,And now I'm just going to set\Nmy URL popover controller equal
Dialogue: 0,0:53:49.21,0:53:53.39,Default,to that popover segue's\Npopover controller property.
Dialogue: 0,0:53:53.39,0:53:55.84,Default,If you look at popover\Nsegue, here's popover segue,
Dialogue: 0,0:53:55.84,0:53:57.82,Default,I'm going to go to its\Ndocumentation, okay,
Dialogue: 0,0:53:57.82,0:54:00.53,Default,for UI storyboard\Npopover, and you'll see
Dialogue: 0,0:54:00.79,0:54:04.16,Default,that UI storyboard popover\Nonly has one property,
Dialogue: 0,0:54:04.16,0:54:05.51,Default,which is the popover controller.
Dialogue: 0,0:54:06.12,0:54:08.96,Default,Okay? So we're basically\Ngetting the popover controller
Dialogue: 0,0:54:09.18,0:54:10.50,Default,from the segue.
Dialogue: 0,0:54:11.84,0:54:12.76,Default,It's a special kind.
Dialogue: 0,0:54:12.84,0:54:15.02,Default,Okay? So it's a little--\Nhopefully you understand that--
Dialogue: 0,0:54:15.02,0:54:15.92,Default,everyone understand that?
Dialogue: 0,0:54:17.40,0:54:18.10,Default,Question? No?
Dialogue: 0,0:54:18.42,0:54:20.44,Default,>> So it's the same as\Ndestination view controller?
Dialogue: 0,0:54:21.00,0:54:23.40,Default,>> Um, it's not, this is not\Nthe destination view controller,
Dialogue: 0,0:54:23.40,0:54:25.12,Default,this is the segue itself.
Dialogue: 0,0:54:25.78,0:54:27.63,Default,Okay? We're not saying\Nsegue dot destination view
Dialogue: 0,0:54:27.63,0:54:28.20,Default,controller here.
Dialogue: 0,0:54:28.30,0:54:29.84,Default,>> Popover controller is\Nthe same as [inaudible].
Dialogue: 0,0:54:29.84,0:54:31.12,Default,>> Okay, great question.
Dialogue: 0,0:54:31.29,0:54:33.76,Default,Is the destination view\Ncontroller, this thing,
Dialogue: 0,0:54:34.06,0:54:35.31,Default,is that a popover controller?
Dialogue: 0,0:54:35.31,0:54:36.63,Default,And the answer is, it is not.
Dialogue: 0,0:54:37.18,0:54:38.89,Default,It is a URL view controller.
Dialogue: 0,0:54:39.52,0:54:42.06,Default,Okay? Popover view\Ncontroller is another class,
Dialogue: 0,0:54:42.06,0:54:46.49,Default,not a UI view controller, that\Ncontrols that popover, okay?
Dialogue: 0,0:54:46.72,0:54:47.29,Default,So it is not.
Dialogue: 0,0:54:47.56,0:54:50.67,Default,So the segue is a\Nstoryboard popover segue,
Dialogue: 0,0:54:50.67,0:54:53.78,Default,out of which we get\Nthe popover controller,
Dialogue: 0,0:54:53.93,0:54:57.13,Default,and the destination\Nview controller is a URL
Dialogue: 0,0:54:57.13,0:54:57.78,Default,view controller.
Dialogue: 0,0:54:57.97,0:54:59.70,Default,Everyone got all that?
Dialogue: 0,0:54:59.96,0:55:01.36,Default,Alright, so now we\Nhave a pointer
Dialogue: 0,0:55:01.36,0:55:03.91,Default,to this URL popover controller,\Nand it's automatically going
Dialogue: 0,0:55:03.91,0:55:05.32,Default,to get set to nil as soon
Dialogue: 0,0:55:05.32,0:55:06.90,Default,as it goes off screen,\Nbecause it's weak.
Dialogue: 0,0:55:06.90,0:55:08.19,Default,It's a weak pointer to it.
Dialogue: 0,0:55:08.19,0:55:10.28,Default,There's only one other\Nthing we need to do,
Dialogue: 0,0:55:10.37,0:55:14.85,Default,which is not do this\Nsegue if that thing is up.
Dialogue: 0,0:55:15.33,0:55:17.69,Default,And I actually talked about this\Nin the lecture, how we do this,
Dialogue: 0,0:55:17.69,0:55:21.33,Default,there's a method in UI view\Ncontroller called should perform
Dialogue: 0,0:55:21.33,0:55:22.81,Default,segue with identifier.
Dialogue: 0,0:55:24.18,0:55:27.51,Default,Okay? And this is the system\Nasking, someone clicked
Dialogue: 0,0:55:27.51,0:55:29.04,Default,on something that's\Nsupposed to cause a segue.
Dialogue: 0,0:55:29.44,0:55:30.15,Default,Should I do it?
Dialogue: 0,0:55:30.89,0:55:34.15,Default,And right here we're\Ngoing to say if the segue
Dialogue: 0,0:55:34.15,0:55:37.32,Default,in question here,\Nit's identifier,
Dialogue: 0,0:55:38.04,0:55:44.08,Default,is equal to string show\NURL, which is what it is
Dialogue: 0,0:55:44.17,0:55:49.83,Default,in our storyboard, and this is\Nthe reason why maybe we want
Dialogue: 0,0:55:49.83,0:55:51.77,Default,to check it here as well, okay?
Dialogue: 0,0:55:51.77,0:55:54.23,Default,I skipped over that demo mode,\Nbut you know, if we're going
Dialogue: 0,0:55:54.27,0:55:57.03,Default,to check it here, we might want\Nto check it up here as well.
Dialogue: 0,0:55:57.28,0:56:00.41,Default,But anyway, we've got this, I'm\Ngoing to return, in this case,
Dialogue: 0,0:56:00.41,0:56:04.73,Default,so if it's a URL, then if I have\NURL popover controller, then no,
Dialogue: 0,0:56:05.31,0:56:06.53,Default,do not perform this segue,
Dialogue: 0,0:56:06.53,0:56:08.51,Default,because there's already\Na popover up.
Dialogue: 0,0:56:08.84,0:56:10.97,Default,Otherwise, I could just say\Nyes, but actually I'm going
Dialogue: 0,0:56:10.97,0:56:12.87,Default,to do something a little\Ntrickier, I'm going to say
Dialogue: 0,0:56:13.22,0:56:16.98,Default,if I have a image\NURL, then put it up,
Dialogue: 0,0:56:17.27,0:56:19.62,Default,otherwise, also don't put it up.
Dialogue: 0,0:56:20.67,0:56:21.43,Default,See what I did there?
Dialogue: 0,0:56:22.35,0:56:25.82,Default,Two reasons not to\Nput, do that URL segue.
Dialogue: 0,0:56:25.82,0:56:29.60,Default,If I don't have any photo\Nshowing, then that's one reason.
Dialogue: 0,0:56:29.70,0:56:32.03,Default,Or if I have a popup already up.
Dialogue: 0,0:56:32.36,0:56:34.91,Default,Else, now this is interesting,\NI have an else case here,
Dialogue: 0,0:56:34.91,0:56:38.17,Default,which is super should performs.
Dialogue: 0,0:56:38.91,0:56:41.86,Default,Okay? So if I am not\Npreventing it, then I'm going
Dialogue: 0,0:56:41.86,0:56:44.39,Default,to let my super class UI view\Ncontroller decide whether it
Dialogue: 0,0:56:44.39,0:56:45.07,Default,should do this segue.
Dialogue: 0,0:56:45.31,0:56:49.34,Default,Which it's always going to say\Nyes, pretty much, but...okay?
Dialogue: 0,0:56:49.34,0:56:51.94,Default,This should be return.
Dialogue: 0,0:56:51.94,0:56:54.83,Default,Okay? So let's see if that\Nfixes all our problems
Dialogue: 0,0:56:54.83,0:56:55.29,Default,[background sounds].
Dialogue: 0,0:56:55.29,0:57:06.84,Default,Alright, so let's\Ngo back to Rio.
Dialogue: 0,0:57:07.85,0:57:12.56,Default,Here we are, in Rio, let's\Nclick URL, excellent, URL again,
Dialogue: 0,0:57:12.56,0:57:15.70,Default,again, again, again, it's\Nnot doing it, click away,
Dialogue: 0,0:57:15.90,0:57:17.48,Default,going to fix all our problems.
Dialogue: 0,0:57:18.25,0:57:21.47,Default,Okay? There is a subtle problem\Nstill here, which I'm not going
Dialogue: 0,0:57:21.47,0:57:23.25,Default,to fix because of time, I\Nneed to get to the maps here,
Dialogue: 0,0:57:23.62,0:57:27.54,Default,but if I go to portrait mode and\Nshow the URL, watch what happens
Dialogue: 0,0:57:27.54,0:57:29.46,Default,if I click photographer\Nover here
Dialogue: 0,0:57:29.60,0:57:30.86,Default,to show those photographers.
Dialogue: 0,0:57:31.23,0:57:33.24,Default,Oh! The URL thing\Ndidn't go away.
Dialogue: 0,0:57:33.74,0:57:36.02,Default,I thought if I clicked away from\Nit, it's supposed to go away.
Dialogue: 0,0:57:36.02,0:57:38.73,Default,And the answer is, if\Nyou click in the same bar
Dialogue: 0,0:57:39.72,0:57:43.42,Default,that the URL thing is, then\Nit does allow you to click.
Dialogue: 0,0:57:43.78,0:57:45.79,Default,That's the thing in the\Nslides that I talked about,
Dialogue: 0,0:57:45.79,0:57:47.13,Default,called pass through views.
Dialogue: 0,0:57:47.44,0:57:50.11,Default,So this whole bar is part\Nof the pass through views,
Dialogue: 0,0:57:50.31,0:57:51.66,Default,and the real bad\Nthing about this is,
Dialogue: 0,0:57:51.66,0:57:53.37,Default,if I click on a different photo,
Dialogue: 0,0:57:53.68,0:57:55.14,Default,it's showing me a\Ndifferent photo,
Dialogue: 0,0:57:55.14,0:57:57.22,Default,but it's not updating the URL.
Dialogue: 0,0:57:57.40,0:57:58.30,Default,So this is really bad.
Dialogue: 0,0:57:58.75,0:58:00.16,Default,So I'm going to fix\Nthis in the code I post,
Dialogue: 0,0:58:00.16,0:58:03.76,Default,actually let's just fix it\Nright now, easier to show you.
Dialogue: 0,0:58:03.87,0:58:05.03,Default,I'm going to do this.
Dialogue: 0,0:58:05.10,0:58:08.81,Default,Whenever someone sets my\Nimage to something new, okay?
Dialogue: 0,0:58:08.81,0:58:12.60,Default,Call set image, I'm going to,\Nin my image view controller,
Dialogue: 0,0:58:12.87,0:58:17.66,Default,I'm going to dismiss any\Npopover controller that I have.
Dialogue: 0,0:58:18.94,0:58:21.79,Default,Okay? So that way if\Nsomeone brings up that thing
Dialogue: 0,0:58:21.79,0:58:24.13,Default,on the right and they click,\Nat least I'll put away my URL.
Dialogue: 0,0:58:25.36,0:58:27.27,Default,Okay? I could actually\Nhave some code here
Dialogue: 0,0:58:27.27,0:58:30.87,Default,that updated the URL view\Ncontroller and made it change,
Dialogue: 0,0:58:30.87,0:58:33.36,Default,that wouldn't be that hard,\NI'd just keep track of it.
Dialogue: 0,0:58:33.36,0:58:35.78,Default,The only problem is then\Nthat would be inconsistent
Dialogue: 0,0:58:36.17,0:58:39.46,Default,between this portrait mode\Nand this mode, because here,
Dialogue: 0,0:58:39.46,0:58:42.79,Default,when I'm clicking, if I had URL\Nup here, if I click over here,
Dialogue: 0,0:58:42.79,0:58:43.94,Default,it makes the URL go away.
Dialogue: 0,0:58:44.39,0:58:47.26,Default,Okay? Because over\Nhere is now no longer
Dialogue: 0,0:58:47.26,0:58:49.10,Default,in the same bar as the URL.
Dialogue: 0,0:58:49.36,0:58:52.02,Default,So I want my behavior to be\Nat least somewhat consistent.
Dialogue: 0,0:58:52.54,0:58:55.02,Default,So I'll make it so that when\NI click on something new,
Dialogue: 0,0:58:55.12,0:58:57.22,Default,it makes the URL go away.
Dialogue: 0,0:58:57.60,0:58:59.49,Default,Okay? Okay!
Dialogue: 0,0:58:59.58,0:59:02.61,Default,Nice big long demo, I will,\Nof course, post all of this.
Dialogue: 0,0:59:02.61,0:59:04.14,Default,Now you know how to do\Npopover controllers,
Dialogue: 0,0:59:04.14,0:59:05.50,Default,you should really\Nhave a good handle
Dialogue: 0,0:59:05.50,0:59:08.37,Default,on using those core data table\Nview controllers by now, I hope.
Dialogue: 0,0:59:08.37,0:59:10.92,Default,Oh! I promised I would\Ndo universal app,
Dialogue: 0,0:59:11.14,0:59:13.28,Default,look how easy this is, okay?
Dialogue: 0,0:59:13.51,0:59:17.11,Default,I'm going to do my\NiPhone, here's my iPad,
Dialogue: 0,0:59:17.11,0:59:22.40,Default,I'm going to take this, copy\Nit, go over here to my iPhone,
Dialogue: 0,0:59:22.47,0:59:25.15,Default,get rid of this thing,\Npaste, okay?
Dialogue: 0,0:59:25.45,0:59:29.23,Default,Go back to iPad, get this image\Nview controller, which I need,
Dialogue: 0,0:59:29.92,0:59:32.65,Default,go over here, paste it.
Dialogue: 0,0:59:33.14,0:59:35.81,Default,If I can find space for it.
Dialogue: 0,0:59:36.18,0:59:39.95,Default,Paste. Alright there\Nit is, put it up here.
Dialogue: 0,0:59:41.09,0:59:44.16,Default,Just need to make\Nthe segue to it.
Dialogue: 0,0:59:45.13,0:59:46.83,Default,Control, drag.
Dialogue: 0,0:59:47.18,0:59:47.91,Default,It's a push segue.
Dialogue: 0,0:59:48.55,0:59:49.34,Default,Boom. We're done.
Dialogue: 0,0:59:49.43,0:59:50.40,Default,Now iPhone will work.
Dialogue: 0,0:59:51.44,0:59:54.23,Default,Okay? You can come up\Nafter class if you want
Dialogue: 0,0:59:54.23,0:59:55.51,Default,to see it working, but\Nthat's all there is.
Dialogue: 0,0:59:55.79,0:59:57.71,Default,So a lot of times when\Nyou're working on iPhone
Dialogue: 0,0:59:57.71,1:00:00.27,Default,and iPad UIs you'll\Nget one working
Dialogue: 0,1:00:00.27,1:00:02.03,Default,and then you'll just copy and\Npaste back to the other one.
Dialogue: 0,1:00:02.28,1:00:04.28,Default,Get that one maybe working\Nwith some new feature,
Dialogue: 0,1:00:04.28,1:00:05.29,Default,copy and paste it
Dialogue: 0,1:00:05.29,1:00:06.71,Default,in the appropriate things\Nback to the other one.
Dialogue: 0,1:00:06.71,1:00:08.70,Default,See what I mean, you can kind\Nof go back and forth between,
Dialogue: 0,1:00:09.08,1:00:10.27,Default,pretty straightforward.
Dialogue: 0,1:00:11.86,1:00:13.62,Default,Okay! Back to the slides.
Dialogue: 0,1:00:13.62,1:00:14.52,Default,Here we go.
Dialogue: 0,1:00:14.77,1:00:18.13,Default,Lecture 14, there it is.
Dialogue: 0,1:00:19.50,1:00:21.16,Default,Okay. So we're not\Ngoing to get all the way
Dialogue: 0,1:00:21.16,1:00:23.21,Default,through the maps stuff\Ntoday, which is fine,
Dialogue: 0,1:00:23.26,1:00:24.68,Default,because I have a little bit\Nof time at the beginning
Dialogue: 0,1:00:24.68,1:00:26.06,Default,of the next lecture,\Nand then I'm going
Dialogue: 0,1:00:26.06,1:00:29.18,Default,to be doing the map demo\Nin the next lecture anyway,
Dialogue: 0,1:00:29.18,1:00:30.41,Default,so it will be kind of\Nfresh in your mind.
Dialogue: 0,1:00:30.79,1:00:33.02,Default,So any questions about all\Nthat big demo I just did?
Dialogue: 0,1:00:34.24,1:00:34.91,Default,All sounds good?
Dialogue: 0,1:00:35.85,1:00:36.46,Default,Understandable?
Dialogue: 0,1:00:37.47,1:00:38.60,Default,Okay. Alright.
Dialogue: 0,1:00:39.42,1:00:41.63,Default,Map kit. Basically I'm going to\Nbe talking about map kit here,
Dialogue: 0,1:00:41.63,1:00:43.44,Default,but before I talk about\Nmap kit, I have to talk
Dialogue: 0,1:00:43.44,1:00:46.45,Default,about another framework,\Nwhich is a non-UI framework,
Dialogue: 0,1:00:46.75,1:00:48.84,Default,which kind of underlies\Nthe map kit framework,
Dialogue: 0,1:00:48.93,1:00:50.15,Default,called core location.
Dialogue: 0,1:00:50.15,1:00:53.73,Default,So core location is a framework,\Nhas a bunch of objects in it,
Dialogue: 0,1:00:53.87,1:00:57.56,Default,that have to do with where is\Nthis device in the universe?
Dialogue: 0,1:00:58.00,1:01:03.42,Default,Okay? Where on the planet, you\Nknow, where, in terms of GPS
Dialogue: 0,1:01:03.42,1:01:06.28,Default,or other factors determining\Nwhere it is, where is it?
Dialogue: 0,1:01:06.88,1:01:07.59,Default,Okay? Where on earth.
Dialogue: 0,1:01:08.24,1:01:13.16,Default,So, its basic object\Nis a CL location
Dialogue: 0,1:01:13.16,1:01:15.60,Default,that it concludes a coordinate\Nwhich is, you know, latitude
Dialogue: 0,1:01:15.60,1:01:18.23,Default,and longitude, altitude, okay?
Dialogue: 0,1:01:18.46,1:01:20.02,Default,Horizontal and vertical\Naccuracy,
Dialogue: 0,1:01:20.02,1:01:22.36,Default,we'll talk about why that's\Nimportant, time stamps, speed,
Dialogue: 0,1:01:22.36,1:01:23.54,Default,course, things like that, okay?
Dialogue: 0,1:01:23.54,1:01:25.46,Default,That's the CL location object.
Dialogue: 0,1:01:26.64,1:01:30.37,Default,This object has this very\Nimportant property called
Dialogue: 0,1:01:30.37,1:01:33.90,Default,coordinate, and that\Nis a C-struct,
Dialogue: 0,1:01:34.02,1:01:36.05,Default,CL location coordinate 2D,
Dialogue: 0,1:01:36.28,1:01:38.90,Default,and inside is just\NCL location degrees,
Dialogue: 0,1:01:38.90,1:01:41.08,Default,which is essentially a\Ndouble, which is latitude,
Dialogue: 0,1:01:41.08,1:01:42.30,Default,and another one which\Nis longitude.
Dialogue: 0,1:01:43.11,1:01:45.45,Default,Okay? And then the\Naltitude is in meters.
Dialogue: 0,1:01:46.66,1:01:50.10,Default,Okay, so this is the basic\Nobject in core location.
Dialogue: 0,1:01:50.10,1:01:52.93,Default,So the question is how do...oh!
Dialogue: 0,1:01:52.93,1:01:55.22,Default,sorry, let me talk about\Naccuracy, very important.
Dialogue: 0,1:01:55.48,1:01:59.98,Default,So when you get a location,\Nyou got it in a certain way
Dialogue: 0,1:01:59.98,1:02:02.13,Default,that might have varying\Naccuracy.
Dialogue: 0,1:02:02.52,1:02:06.49,Default,If you got that location from\NGPS, it could be very accurate.
Dialogue: 0,1:02:06.74,1:02:10.06,Default,If you got it by looking\Nat local cell towers,
Dialogue: 0,1:02:10.27,1:02:12.30,Default,it might be pretty inaccurate.
Dialogue: 0,1:02:12.30,1:02:14.52,Default,Right? It could be a\Nmile off, actually.
Dialogue: 0,1:02:14.52,1:02:16.46,Default,If you got it that way.
Dialogue: 0,1:02:16.46,1:02:17.75,Default,And there's ways in between.
Dialogue: 0,1:02:17.93,1:02:21.46,Default,On Stanford campus, you can\Nactually get it by using wi-fi.
Dialogue: 0,1:02:22.07,1:02:24.92,Default,It can look around, see what\Nwi-fi things are near you
Dialogue: 0,1:02:24.92,1:02:27.23,Default,and tell by that where you are.
Dialogue: 0,1:02:27.46,1:02:28.23,Default,Kind of scary, huh?
Dialogue: 0,1:02:28.79,1:02:29.60,Default,So it knows where you are.
Dialogue: 0,1:02:29.72,1:02:32.30,Default,And that works even if you're\Nindoors or whatever, so.
Dialogue: 0,1:02:32.74,1:02:36.69,Default,Now, it only works for public\Nwi-fi nodes, et cetera,
Dialogue: 0,1:02:36.69,1:02:38.87,Default,but at Stanford, these wi-fi\Nnodes are all well-known,
Dialogue: 0,1:02:38.87,1:02:40.95,Default,so it knows where you are.
Dialogue: 0,1:02:41.36,1:02:43.95,Default,And you specify this\Naccuracy using one
Dialogue: 0,1:02:43.95,1:02:48.45,Default,of this KCL location accuracy\Nconstants, and so there's best
Dialogue: 0,1:02:48.45,1:02:51.20,Default,for navigation, if you want that\Nkind of accuracy, that's going
Dialogue: 0,1:02:51.20,1:02:52.33,Default,to use your battery\Nbecause it's going
Dialogue: 0,1:02:52.33,1:02:54.08,Default,to be constantly doing GPS.
Dialogue: 0,1:02:54.25,1:02:56.39,Default,So that would be only if\Nyour phone was plugged in,
Dialogue: 0,1:02:56.39,1:02:57.74,Default,like you're in your\Ncar, and it's plugged
Dialogue: 0,1:02:57.74,1:02:59.66,Default,into the cigarette\Nlighter or whatever,
Dialogue: 0,1:03:00.06,1:03:03.23,Default,or I guess they have USB ports\Nnowadays in cars, but anyway,
Dialogue: 0,1:03:03.63,1:03:04.68,Default,you would want power there.
Dialogue: 0,1:03:04.98,1:03:07.66,Default,Then there's best, which\Nis also GPS, but not quite
Dialogue: 0,1:03:07.66,1:03:10.73,Default,as power hungry, and then\Nall the way down using wi-fi
Dialogue: 0,1:03:10.73,1:03:12.91,Default,and these other things to\Nless and less accuracy,
Dialogue: 0,1:03:13.22,1:03:16.04,Default,but how ever the location was\Nfound, it will also report
Dialogue: 0,1:03:16.04,1:03:17.94,Default,to you what accuracy it used.
Dialogue: 0,1:03:18.50,1:03:20.12,Default,Okay? Both in terms\Nof horizontally
Dialogue: 0,1:03:20.12,1:03:22.27,Default,and then altitude\Nwise, vertically.
Dialogue: 0,1:03:23.10,1:03:26.83,Default,Understand that accuracy\Nmeans power.
Dialogue: 0,1:03:27.31,1:03:28.53,Default,The more accuracy you ask for,
Dialogue: 0,1:03:28.53,1:03:30.46,Default,the more power you're\Ngoing to use.
Dialogue: 0,1:03:30.64,1:03:34.37,Default,So ask for the least accuracy\Nyour application can deal
Dialogue: 0,1:03:34.37,1:03:36.76,Default,with so that you use as\Nlittle power as possible.
Dialogue: 0,1:03:37.09,1:03:37.91,Default,Very important point.
Dialogue: 0,1:03:39.27,1:03:41.67,Default,Okay, some other properties\Nthere, I'm not really going
Dialogue: 0,1:03:41.67,1:03:43.04,Default,to talk about them, you\Nhave the slides for them.
Dialogue: 0,1:03:43.04,1:03:45.36,Default,Obvious things, speed\Nis calculated
Dialogue: 0,1:03:45.36,1:03:48.09,Default,by seeing all the points that\Nyou're moving through time,
Dialogue: 0,1:03:48.09,1:03:50.65,Default,and it can calculate your\Nspeed, things like that.
Dialogue: 0,1:03:51.16,1:03:53.96,Default,So how do you get one of\Nthese core location guys?
Dialogue: 0,1:03:54.20,1:03:56.65,Default,Okay? I want to get a\Ncore location object,
Dialogue: 0,1:03:56.65,1:03:57.86,Default,it says where I am right now.
Dialogue: 0,1:03:58.11,1:04:00.20,Default,And the answer is, you\Nuse this class called CL
Dialogue: 0,1:04:00.20,1:04:01.48,Default,location manager.
Dialogue: 0,1:04:01.86,1:04:04.39,Default,Okay? So you instantiate\Na core location manager,
Dialogue: 0,1:04:04.39,1:04:07.24,Default,CL location manager, and\Nyou're going to set some things
Dialogue: 0,1:04:07.24,1:04:08.86,Default,up about it, and then\Nyou're going to tell it
Dialogue: 0,1:04:08.86,1:04:12.84,Default,to start telling you where you\Nare, and it's got a delegate,
Dialogue: 0,1:04:12.84,1:04:14.49,Default,and it's going to start telling\Nthat delegate where you are.
Dialogue: 0,1:04:14.49,1:04:15.64,Default,So that's basically\Nhow it works.
Dialogue: 0,1:04:15.64,1:04:17.66,Default,Now, you can simulate\Nwhere you are,
Dialogue: 0,1:04:17.66,1:04:18.95,Default,by the way, in the debugger.
Dialogue: 0,1:04:19.22,1:04:22.98,Default,With this little thing\Ndown by the debug bar,
Dialogue: 0,1:04:23.24,1:04:25.59,Default,place where the pause and all\Nthat, you can just simulate
Dialogue: 0,1:04:25.59,1:04:28.37,Default,where you are, you can even\Nadd places that you are,
Dialogue: 0,1:04:28.37,1:04:31.14,Default,if you want to like have a\Nwhole series of locations
Dialogue: 0,1:04:31.14,1:04:33.41,Default,that you want to check\Nrunning through to see
Dialogue: 0,1:04:33.41,1:04:34.44,Default,if your application is working.
Dialogue: 0,1:04:34.44,1:04:37.68,Default,So this is a really cool way\Nto simulate being somewhere.
Dialogue: 0,1:04:39.00,1:04:40.76,Default,Alright, so CL location manager,
Dialogue: 0,1:04:40.76,1:04:43.17,Default,how do we use this thing\Nto get our location?
Dialogue: 0,1:04:43.47,1:04:46.54,Default,You create it, you check to\Nsee what hardware you have,
Dialogue: 0,1:04:46.54,1:04:51.95,Default,because every different device,\NiPhone 4, iPhone 5, iPads,
Dialogue: 0,1:04:52.10,1:04:55.49,Default,have different hardware in them\Nfor figuring out where they are,
Dialogue: 0,1:04:55.83,1:04:58.56,Default,and so you're going to check\Nto see what's available.
Dialogue: 0,1:04:58.82,1:05:02.16,Default,Then you're going to\Nadd, set this delegate
Dialogue: 0,1:05:02.29,1:05:04.41,Default,to be any object you want,\Nand then you're going
Dialogue: 0,1:05:04.41,1:05:06.70,Default,to configure it for what kind\Nof location updates you want,
Dialogue: 0,1:05:06.83,1:05:08.09,Default,accuracy, things like that,
Dialogue: 0,1:05:08.34,1:05:09.57,Default,and then you're going\Nto start it running.
Dialogue: 0,1:05:09.79,1:05:13.11,Default,And it's going to start\Nreporting to you where you are.
Dialogue: 0,1:05:13.67,1:05:16.54,Default,So what kinds of location\Nmonitoring are available?
Dialogue: 0,1:05:16.78,1:05:19.61,Default,There is accuracy\Nbased reporting, okay?
Dialogue: 0,1:05:19.61,1:05:22.96,Default,So you specify an accuracy\Nand it will tell you
Dialogue: 0,1:05:23.15,1:05:24.92,Default,to that accuracy where you are.
Dialogue: 0,1:05:25.30,1:05:28.26,Default,Okay? There's updates\Nthat you can get
Dialogue: 0,1:05:28.26,1:05:31.26,Default,where it will send you a message\Nonly when a significant change
Dialogue: 0,1:05:31.26,1:05:32.42,Default,in position has happened.
Dialogue: 0,1:05:32.92,1:05:36.90,Default,Okay? Imagine maybe it's using\Ncell towers or something there,
Dialogue: 0,1:05:36.90,1:05:39.26,Default,or if wi-fi is fired up for\Nother reasons, it might be able
Dialogue: 0,1:05:39.26,1:05:40.64,Default,to be using wi-fi, right?
Dialogue: 0,1:05:40.64,1:05:43.00,Default,But it's probably\Nnot going to use GPS.
Dialogue: 0,1:05:43.00,1:05:44.95,Default,Only when significant\Nchanges occur.
Dialogue: 0,1:05:45.43,1:05:47.09,Default,You also have region\Nbased updates.
Dialogue: 0,1:05:47.26,1:05:50.74,Default,Put a little circle around the\Ndry cleaners, when you walk by
Dialogue: 0,1:05:50.96,1:05:52.69,Default,or drive by, it will\Ntell you, "Oh,
Dialogue: 0,1:05:52.69,1:05:54.51,Default,you're by the dry\Ncleaner," okay?
Dialogue: 0,1:05:54.59,1:05:55.41,Default,So that's region.
Dialogue: 0,1:05:55.41,1:05:57.26,Default,So you can set up a little\Nregion, circular regions,
Dialogue: 0,1:05:57.26,1:05:58.45,Default,beacons, we'll talk about those.
Dialogue: 0,1:05:58.96,1:06:00.78,Default,And then you can also\Nmonitor your heading.
Dialogue: 0,1:06:01.60,1:06:03.62,Default,Okay? So which way am I walking?
Dialogue: 0,1:06:03.78,1:06:06.53,Default,Okay, so that might be using\Na compass, might be using GPS,
Dialogue: 0,1:06:06.53,1:06:08.84,Default,just depends on what\Nthe device has.
Dialogue: 0,1:06:08.95,1:06:10.70,Default,So the first thing I said was,
Dialogue: 0,1:06:10.88,1:06:12.25,Default,you've got to check\Nthe capabilities.
Dialogue: 0,1:06:12.25,1:06:13.81,Default,So here's a whole bunch of\Nmethods, I'm not going to go
Dialogue: 0,1:06:13.81,1:06:14.92,Default,through them for time reasons,
Dialogue: 0,1:06:15.26,1:06:17.05,Default,but you need to check\Nthese, okay?
Dialogue: 0,1:06:17.29,1:06:20.67,Default,Because, for example, the user\Nmight have turned off location
Dialogue: 0,1:06:20.67,1:06:21.55,Default,services for you.
Dialogue: 0,1:06:22.04,1:06:24.15,Default,Okay? So you've got to know,\Nyou've got to deal with that,
Dialogue: 0,1:06:24.15,1:06:25.84,Default,either ask them to\Nturn it back on, okay,
Dialogue: 0,1:06:25.84,1:06:29.33,Default,there's this restricted\Nthing for this too.
Dialogue: 0,1:06:29.33,1:06:31.68,Default,Or whatever you want to do,\Nor do some different thing
Dialogue: 0,1:06:31.68,1:06:34.09,Default,in your app, if you work with\Nall those location updates
Dialogue: 0,1:06:34.09,1:06:35.80,Default,or whatever, you\Nmight be on a device
Dialogue: 0,1:06:35.80,1:06:38.01,Default,that doesn't have the hardware\Nyou need to do what you want,
Dialogue: 0,1:06:38.01,1:06:39.73,Default,so you need to all\Ncheck all this
Dialogue: 0,1:06:39.87,1:06:42.71,Default,when you first create\Nyour location manager.
Dialogue: 0,1:06:42.89,1:06:47.33,Default,So then getting it, you\Ncan ask a location manager,
Dialogue: 0,1:06:47.40,1:06:48.36,Default,"where am I right now?"
Dialogue: 0,1:06:48.87,1:06:49.87,Default,Okay? Kind of poll it?
Dialogue: 0,1:06:50.29,1:06:51.08,Default,We never do that.
Dialogue: 0,1:06:51.34,1:06:52.29,Default,We use this delegate thing.
Dialogue: 0,1:06:52.29,1:06:53.72,Default,So let's talk about how\Nthe delegate thing works.
Dialogue: 0,1:06:53.75,1:06:55.91,Default,First, you specify the accuracy.
Dialogue: 0,1:06:56.04,1:07:00.33,Default,Okay? This is location manager\Nproperty, desired accuracy,
Dialogue: 0,1:07:00.33,1:07:01.81,Default,I showed you the\Naccuracies before.
Dialogue: 0,1:07:01.81,1:07:02.73,Default,Specify that.
Dialogue: 0,1:07:02.97,1:07:05.22,Default,And also you can specify a\Ndistance filter, in other words,
Dialogue: 0,1:07:05.43,1:07:09.09,Default,until the user moves at least\Nthis far, don't even tell me.
Dialogue: 0,1:07:09.62,1:07:11.72,Default,Okay? So if they don't\Ngo at least 100 meters,
Dialogue: 0,1:07:11.72,1:07:15.02,Default,or a kilometer, don't\Ntell me about it,
Dialogue: 0,1:07:15.02,1:07:16.26,Default,so that saves battery too.
Dialogue: 0,1:07:16.59,1:07:18.86,Default,The chip, the GPS\Nchip in these devices,
Dialogue: 0,1:07:18.86,1:07:20.74,Default,especially newer\Nones, really awesome.
Dialogue: 0,1:07:21.03,1:07:23.58,Default,A lot of this stuff that\Nyou specify here gets loaded
Dialogue: 0,1:07:23.58,1:07:26.61,Default,into the chip, and the chip\Nby itself is calculating
Dialogue: 0,1:07:26.61,1:07:28.56,Default,where you are and whether\Nyou went far enough and all
Dialogue: 0,1:07:28.56,1:07:30.28,Default,that stuff, and then\Nwaking the phone back up.
Dialogue: 0,1:07:30.28,1:07:33.69,Default,The whole phone can sleep and\Nthe GPS is still watching,
Dialogue: 0,1:07:33.69,1:07:36.70,Default,and so if you can tune these\Nto be as minimal as possible,
Dialogue: 0,1:07:36.70,1:07:39.68,Default,you will save a ton of battery\Nin the device, because only
Dialogue: 0,1:07:39.68,1:07:44.44,Default,that GPS chip will be watching,\Nyou know, what's going on.
Dialogue: 0,1:07:44.44,1:07:46.97,Default,Okay so then you start\Ngetting the updates
Dialogue: 0,1:07:46.97,1:07:48.99,Default,by just calling start\Nupdating location,
Dialogue: 0,1:07:48.99,1:07:51.94,Default,and your delegate will start\Ngetting sent messages based
Dialogue: 0,1:07:51.94,1:07:53.91,Default,on the accuracy and the filter
Dialogue: 0,1:07:53.91,1:07:55.63,Default,that you specify\Nfor distance, okay?
Dialogue: 0,1:07:56.36,1:07:58.56,Default,What does that delegate\Nmethod look like?
Dialogue: 0,1:07:58.67,1:08:00.76,Default,Location manager did\Nupdate to location
Dialogue: 0,1:08:00.76,1:08:02.46,Default,from location, is\None of the ones.
Dialogue: 0,1:08:02.46,1:08:04.38,Default,There's actually some other\Nones that you could get sent,
Dialogue: 0,1:08:04.38,1:08:06.22,Default,so you want to check the\Ndocumentation on this one,
Dialogue: 0,1:08:06.79,1:08:09.45,Default,but this is the basic one,\Nwhere it's saying "Okay,
Dialogue: 0,1:08:09.45,1:08:12.71,Default,I got a new location,\Nhere it is," that location
Dialogue: 0,1:08:12.71,1:08:15.03,Default,of course will have\Naccuracy and time stamp,
Dialogue: 0,1:08:15.03,1:08:16.20,Default,all these other things in there,
Dialogue: 0,1:08:16.60,1:08:19.55,Default,and it just gives you\Nthe fun location just
Dialogue: 0,1:08:19.71,1:08:21.62,Default,for your own convenience,\Nso you don't have to keep it
Dialogue: 0,1:08:21.62,1:08:24.33,Default,if you just want to see\Nthe difference, okay?
Dialogue: 0,1:08:24.89,1:08:25.35,Default,So that's it.
Dialogue: 0,1:08:25.35,1:08:27.98,Default,It's quite simple, actually\Nto use this location manager.
Dialogue: 0,1:08:27.98,1:08:30.33,Default,It's also quite simple to\Ndrain the user's battery
Dialogue: 0,1:08:30.33,1:08:33.08,Default,in about an hour,\Nokay, so be careful
Dialogue: 0,1:08:33.08,1:08:33.97,Default,and know what you're doing here.
Dialogue: 0,1:08:34.27,1:08:36.00,Default,There's a similar\NAPI for heading,
Dialogue: 0,1:08:36.20,1:08:38.60,Default,for tracking the heading.
Dialogue: 0,1:08:38.71,1:08:41.18,Default,The delegate can report\Nerrors, and this is one case.
Dialogue: 0,1:08:41.18,1:08:43.72,Default,A lot of times you see me\Nin my demos, I just say nil
Dialogue: 0,1:08:43.72,1:08:46.06,Default,for the NS error,\Nand I ignore errors,
Dialogue: 0,1:08:46.22,1:08:48.67,Default,and sometimes that's okay, like\Nif I'm doing a Flickr fetch
Dialogue: 0,1:08:48.67,1:08:50.63,Default,and if it fails, I just don't\Ncare because I know I'm going
Dialogue: 0,1:08:50.63,1:08:52.73,Default,to be doing another\Nfetch in 20 minutes,
Dialogue: 0,1:08:52.73,1:08:55.19,Default,so I'll just let it fail,\Nalthough even there,
Dialogue: 0,1:08:55.19,1:08:57.26,Default,I probably want to check it,\Nand if it keeps failing over
Dialogue: 0,1:08:57.26,1:09:00.14,Default,and over, then I need to maybe\Nget the user involved, okay?
Dialogue: 0,1:09:00.44,1:09:02.10,Default,But here, you really\Nwant to check the errors.
Dialogue: 0,1:09:02.26,1:09:04.86,Default,Okay, and again for time\Nreasons, I don't have time to go
Dialogue: 0,1:09:04.86,1:09:06.00,Default,through the details\Nmore than just
Dialogue: 0,1:09:06.00,1:09:07.21,Default,that these errors can occur,
Dialogue: 0,1:09:07.53,1:09:10.04,Default,but there are certain things\Nyou need to do in certain errors
Dialogue: 0,1:09:10.04,1:09:15.26,Default,if you really want to be a\Ngood core location getting app.
Dialogue: 0,1:09:16.05,1:09:18.70,Default,Um, background, can you\Nget these location updates
Dialogue: 0,1:09:18.70,1:09:19.31,Default,in the background?
Dialogue: 0,1:09:19.31,1:09:21.23,Default,Okay, I promised I was\Ngoing to talk about this,
Dialogue: 0,1:09:21.23,1:09:22.26,Default,and I even have a\Nslide about it.
Dialogue: 0,1:09:22.26,1:09:24.15,Default,And the answer is, you can.
Dialogue: 0,1:09:24.42,1:09:27.67,Default,Okay? You can even sign\Nup to be the kind of app
Dialogue: 0,1:09:27.67,1:09:31.18,Default,that gets the location\Nmanager will just run
Dialogue: 0,1:09:31.18,1:09:33.64,Default,in the background\Nnormally, okay?
Dialogue: 0,1:09:33.98,1:09:35.39,Default,It's the same place,\Nremember when we went
Dialogue: 0,1:09:35.39,1:09:37.26,Default,and did the background\Nfetches, we had to go
Dialogue: 0,1:09:37.26,1:09:39.34,Default,to our project settings,\Nand we clicked that switch?
Dialogue: 0,1:09:39.60,1:09:41.54,Default,There's another switch\Nthere that's just location,
Dialogue: 0,1:09:41.92,1:09:44.07,Default,and when you do that, you'll\Nstart getting this, okay?
Dialogue: 0,1:09:44.49,1:09:48.54,Default,But that's really for apps\Nlike, you know, a fitness app
Dialogue: 0,1:09:48.67,1:09:51.33,Default,where you're going off to do\Na mile run and your phone is
Dialogue: 0,1:09:51.33,1:09:53.95,Default,in the pocket and it's\Ntracking your progress,
Dialogue: 0,1:09:53.95,1:09:57.89,Default,and you've tuned it to,\Nyou know, coalesce things
Dialogue: 0,1:09:57.89,1:10:00.31,Default,and to keep track of it\Nand report it to you.
Dialogue: 0,1:10:00.31,1:10:01.85,Default,You know, when you\Ndo a fitness app,
Dialogue: 0,1:10:01.85,1:10:03.32,Default,you can really drain\Nthe battery fast.
Dialogue: 0,1:10:03.32,1:10:06.12,Default,So if you're doing a fitness\Napp, by the way, which don't do
Dialogue: 0,1:10:06.12,1:10:07.83,Default,that for your final\Nproject, but,
Dialogue: 0,1:10:07.83,1:10:11.94,Default,if you're doing a fitness\Napp, for the real, for real,
Dialogue: 0,1:10:12.09,1:10:13.39,Default,then you really got to\Nknow what you're doing.
Dialogue: 0,1:10:13.51,1:10:15.25,Default,So really investigate that\Nbecause you really want
Dialogue: 0,1:10:15.25,1:10:17.92,Default,to be low power, but you can\Nstill do lots of cool things
Dialogue: 0,1:10:17.92,1:10:19.60,Default,when it comes to tracking\Nwhere the user's running.
Dialogue: 0,1:10:20.95,1:10:23.54,Default,However, running in the\Nbackground like that,
Dialogue: 0,1:10:24.05,1:10:26.86,Default,since it uses a lot of battery,\Nis generally only for very,
Dialogue: 0,1:10:26.86,1:10:28.83,Default,very, very, very\Nsmall number of apps.
Dialogue: 0,1:10:29.29,1:10:31.87,Default,But there are two ways to\Nget background notifications
Dialogue: 0,1:10:31.87,1:10:35.41,Default,about where you are, okay,\Nthat are very low power,
Dialogue: 0,1:10:35.71,1:10:38.05,Default,and they're a little coarser\Ngranularity, they're not going
Dialogue: 0,1:10:38.05,1:10:40.55,Default,to be running down the trail\Ntelling me exactly where I went
Dialogue: 0,1:10:40.55,1:10:43.14,Default,on the trail, but they\Nare telling you kind
Dialogue: 0,1:10:43.14,1:10:46.13,Default,of where you are and are really\Nuseful for a lot of apps.
Dialogue: 0,1:10:46.13,1:10:48.24,Default,So let's talk about the two\Nways that you can get notified
Dialogue: 0,1:10:48.29,1:10:50.63,Default,in the background and\Nin the foreground, okay?
Dialogue: 0,1:10:50.63,1:10:53.16,Default,If you can get notified in the\Nbackground, then you're going
Dialogue: 0,1:10:53.16,1:10:55.44,Default,to get notified in the\Nforeground automatically.
Dialogue: 0,1:10:55.60,1:10:57.12,Default,Here's a way that background
Dialogue: 0,1:10:57.12,1:10:58.34,Default,and foreground, you\Ncan get notified.
Dialogue: 0,1:10:58.34,1:11:01.98,Default,Okay? The first one is called\Nsignificant location change
Dialogue: 0,1:11:01.98,1:11:05.13,Default,monitoring, and you just\Nget a CL location manager
Dialogue: 0,1:11:05.13,1:11:08.18,Default,and you can say start monitoring\Nsignificant location changes,
Dialogue: 0,1:11:08.49,1:11:11.82,Default,and then when the user moves a\Nsignificant amount of distance,
Dialogue: 0,1:11:12.01,1:11:14.01,Default,you will get notified\Nvia your delegate.
Dialogue: 0,1:11:14.95,1:11:16.37,Default,Okay? It's as simple as that.
Dialogue: 0,1:11:16.73,1:11:18.61,Default,And this works even if\Nyou're in the background.
Dialogue: 0,1:11:19.16,1:11:21.38,Default,Even if your application\Nis not running.
Dialogue: 0,1:11:22.29,1:11:24.80,Default,You will get launched to be told
Dialogue: 0,1:11:25.22,1:11:27.03,Default,that the person moved\Nto a new space.
Dialogue: 0,1:11:27.48,1:11:31.04,Default,Okay? This is an awesome API,\Nokay, very power efficient
Dialogue: 0,1:11:31.25,1:11:33.99,Default,because it knows how to\Nmanage tracking where you are
Dialogue: 0,1:11:33.99,1:11:37.15,Default,in an efficient way and\Nstill super useful for you.
Dialogue: 0,1:11:37.15,1:11:40.46,Default,The only downside of it is\Nsignificant distance, right?
Dialogue: 0,1:11:40.46,1:11:41.71,Default,You have to be going\Nsignificant distance.
Dialogue: 0,1:11:41.71,1:11:41.93,Default,Question?
Dialogue: 0,1:11:42.28,1:11:43.99,Default,>> Do we have any control\Nover the definition
Dialogue: 0,1:11:43.99,1:11:44.81,Default,of significant distance?
Dialogue: 0,1:11:44.81,1:11:46.76,Default,>> The question is do we have\Nany control of the definition
Dialogue: 0,1:11:46.76,1:11:49.92,Default,of significant, the\Nanswer is no.
Dialogue: 0,1:11:50.25,1:11:52.36,Default,So yeah, so when you get\Nlaunched in the background,
Dialogue: 0,1:11:52.36,1:11:53.92,Default,if you get launched,\Nlike you're not running,
Dialogue: 0,1:11:53.98,1:11:56.25,Default,your application\Ndid finish launching
Dialogue: 0,1:11:56.25,1:11:57.89,Default,with options thing will be sent,
Dialogue: 0,1:11:58.27,1:12:00.37,Default,but there will be a dictionary\Nthere, and one of the things
Dialogue: 0,1:12:00.37,1:12:02.67,Default,in the dictionary will be UI\Napplication launch options
Dialogue: 0,1:12:02.67,1:12:04.95,Default,location key, and if\Nthat key is in there,
Dialogue: 0,1:12:05.19,1:12:06.64,Default,that means you got launched
Dialogue: 0,1:12:06.64,1:12:09.06,Default,because a significant\Nchange happened,
Dialogue: 0,1:12:09.06,1:12:10.60,Default,so that's how you know, "Oh,
Dialogue: 0,1:12:10.60,1:12:12.02,Default,that's why I got\Nlaunched," okay?
Dialogue: 0,1:12:12.02,1:12:12.76,Default,Because of that key.
Dialogue: 0,1:12:13.52,1:12:15.48,Default,Okay? Another way to find
Dialogue: 0,1:12:15.48,1:12:19.15,Default,out in the background\Nis region based launch,
Dialogue: 0,1:12:19.15,1:12:22.40,Default,region based monitoring,\Nvery similar,
Dialogue: 0,1:12:22.40,1:12:25.84,Default,except for here you actually\Nspecify either a circular region
Dialogue: 0,1:12:26.08,1:12:28.82,Default,or you can also specify\Na beacon, okay?
Dialogue: 0,1:12:28.82,1:12:30.11,Default,And I'll talk about\Nthat in a second.
Dialogue: 0,1:12:30.36,1:12:33.13,Default,So you specify circular region\Non the planet, you know,
Dialogue: 0,1:12:33.13,1:12:36.25,Default,coordinate, and then a radius\Naround it, and if the user goes
Dialogue: 0,1:12:36.25,1:12:38.89,Default,into that region,\Nyou'll get notified,
Dialogue: 0,1:12:38.89,1:12:41.40,Default,your delegate will send a\Nmessage, or you'll get launched
Dialogue: 0,1:12:41.52,1:12:43.52,Default,if necessary, and\Nyou'll find out.
Dialogue: 0,1:12:44.03,1:12:46.02,Default,Now, yes, there's a limit to\Nhow many of these you can have,
Dialogue: 0,1:12:46.02,1:12:49.97,Default,I don't know what it is, 40 or\Nsomething like that, your app,
Dialogue: 0,1:12:49.97,1:12:52.56,Default,and but this is also\Nincredibly efficient.
Dialogue: 0,1:12:52.65,1:12:54.41,Default,So this is happening\Nat a very lower,
Dialogue: 0,1:12:54.41,1:12:55.95,Default,power-efficient level as well.
Dialogue: 0,1:12:56.60,1:13:01.62,Default,Okay? The circular region\Nis obvious to create,
Dialogue: 0,1:13:01.62,1:13:03.11,Default,you just create a\NCL circular region.
Dialogue: 0,1:13:03.36,1:13:05.41,Default,The beacon is a little\Nmore interesting,
Dialogue: 0,1:13:05.41,1:13:07.65,Default,and I don't really have time\Nto talk about the beacon,
Dialogue: 0,1:13:07.86,1:13:10.58,Default,but a beacon is basically\Nnot a place on earth,
Dialogue: 0,1:13:10.95,1:13:12.56,Default,but it's another device.
Dialogue: 0,1:13:13.46,1:13:15.14,Default,It's possible to\Nwrite an application
Dialogue: 0,1:13:15.33,1:13:17.03,Default,that essentially is a beacon,
Dialogue: 0,1:13:17.53,1:13:19.44,Default,and it's broadcasting\Nall the time,
Dialogue: 0,1:13:19.44,1:13:23.53,Default,and if your app comes close to\Nit, you'll get woken up and told
Dialogue: 0,1:13:23.53,1:13:26.42,Default,that you went into the region\Nof that broadcasting device.
Dialogue: 0,1:13:26.42,1:13:28.44,Default,This is new for iOS\N7, incredible.
Dialogue: 0,1:13:28.48,1:13:30.03,Default,Okay, I'm really interested\Nto see what people come
Dialogue: 0,1:13:30.03,1:13:31.62,Default,up with this technology.
Dialogue: 0,1:13:31.88,1:13:35.71,Default,Becoming a beacon\Nis, here, by the way,
Dialogue: 0,1:13:35.81,1:13:39.47,Default,is the delegate method\Nyou get, did enter region
Dialogue: 0,1:13:39.47,1:13:42.97,Default,and did exit region,\Nand you'll get launched.
Dialogue: 0,1:13:43.15,1:13:47.11,Default,Okay? The beacon is becoming a--
Dialogue: 0,1:13:47.11,1:13:49.77,Default,sorry, I'm fast forwarding\Nhere--
Dialogue: 0,1:13:50.18,1:13:52.86,Default,uh, yeah, regions are tracked by\Nname, that's because they have
Dialogue: 0,1:13:52.89,1:13:55.26,Default,to exist when you're\Nnot launching,
Dialogue: 0,1:13:55.26,1:13:58.05,Default,there are maximum\Nmonitoring distances.
Dialogue: 0,1:13:58.39,1:13:59.44,Default,Uh, okay so beacons.
Dialogue: 0,1:13:59.70,1:14:04.62,Default,To become a beacon, you need to\Nuse the core bluetooth library,
Dialogue: 0,1:14:04.62,1:14:08.43,Default,it's not part of CL\Ncore location library.
Dialogue: 0,1:14:08.43,1:14:12.54,Default,So you want to look up CB, core\Nbluetooth, peripheral manager,
Dialogue: 0,1:14:12.82,1:14:14.93,Default,and find out if you\Nwant to become a beacon.
Dialogue: 0,1:14:15.12,1:14:17.38,Default,Like you want to be the\Nbeacon, not detect a beacon,
Dialogue: 0,1:14:17.38,1:14:19.21,Default,but if you want to detect\Na beacon, you use this.
Dialogue: 0,1:14:19.21,1:14:23.09,Default,You create a region, which is a\Nbeacon region, CL beacon region,
Dialogue: 0,1:14:23.48,1:14:27.59,Default,and you specify it's special\Nidentifier that identifies
Dialogue: 0,1:14:27.59,1:14:29.78,Default,that beacon, and it just\Ntells you when you get close,
Dialogue: 0,1:14:29.78,1:14:32.50,Default,it will even tell you how close\Nyou are to the beacon, okay?
Dialogue: 0,1:14:32.50,1:14:36.69,Default,Are you near it, or far, or\Nright on top of it, okay?
Dialogue: 0,1:14:36.81,1:14:37.95,Default,So it's pretty darn cool.
Dialogue: 0,1:14:38.10,1:14:39.09,Default,So that's regions.
Dialogue: 0,1:14:39.09,1:14:39.91,Default,Region monitoring.
Dialogue: 0,1:14:39.91,1:14:43.05,Default,So both region and significant\Nchanges will notify you
Dialogue: 0,1:14:43.05,1:14:43.59,Default,in the background.
Dialogue: 0,1:14:44.14,1:14:46.31,Default,So map kit, I'm going\Nto talk about next time.
Dialogue: 0,1:14:46.62,1:14:48.78,Default,And it is basically\Na user interface
Dialogue: 0,1:14:49.17,1:14:52.78,Default,for putting these beautiful\Nmaps, but obviously we needed
Dialogue: 0,1:14:52.78,1:14:55.43,Default,that core location stuff to\Nknow about how to find out about
Dialogue: 0,1:14:55.43,1:14:57.99,Default,where we are, and where things\Nare, and stuff like that.
Dialogue: 0,1:14:58.24,1:15:00.71,Default,So we'll pick that\Nup on Wednesday,
Dialogue: 0,1:15:01.07,1:15:02.84,Default,and I will see you then.
