[Script Info]
ScriptType: v4.00+

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, AlphaLevel, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,1,1,0,2,10,10,10,0,0

[Events]
Format: Layer, Start, End, Style, Text
Dialogue: 0,0:00:00.51,0:00:04.83,Default,[ Music ]
Dialogue: 0,0:00:05.33,0:00:06.42,Default,>> Stanford University.
Dialogue: 0,0:00:09.07,0:00:10.88,Default,>> Okay. Well, welcome\Nto lecture 15
Dialogue: 0,0:00:10.88,0:00:14.57,Default,of CS193p for fall of 2013/14.
Dialogue: 0,0:00:15.06,0:00:18.24,Default,And our primary topic today\Nis going to be the map kit,
Dialogue: 0,0:00:18.32,0:00:22.02,Default,which is kind of the UI on\Nwhat we talked about on Monday.
Dialogue: 0,0:00:22.02,0:00:24.80,Default,As part of that, though,\Nespecially in the demonstration
Dialogue: 0,0:00:24.80,0:00:26.95,Default,that I do, I'm going to show\Nyou two things about SegwayÃs
Dialogue: 0,0:00:26.95,0:00:27.76,Default,that are pretty important.
Dialogue: 0,0:00:27.76,0:00:30.59,Default,One is how to fire\Noff a segue from code.
Dialogue: 0,0:00:30.87,0:00:32.90,Default,So far all the time that\Nwe've made a segue go,
Dialogue: 0,0:00:32.90,0:00:35.60,Default,we just control, dragged from\Nsomething in a storyboard
Dialogue: 0,0:00:35.60,0:00:37.77,Default,to another storyboard, and then\Nwe clicked on that something.
Dialogue: 0,0:00:38.11,0:00:40.52,Default,It would segue, so now\Nwe're going to able
Dialogue: 0,0:00:40.52,0:00:42.21,Default,to fire off a segue\Nfrom in code.
Dialogue: 0,0:00:42.21,0:00:44.83,Default,And then I'm also going to teach\Nyou a new kind of segue today,
Dialogue: 0,0:00:44.83,0:00:48.30,Default,which is the embed segue, and\NI'm going to demo that, as well,
Dialogue: 0,0:00:48.48,0:00:51.22,Default,in a big demo that shows you all\Nthe map stuff and manual segue
Dialogue: 0,0:00:51.22,0:00:53.17,Default,and the embedded segue.
Dialogue: 0,0:00:53.50,0:00:58.44,Default,Okay? So that's what's\Non tap for today.
Dialogue: 0,0:00:58.62,0:00:59.94,Default,And, [pause], so, map kit.
Dialogue: 0,0:00:59.94,0:01:01.09,Default,So what is map kit?
Dialogue: 0,0:01:01.09,0:01:05.91,Default,Map kit is basically user\Ninterface for locations
Dialogue: 0,0:01:05.91,0:01:11.43,Default,and its primary class is this\NUI view, called an MK map view.
Dialogue: 0,0:01:11.43,0:01:13.96,Default,The whole map view stuff is\Nin a different framework,
Dialogue: 0,0:01:13.96,0:01:15.06,Default,called a map kit framework.
Dialogue: 0,0:01:15.44,0:01:17.55,Default,When you want to use the\Nmap kit framework you have
Dialogue: 0,0:01:17.59,0:01:20.25,Default,to actually explicitly go\Ninto your project settings
Dialogue: 0,0:01:20.25,0:01:21.58,Default,and set it to be linked.
Dialogue: 0,0:01:22.09,0:01:25.57,Default,Otherwise, all these classes\Nlike MK map view won't be there,
Dialogue: 0,0:01:25.65,0:01:28.62,Default,and I'm going to show that\Nin the demo, how you do that.
Dialogue: 0,0:01:28.95,0:01:33.46,Default,So, inside of the map view, you\Nhave these little pins, okay?
Dialogue: 0,0:01:33.46,0:01:34.92,Default,They look a little\Nred pin there,
Dialogue: 0,0:01:34.92,0:01:35.94,Default,they can be different colors.
Dialogue: 0,0:01:35.94,0:01:40.66,Default,These are called\Nannotation views, okay?
Dialogue: 0,0:01:40.98,0:01:43.07,Default,So every annotation\Nview in there, and you,
Dialogue: 0,0:01:43.07,0:01:45.47,Default,you can customize this, you\Ncan subclass annotation view
Dialogue: 0,0:01:45.47,0:01:47.29,Default,to make it not look\Nlike a pin if you want.
Dialogue: 0,0:01:47.81,0:01:50.99,Default,But these annotation\Nviews are responsible
Dialogue: 0,0:01:51.22,0:01:56.20,Default,for showing some place in the\Nworld, and they have a pin,
Dialogue: 0,0:01:56.20,0:01:58.15,Default,but then they also have this\Nlittle call out, if you click
Dialogue: 0,0:01:58.15,0:02:00.09,Default,on them, you see that little\Nwhite bar right there?
Dialogue: 0,0:02:00.82,0:02:04.36,Default,And that call out can be\Ncustomized, a little bit.
Dialogue: 0,0:02:04.67,0:02:07.43,Default,The title that's in it and\Nit can have a little subtitle
Dialogue: 0,0:02:07.67,0:02:10.49,Default,and also it can have left\Nand right accessory views,
Dialogue: 0,0:02:10.49,0:02:13.22,Default,so this one has a left accessory\Nview, which is an image view,
Dialogue: 0,0:02:13.41,0:02:16.31,Default,and there's a right accessory\Nview which is a little button
Dialogue: 0,0:02:16.31,0:02:17.14,Default,that you can click on.
Dialogue: 0,0:02:17.14,0:02:18.84,Default,So in our demo we're\Ngoing to do all of this.
Dialogue: 0,0:02:19.01,0:02:20.31,Default,Okay? And we're going\Nto cover all
Dialogue: 0,0:02:20.31,0:02:23.49,Default,of these various\Nparts, what's going on.
Dialogue: 0,0:02:24.15,0:02:26.67,Default,But the main thing to understand\Nis how you create a map view
Dialogue: 0,0:02:26.67,0:02:28.90,Default,and how you put these things\Non the map, so map view,
Dialogue: 0,0:02:28.90,0:02:35.03,Default,just alloc init, or more often\Nwe drag it out, from the palate,
Dialogue: 0,0:02:35.03,0:02:38.15,Default,in Xcode, and the, the\Nway we put the pins
Dialogue: 0,0:02:38.15,0:02:42.35,Default,on there is we add these things\Ncalled annotations, okay?
Dialogue: 0,0:02:42.52,0:02:46.09,Default,So an annotation is\Nreally just an ID,
Dialogue: 0,0:02:46.23,0:02:47.68,Default,the response to this protocol.
Dialogue: 0,0:02:47.90,0:02:50.08,Default,See this MK annotation\Nprotocol up here.
Dialogue: 0,0:02:50.08,0:02:54.78,Default,So any object in your entire\Napplication that responds
Dialogue: 0,0:02:54.78,0:02:57.88,Default,to this protocol can just be\Ndropped onto the map view.
Dialogue: 0,0:02:58.36,0:02:59.81,Default,Okay? So what's in\Nthis protocol?
Dialogue: 0,0:03:00.08,0:03:02.64,Default,Very simple, it's got a couple\Noptional methods, the title
Dialogue: 0,0:03:02.64,0:03:05.20,Default,and subtitle, so in that little\Nwhite call out that we saw,
Dialogue: 0,0:03:05.20,0:03:06.77,Default,that's going to be the\Ntitle and subtitle there.
Dialogue: 0,0:03:06.77,0:03:10.69,Default,And then it's got a very\Nimportant required property,
Dialogue: 0,0:03:10.69,0:03:12.17,Default,which is the coordinate.
Dialogue: 0,0:03:12.17,0:03:14.38,Default,So the coordinate is just\Nthe latitude and longitude,
Dialogue: 0,0:03:14.59,0:03:18.06,Default,as specified by this CL\Nlocation coordinate, C struct.
Dialogue: 0,0:03:18.49,0:03:21.51,Default,And so any object\Nthat can answer these,
Dialogue: 0,0:03:21.77,0:03:23.66,Default,really just this one\Nquestion of the coordinate,
Dialogue: 0,0:03:24.00,0:03:29.17,Default,but usually we want title\Nand subtitle 2, can be thrown
Dialogue: 0,0:03:29.17,0:03:31.76,Default,on a map, and, for example, in\Nthe demo that we're going to do,
Dialogue: 0,0:03:31.76,0:03:33.44,Default,we're going to extend\Nphoto mania.
Dialogue: 0,0:03:33.47,0:03:35.43,Default,I'm just going to throw\Nphoto objects in there.
Dialogue: 0,0:03:35.52,0:03:38.20,Default,In fact, photo objects already\Nimplement title and subtitle,
Dialogue: 0,0:03:38.47,0:03:40.97,Default,so all we really need to do is\Nmake a photo object be an MK
Dialogue: 0,0:03:40.97,0:03:43.11,Default,annotation and respond\Nto that protocol,
Dialogue: 0,0:03:43.38,0:03:45.16,Default,is to implement the\Nrequired coordinate method
Dialogue: 0,0:03:45.16,0:03:45.91,Default,and that's what we're\Ngoing to do
Dialogue: 0,0:03:45.91,0:03:47.34,Default,and then we can just\Nthrow photos on the map.
Dialogue: 0,0:03:47.67,0:03:50.85,Default,We don't have to make any other\Nspecial classes or anything,
Dialogue: 0,0:03:50.85,0:03:54.26,Default,just throw the photos\Nthemselves up there.
Dialogue: 0,0:03:54.63,0:03:56.94,Default,When you're setting the\Nannotations, this property,
Dialogue: 0,0:03:56.94,0:04:00.78,Default,there's a property on MK map\Nview which is an NS array
Dialogue: 0,0:04:00.78,0:04:02.62,Default,of annotations, that's\Nall the annotations
Dialogue: 0,0:04:02.62,0:04:05.55,Default,that the map view is showing,\Nbut that's read only properties,
Dialogue: 0,0:04:05.55,0:04:06.87,Default,so you can't set\Nthe array that way,
Dialogue: 0,0:04:06.87,0:04:09.41,Default,you have to use these\Nadd annotation methods
Dialogue: 0,0:04:09.41,0:04:11.65,Default,or add annotations, and\Nsame thing removing them.
Dialogue: 0,0:04:11.65,0:04:13.50,Default,So you add and remove\Nthem with these methods,
Dialogue: 0,0:04:13.94,0:04:17.08,Default,you don't manipulate\Nthat array directly.
Dialogue: 0,0:04:17.17,0:04:20.06,Default,It's a pretty good\Nidea, if you can,
Dialogue: 0,0:04:20.06,0:04:23.24,Default,if you have the information,\Nto add all of your annotations
Dialogue: 0,0:04:23.24,0:04:24.66,Default,up front to the map view.
Dialogue: 0,0:04:24.96,0:04:27.97,Default,Adding an annotation is\Nactually pretty low overhead,
Dialogue: 0,0:04:27.97,0:04:30.63,Default,especially if that annotation\Nis not on screen currently.
Dialogue: 0,0:04:30.97,0:04:33.67,Default,And that's because those MK\Nannotation views, the little pin
Dialogue: 0,0:04:33.67,0:04:36.55,Default,that does the call out,\Nthose things are reused
Dialogue: 0,0:04:36.55,0:04:37.94,Default,like a table views rows.
Dialogue: 0,0:04:38.45,0:04:42.22,Default,Okay? So if you have hundreds\Nof annotations, but only five
Dialogue: 0,0:04:42.22,0:04:44.01,Default,of them are on the screen,\Nyou're only going to create 5
Dialogue: 0,0:04:44.01,0:04:47.27,Default,of those MK annotation views,\Nand as you kind of move
Dialogue: 0,0:04:47.27,0:04:49.47,Default,around in the world\Nand they go off-screen,
Dialogue: 0,0:04:49.47,0:04:51.11,Default,they'll get reused for new ones.
Dialogue: 0,0:04:51.33,0:04:55.67,Default,Okay? So letting the map view\Nall the annotations up front,
Dialogue: 0,0:04:55.67,0:04:59.07,Default,it's nice to help it manage\Nits internal performance,
Dialogue: 0,0:04:59.07,0:04:59.84,Default,or whatever.
Dialogue: 0,0:04:59.84,0:05:02.21,Default,So it's generally recommended,\Nbut you don't always know,
Dialogue: 0,0:05:02.21,0:05:04.28,Default,sometimes you don't know all\Nthe annotations up front,
Dialogue: 0,0:05:04.28,0:05:06.47,Default,it's happening in real\Ntime or something.
Dialogue: 0,0:05:07.88,0:05:10.97,Default,So, [pause] what do\Nannotations look like?
Dialogue: 0,0:05:11.16,0:05:14.18,Default,They generally look like a pin,\Nbut there's a lot of methods
Dialogue: 0,0:05:14.18,0:05:16.22,Default,that you can call in\NMK annotation view
Dialogue: 0,0:05:16.22,0:05:18.21,Default,and you can also subclass\NMK annotation view
Dialogue: 0,0:05:18.21,0:05:21.21,Default,to draw something different\Nin a pin, and this call
Dialogue: 0,0:05:21.21,0:05:24.39,Default,out is a little more difficult\Nto subclass and make different.
Dialogue: 0,0:05:24.77,0:05:28.85,Default,So if you can get by with just\Ndoing this left and right call
Dialogue: 0,0:05:28.85,0:05:31.98,Default,out business, then that's\Ngood because that's easy.
Dialogue: 0,0:05:32.27,0:05:35.21,Default,If you want to do more, then\Nit's kind of beyond the scope
Dialogue: 0,0:05:35.21,0:05:36.35,Default,of this class and\Nyou're going to have
Dialogue: 0,0:05:36.40,0:05:37.39,Default,to do some searching around.
Dialogue: 0,0:05:37.39,0:05:40.63,Default,It's doable, but doing something\Ndifferent than that basic call
Dialogue: 0,0:05:40.63,0:05:42.06,Default,out with title, subtitle,
Dialogue: 0,0:05:42.06,0:05:44.70,Default,left and right accessory view\Nis a little more difficult.
Dialogue: 0,0:05:45.30,0:05:48.91,Default,What, the contents of that call\Nout are kind of interesting,
Dialogue: 0,0:05:48.91,0:05:50.13,Default,when do you set those up?
Dialogue: 0,0:05:50.13,0:05:51.90,Default,Well, there is a map, okay,
Dialogue: 0,0:05:51.90,0:05:53.87,Default,the map view has a delegate\Nwe're going to talk about,
Dialogue: 0,0:05:54.17,0:05:59.02,Default,and one of the map view delegate\Nmethods is essentially build
Dialogue: 0,0:05:59.23,0:06:02.41,Default,this MK annotation view\Nfor me, including the left
Dialogue: 0,0:06:02.41,0:06:05.10,Default,and right accessory views, you\Nknow, alloc init those, as well,
Dialogue: 0,0:06:05.44,0:06:08.11,Default,and you can load those up\Nat the time you build it,
Dialogue: 0,0:06:08.41,0:06:11.76,Default,or you can wait until the pin\Nis pressed to load those up.
Dialogue: 0,0:06:11.76,0:06:14.86,Default,Now why would you want to wait\Ntill the pin is pressed to load
Dialogue: 0,0:06:14.86,0:06:16.39,Default,up those annotation views?
Dialogue: 0,0:06:16.39,0:06:17.84,Default,Well, let's look at\Nthis example right here.
Dialogue: 0,0:06:17.84,0:06:18.82,Default,You've got that thumb nail.
Dialogue: 0,0:06:19.17,0:06:22.53,Default,What if that thumb nail is,\Nrequires a Flickr fetch?
Dialogue: 0,0:06:23.02,0:06:25.25,Default,Okay, well you don't\Nwant to fetch that photo
Dialogue: 0,0:06:25.25,0:06:28.83,Default,for all the pins in the entire\Nworld, or even all of the pins
Dialogue: 0,0:06:28.83,0:06:30.46,Default,that are visible on screen.
Dialogue: 0,0:06:30.46,0:06:33.19,Default,You only want to load that\NFlickr, do that Flickr fetch,
Dialogue: 0,0:06:33.49,0:06:34.62,Default,when a pin is clicked on.
Dialogue: 0,0:06:35.05,0:06:36.19,Default,So there's this delegate method
Dialogue: 0,0:06:36.19,0:06:38.68,Default,in the map view called map view\Ndid select annotation view,
Dialogue: 0,0:06:38.68,0:06:41.07,Default,it'll get called when you click\Non a pin, that's a good place
Dialogue: 0,0:06:41.07,0:06:42.56,Default,to like do that Flickr fetch.
Dialogue: 0,0:06:42.84,0:06:44.57,Default,Okay? Load up the call out.
Dialogue: 0,0:06:44.57,0:06:46.15,Default,And we're going to\Ndo that in the demo
Dialogue: 0,0:06:46.24,0:06:47.35,Default,and see how that works too.
Dialogue: 0,0:06:48.01,0:06:51.28,Default,So, we have these MK\Nannotation views that are going
Dialogue: 0,0:06:51.28,0:06:53.70,Default,to show these ID MK annotations,
Dialogue: 0,0:06:53.70,0:06:56.30,Default,how do those two get connected\Nup, and they get connected
Dialogue: 0,0:06:56.66,0:07:01.29,Default,up by this map view delegate\Nmethod called map view,
Dialogue: 0,0:07:01.29,0:07:03.96,Default,view for annotation, and it\Nreturns a view for annotation.
Dialogue: 0,0:07:03.96,0:07:06.72,Default,This is almost exactly\Nthe same as self row
Dialogue: 0,0:07:06.72,0:07:07.98,Default,and index path and table view.
Dialogue: 0,0:07:08.35,0:07:11.00,Default,Okay? So for running this path,\Nyou give it a section and a row,
Dialogue: 0,0:07:11.00,0:07:12.62,Default,it gives you back a\NUI table view cell,
Dialogue: 0,0:07:12.62,0:07:14.68,Default,which is a view to\Ndisplay that row.
Dialogue: 0,0:07:14.68,0:07:15.36,Default,Same thing here.
Dialogue: 0,0:07:15.55,0:07:18.39,Default,It's going to give you an\Nannotation, and you're going
Dialogue: 0,0:07:18.39,0:07:21.28,Default,to give it back an MK annotation\Nview to draw that annotation.
Dialogue: 0,0:07:21.85,0:07:24.96,Default,Okay? Now, map view\Neven has this mechanism.
Dialogue: 0,0:07:25.18,0:07:28.17,Default,The DQ reusable thing,\Nlike table view has.
Dialogue: 0,0:07:28.29,0:07:31.06,Default,Right? So you can say sender,\Nwhich is the map view there,
Dialogue: 0,0:07:31.34,0:07:33.39,Default,DQ reusable annotation\Nview with identifier,
Dialogue: 0,0:07:33.39,0:07:36.72,Default,you give an identifier,\Nand if it's got a pin view
Dialogue: 0,0:07:36.72,0:07:40.10,Default,on MK annotation view that\Nit got thrown off the screen
Dialogue: 0,0:07:40.20,0:07:43.53,Default,and it can reuse it, it'll bring\Nit in, and give it to you here.
Dialogue: 0,0:07:44.00,0:07:45.76,Default,Okay? But if it doesn't\Nhave any,
Dialogue: 0,0:07:46.06,0:07:47.93,Default,then in the table view\Ncase, what happens?
Dialogue: 0,0:07:48.01,0:07:50.34,Default,We, the system will\Nautomatically duplicate
Dialogue: 0,0:07:50.34,0:07:51.26,Default,that prototype, right?
Dialogue: 0,0:07:51.26,0:07:54.11,Default,You got the prototype cell that\Nwe set up in the storyboard,
Dialogue: 0,0:07:54.11,0:07:55.92,Default,and you'll duplicate it, but\Nthat doesn't happen here,
Dialogue: 0,0:07:56.03,0:07:57.99,Default,because we don't get to\Ndo that in the map view,
Dialogue: 0,0:07:57.99,0:07:59.48,Default,the map view doesn't\Nhave all this mechanism
Dialogue: 0,0:07:59.48,0:08:00.80,Default,for prototype cells\Nand everything.
Dialogue: 0,0:08:00.80,0:08:05.09,Default,So, if that comes back as nil,\Nthe DQ reusable, then we have
Dialogue: 0,0:08:05.09,0:08:07.74,Default,to alloc init the MK\Nannotation view ourselves.
Dialogue: 0,0:08:07.93,0:08:11.03,Default,So here, for example, I'm making\Nan MK pin annotation view,
Dialogue: 0,0:08:11.03,0:08:13.73,Default,which comes in iOS, it's the\Nthing that can draw a red pin,
Dialogue: 0,0:08:13.73,0:08:15.83,Default,I think you can do purple\Nand one other color,
Dialogue: 0,0:08:16.33,0:08:18.57,Default,and I just alloc init with init
Dialogue: 0,0:08:18.57,0:08:21.00,Default,with annotation,\Nreuse identifier.
Dialogue: 0,0:08:21.50,0:08:24.24,Default,Now the fact that I passed\Nthat reuse identifier there
Dialogue: 0,0:08:24.24,0:08:27.56,Default,when I alloc init, it means\Nthat if it ever gets thrown out,
Dialogue: 0,0:08:27.85,0:08:29.60,Default,it will come back\Nin the reuse queue.
Dialogue: 0,0:08:29.83,0:08:31.92,Default,So that's the thing that\Nties it to the reuse queue,
Dialogue: 0,0:08:31.92,0:08:33.63,Default,so that's how things\Ngo back and forth.
Dialogue: 0,0:08:33.67,0:08:36.05,Default,And then, inside there, I\Nmight also set up my left
Dialogue: 0,0:08:36.05,0:08:38.65,Default,and right accessory views, maybe\Nnot put the content in there,
Dialogue: 0,0:08:38.65,0:08:41.64,Default,like the image, but I might\Ncreate the UI image view, right,
Dialogue: 0,0:08:41.64,0:08:43.62,Default,and set that to be the left one
Dialogue: 0,0:08:43.62,0:08:45.30,Default,and then set the button\Nto be the right one.
Dialogue: 0,0:08:45.98,0:08:48.95,Default,Okay? Outside of that,\Nif not a view, okay,
Dialogue: 0,0:08:48.95,0:08:51.30,Default,so now I have an a\Nview either that I DQ'd
Dialogue: 0,0:08:51.30,0:08:53.71,Default,or that I made myself,\Nhere's where I load
Dialogue: 0,0:08:53.71,0:08:56.71,Default,up whatever is cheap\Nto load up, okay?
Dialogue: 0,0:08:56.71,0:08:58.83,Default,Into that MK annotation view.
Dialogue: 0,0:08:58.86,0:09:01.21,Default,Okay? You wouldn't want to\Ndo expensive things here,
Dialogue: 0,0:09:01.21,0:09:03.02,Default,we're going to wait\Ntill it's clicked.
Dialogue: 0,0:09:03.13,0:09:05.14,Default,If this, if it's\Nsomething that's going
Dialogue: 0,0:09:05.14,0:09:06.86,Default,to be displayed immediately\Nabout the pin,
Dialogue: 0,0:09:06.86,0:09:08.56,Default,like you're using a\Ndifferent image than the pin,
Dialogue: 0,0:09:08.56,0:09:09.99,Default,then obviously you would\Nneed to set that here,
Dialogue: 0,0:09:09.99,0:09:13.37,Default,you can't wait till it's\Nclicked on to load that up.
Dialogue: 0,0:09:13.48,0:09:16.80,Default,Okay? So what kind of\Nproperties are there
Dialogue: 0,0:09:16.80,0:09:18.10,Default,on this MK annotation view,
Dialogue: 0,0:09:18.10,0:09:20.00,Default,the thing you're\Nreturning from that method?
Dialogue: 0,0:09:20.25,0:09:21.93,Default,There's obviously the\Nannotation, there's the left
Dialogue: 0,0:09:21.93,0:09:23.21,Default,and right call out\Naccessory view,
Dialogue: 0,0:09:23.21,0:09:25.81,Default,you see those are just UI\Nviews that you can set.
Dialogue: 0,0:09:26.04,0:09:27.25,Default,There's whether [inaudible],\Nthere's even,
Dialogue: 0,0:09:27.25,0:09:29.49,Default,there's even whether\Nit's dragable.
Dialogue: 0,0:09:29.49,0:09:33.60,Default,If the MK pin is dragable,\Nthen the annotation has
Dialogue: 0,0:09:33.60,0:09:35.57,Default,to not only implement\Nthat coordinate method,
Dialogue: 0,0:09:35.57,0:09:37.70,Default,it has to implement the\Nset coordinate method.
Dialogue: 0,0:09:38.09,0:09:39.77,Default,Okay? Because you're going\Nto pick that view up, pin up,
Dialogue: 0,0:09:39.77,0:09:42.59,Default,and move it when it drops, the\Nannotation has to be moved,
Dialogue: 0,0:09:42.59,0:09:44.19,Default,so it has to have a\Nset coordinate method.
Dialogue: 0,0:09:44.61,0:09:48.06,Default,Okay? Otherwise setting dragable\Nhere is not going to, to work.
Dialogue: 0,0:09:48.70,0:09:51.17,Default,And then the image that you\Nsee here, this property,
Dialogue: 0,0:09:51.36,0:09:53.28,Default,that's the image that\Nreplaces the pin.
Dialogue: 0,0:09:53.98,0:09:55.32,Default,Okay? That's instead of the pin.
Dialogue: 0,0:09:55.32,0:09:57.48,Default,That's not the image that's\Nin the call out, that's,
Dialogue: 0,0:09:57.48,0:10:00.06,Default,we're going to put in the\Nleft accessory call out view,
Dialogue: 0,0:10:00.06,0:10:00.99,Default,call out accessory view.
Dialogue: 0,0:10:03.18,0:10:05.45,Default,One thing that's kind\Nof cool, if you set one
Dialogue: 0,0:10:05.45,0:10:08.55,Default,of the accessory views\Nto be a UI control,
Dialogue: 0,0:10:08.66,0:10:12.36,Default,most notably a UI button,\Ninherit from UI control, then,
Dialogue: 0,0:10:12.36,0:10:15.75,Default,yeah, you can put that button\Nin the call out accessory view
Dialogue: 0,0:10:15.75,0:10:17.44,Default,and you can set up\Ntarget action to it
Dialogue: 0,0:10:17.44,0:10:19.92,Default,and that would all be fine,\Nthat would probably work,
Dialogue: 0,0:10:20.28,0:10:23.54,Default,but since that's so common to\Ndo in a MK annotation view,
Dialogue: 0,0:10:23.75,0:10:26.38,Default,there's a nice map view delegate\Nmethod here called map view
Dialogue: 0,0:10:26.38,0:10:29.00,Default,annotation view call out\Naccessory control tapped
Dialogue: 0,0:10:29.32,0:10:31.59,Default,that will get called if\Nthe person taps on it.
Dialogue: 0,0:10:31.97,0:10:33.74,Default,So if you put a button\Nin that little call out,
Dialogue: 0,0:10:33.88,0:10:35.80,Default,and someone taps on it,\Nthis will get called,
Dialogue: 0,0:10:35.94,0:10:38.51,Default,and you will know which\Nannotation view was tapped on,
Dialogue: 0,0:10:38.96,0:10:41.46,Default,right, and you won't have to do\Ntarget action in that button.
Dialogue: 0,0:10:41.57,0:10:42.99,Default,So we'll do that in\Nthe demo, as well.
Dialogue: 0,0:10:43.85,0:10:46.37,Default,So, did select annotation view.
Dialogue: 0,0:10:46.37,0:10:48.67,Default,So this is the thing that\Ngets called in the map view,
Dialogue: 0,0:10:48.67,0:10:50.43,Default,delegate map view, its\Ncalled map view, colon,
Dialogue: 0,0:10:50.43,0:10:53.11,Default,deselect annotation view, when\Na pin is clicked on, okay,
Dialogue: 0,0:10:53.11,0:10:55.10,Default,when someone actually\Nclicks on that red pin.
Dialogue: 0,0:10:55.10,0:10:57.99,Default,Now, it's going to automatically\Nput the call out up as long
Dialogue: 0,0:10:57.99,0:11:00.03,Default,as you set the property\Ncan show call
Dialogue: 0,0:11:00.03,0:11:04.18,Default,out in the MK annotation\Nview, by the way,
Dialogue: 0,0:11:04.18,0:11:06.65,Default,if you don't implement\Nthat annotation view,
Dialogue: 0,0:11:06.65,0:11:09.63,Default,view for annotation delegate\Nmethod where you build the view,
Dialogue: 0,0:11:09.63,0:11:11.72,Default,it'll automatically create\None for you, it's just going
Dialogue: 0,0:11:11.72,0:11:13.74,Default,to be a pin, it's going to\Nhave no left and right call
Dialogue: 0,0:11:13.74,0:11:15.71,Default,out accessory, but\Nit will show the call
Dialogue: 0,0:11:15.71,0:11:17.10,Default,out with the title\Nand subtitle, okay?
Dialogue: 0,0:11:17.10,0:11:18.72,Default,That's what you get if\Nyou don't do anything.
Dialogue: 0,0:11:18.72,0:11:19.75,Default,We'll do that in the demo too.
Dialogue: 0,0:11:19.75,0:11:22.55,Default,So, here in did select\Nannotation view,
Dialogue: 0,0:11:22.55,0:11:24.72,Default,I clicked on the pin,\Nhere's where I might say oh,
Dialogue: 0,0:11:24.72,0:11:26.36,Default,let's do that Flickr fetch.
Dialogue: 0,0:11:26.56,0:11:28.98,Default,You know, at least let's fire\Nit off in another thread here.
Dialogue: 0,0:11:29.14,0:11:31.72,Default,Okay? We don't even want to\Nwaste our time firing it off,
Dialogue: 0,0:11:31.72,0:11:33.62,Default,and hopefully you're learning\Nthis in your homework too,
Dialogue: 0,0:11:33.81,0:11:36.13,Default,you don't want to really\Nfetch that thumb nail
Dialogue: 0,0:11:36.13,0:11:38.08,Default,for a row that's not on screen,
Dialogue: 0,0:11:38.15,0:11:39.54,Default,it's kind of a waste\Nof time to do that.
Dialogue: 0,0:11:39.54,0:11:40.18,Default,Same thing here.
Dialogue: 0,0:11:40.18,0:11:42.59,Default,Until someone clicks on that\Npin, we probably don't want
Dialogue: 0,0:11:42.59,0:11:43.88,Default,to fire this Flickr fetch off.
Dialogue: 0,0:11:43.88,0:11:46.57,Default,When the Flickr fetch comes\Nback, just like the table view,
Dialogue: 0,0:11:46.57,0:11:48.24,Default,we're going to have to\Nbe careful to make sure
Dialogue: 0,0:11:48.56,0:11:52.48,Default,that this call out is still\Nassociated with this annotation
Dialogue: 0,0:11:52.48,0:11:54.32,Default,and all that because\Nthese things get reused,
Dialogue: 0,0:11:54.32,0:11:57.01,Default,just like the table\Nview rows get reused.
Dialogue: 0,0:11:57.39,0:11:59.21,Default,But anyway, so this is\Nwhere you could load
Dialogue: 0,0:11:59.21,0:12:00.37,Default,up your call out\Naccessory views.
Dialogue: 0,0:12:00.55,0:12:02.18,Default,You could also maybe segue here.
Dialogue: 0,0:12:02.78,0:12:05.09,Default,Okay? This might be a place\Nto segue, but you would have
Dialogue: 0,0:12:05.14,0:12:08.68,Default,to segue in code here,\Nand, because there's no way
Dialogue: 0,0:12:08.68,0:12:11.67,Default,in storyboard to like\Ncontrol drag from the pins,
Dialogue: 0,0:12:11.67,0:12:14.55,Default,they're not on screen, until\Nyou start adding annotations,
Dialogue: 0,0:12:14.59,0:12:19.51,Default,so here we could manual segue\Nand we'll do that in the demo.
Dialogue: 0,0:12:19.93,0:12:21.66,Default,[Pause] You could configure\Nthe way the map displays.
Dialogue: 0,0:12:21.66,0:12:23.88,Default,Okay, first of all, the\Nmap's display is just
Dialogue: 0,0:12:23.88,0:12:24.90,Default,like the maps app.
Dialogue: 0,0:12:25.14,0:12:26.04,Default,So I'm not really going to go
Dialogue: 0,0:12:26.04,0:12:28.05,Default,into all the things you can\Nconfigure about the map,
Dialogue: 0,0:12:28.68,0:12:30.79,Default,but pretty much anything\Nyou can do in the maps app,
Dialogue: 0,0:12:30.79,0:12:34.58,Default,including the 3D and rotating\Naround, and zooming in and out,
Dialogue: 0,0:12:34.58,0:12:37.21,Default,all of that you can do\Nwith the map view, okay?
Dialogue: 0,0:12:37.43,0:12:39.28,Default,Also including hybrid mode,
Dialogue: 0,0:12:39.28,0:12:41.39,Default,where it's a satellite\Nimage overlaid with roads
Dialogue: 0,0:12:41.39,0:12:42.76,Default,and all that, that's all doable.
Dialogue: 0,0:12:43.01,0:12:45.45,Default,So you want to definitely\Ncheck out the MK map view API
Dialogue: 0,0:12:45.45,0:12:49.21,Default,to see all the incredible\Namount of things you can do.
Dialogue: 0,0:12:49.62,0:12:51.50,Default,You can show the\Nuser's current location.
Dialogue: 0,0:12:51.65,0:12:53.97,Default,Okay? So it'll go use that\Ncore location stuff we talked
Dialogue: 0,0:12:53.97,0:12:54.84,Default,about in the last lecture,
Dialogue: 0,0:12:54.84,0:12:57.49,Default,find out where the user\Ncurrently is using GPS,
Dialogue: 0,0:12:57.49,0:13:00.06,Default,it'll show that on your map.
Dialogue: 0,0:13:00.06,0:13:02.11,Default,You can also restrict\Nthings about it,
Dialogue: 0,0:13:02.11,0:13:04.37,Default,maybe you don't want the\Nuser to go into 3D mode,
Dialogue: 0,0:13:04.37,0:13:06.21,Default,then you can turn\Nthe pitch-enabled off
Dialogue: 0,0:13:06.21,0:13:07.26,Default,and it won't be able to pitch.
Dialogue: 0,0:13:07.43,0:13:09.52,Default,Okay? They pitch by doing kind
Dialogue: 0,0:13:09.52,0:13:12.29,Default,of a little two-finger gesture\Nthere, they won't be able to do
Dialogue: 0,0:13:12.29,0:13:14.11,Default,that if you turn this off,\Nsame thing with rotate,
Dialogue: 0,0:13:14.11,0:13:16.32,Default,maybe you'll always north up and\Nyou don't want them to be able
Dialogue: 0,0:13:16.32,0:13:19.38,Default,to rotate around to a\Ndifferent, then you can do that.
Dialogue: 0,0:13:20.00,0:13:25.89,Default,So let's talk briefly about the\N3D of the maps, and a big issue
Dialogue: 0,0:13:25.89,0:13:27.66,Default,with this 3D, it's\Nnot really 3D,
Dialogue: 0,0:13:27.66,0:13:29.20,Default,it's kind of 2 and\Na half D, right?
Dialogue: 0,0:13:29.20,0:13:32.08,Default,This is a 2D map, but, you\Nknow, it has some information
Dialogue: 0,0:13:32.08,0:13:34.54,Default,about buildings and\Ntheir 3D representations,
Dialogue: 0,0:13:34.54,0:13:36.93,Default,so kind of when you pitch\Nup, it can show you a bit
Dialogue: 0,0:13:36.93,0:13:38.21,Default,of a 3D representation.
Dialogue: 0,0:13:38.59,0:13:40.11,Default,The main way you're going\Nto interact with that
Dialogue: 0,0:13:40.11,0:13:43.13,Default,in code is you're going to want\Nto specify where the camera is.
Dialogue: 0,0:13:43.56,0:13:46.96,Default,Okay? Where is the camera\Nthat's looking at the streets,
Dialogue: 0,0:13:47.26,0:13:49.28,Default,or whatever, that the\Nperson looking at the map,
Dialogue: 0,0:13:49.66,0:13:53.27,Default,and you can specify the camera\Nvia it, where a coordinate
Dialogue: 0,0:13:53.27,0:13:55.51,Default,or where the camera is, and\Nwhich way it's pointing,
Dialogue: 0,0:13:55.51,0:13:57.69,Default,and how much is pitch,\Nand what altitude it's at,
Dialogue: 0,0:13:57.95,0:13:58.98,Default,but one of the easiest ways
Dialogue: 0,0:13:58.98,0:14:02.78,Default,to do it is using this class\Nmethod here, camera looking
Dialogue: 0,0:14:02.78,0:14:06.29,Default,at center coordinate from\Neye coordinate, eye altitude.
Dialogue: 0,0:14:06.55,0:14:08.53,Default,So, the eye coordinate\Nand the eye latitude,
Dialogue: 0,0:14:08.53,0:14:09.94,Default,that's where your camera is.
Dialogue: 0,0:14:10.36,0:14:13.80,Default,Where in the world, okay,\Nusing the coordinates, latitude
Dialogue: 0,0:14:13.80,0:14:16.69,Default,and longitude, your camera\Nis how, what is the altitude
Dialogue: 0,0:14:16.69,0:14:18.00,Default,of your camera, in meters,
Dialogue: 0,0:14:18.59,0:14:20.58,Default,and then what point\Nare you looking at?
Dialogue: 0,0:14:20.95,0:14:22.65,Default,You see how that's a\Nway to set your camera?
Dialogue: 0,0:14:23.22,0:14:24.61,Default,So you can do that\Nto set your camera,
Dialogue: 0,0:14:24.84,0:14:26.60,Default,one thing that's really cool\Nabout setting your camera,
Dialogue: 0,0:14:26.94,0:14:28.98,Default,when you move from one place\Nto another, you can kind
Dialogue: 0,0:14:28.98,0:14:31.69,Default,of move your camera up into\Nspace and it'll animate that,
Dialogue: 0,0:14:32.22,0:14:34.09,Default,and then come back\Ndown in the new place
Dialogue: 0,0:14:34.09,0:14:37.50,Default,and it really orients your user\Nwhere they are on the planet
Dialogue: 0,0:14:37.50,0:14:41.39,Default,as they go from thing,\Nfrom location to location.
Dialogue: 0,0:14:41.39,0:14:42.25,Default,Question? No.
Dialogue: 0,0:14:42.86,0:14:47.82,Default,Okay. [Pause] What about\Nthe region, what about where
Dialogue: 0,0:14:47.82,0:14:49.24,Default,on the map we're, we're seeing?
Dialogue: 0,0:14:49.24,0:14:51.67,Default,Okay? So the region is\Nset with this property
Dialogue: 0,0:14:51.67,0:14:53.43,Default,in MK map view called region.
Dialogue: 0,0:14:53.55,0:14:55.21,Default,It's an MK coordinate region,
Dialogue: 0,0:14:55.21,0:14:57.91,Default,an MK coordinate region is\Ncenter-coordinate latitude
Dialogue: 0,0:14:57.91,0:14:59.83,Default,and longitude, and then a span.
Dialogue: 0,0:15:00.27,0:15:03.38,Default,Latitude and longitude delta,\Nhow many degrees of longitude,
Dialogue: 0,0:15:03.38,0:15:07.01,Default,how many degrees of latitude\Nthat tells you what's showing
Dialogue: 0,0:15:07.69,0:15:10.00,Default,in the map at any given time.
Dialogue: 0,0:15:10.22,0:15:13.15,Default,Okay? And this is writable and\Nreadable, so you can set the map
Dialogue: 0,0:15:13.15,0:15:15.53,Default,to it and you can also\Nfind out where it is now
Dialogue: 0,0:15:15.53,0:15:16.98,Default,after the user is done\Npinching or whatever.
Dialogue: 0,0:15:17.16,0:15:21.54,Default,You can also just have the\Nmap keep its current zoom
Dialogue: 0,0:15:21.80,0:15:24.39,Default,and just move around by\Nsetting the center coordinate.
Dialogue: 0,0:15:24.39,0:15:26.42,Default,Okay? This is all exactly\Nwhat you would expect,
Dialogue: 0,0:15:26.42,0:15:28.93,Default,is this map class\Nis super powerful.
Dialogue: 0,0:15:28.93,0:15:33.88,Default,I mean, one of the more\Naction-packed classes in all
Dialogue: 0,0:15:33.88,0:15:34.86,Default,of iOS, which [inaudible].
Dialogue: 0,0:15:35.14,0:15:38.10,Default,And there's a ton of C\Nfunctions to convert between.
Dialogue: 0,0:15:38.10,0:15:41.31,Default,Okay, this is just a view,\Nmap view is a UI view,
Dialogue: 0,0:15:41.57,0:15:43.54,Default,and of course you've got\Nmap coordinates in latitude
Dialogue: 0,0:15:43.54,0:15:46.24,Default,and longitude, and then you've\Ngot view coordinates in X and Y.
Dialogue: 0,0:15:46.64,0:15:48.51,Default,So sometimes you want to\Nconvert between those two,
Dialogue: 0,0:15:48.51,0:15:50.56,Default,so it's got a bunch of C\Nfunctions for doing that
Dialogue: 0,0:15:50.88,0:15:53.40,Default,and a bunch of methods, as well,\Nso that you can kind of find
Dialogue: 0,0:15:53.40,0:15:55.24,Default,out what's going on,\Nwhere they're touching,
Dialogue: 0,0:15:55.24,0:15:57.95,Default,what's causing things,\Netc. So there's a lot,
Dialogue: 0,0:15:57.95,0:15:59.19,Default,a lot in the map view there.
Dialogue: 0,0:15:59.88,0:16:02.49,Default,This map view delegate method,
Dialogue: 0,0:16:02.49,0:16:05.02,Default,there's about 20 map\Nview delegate methods,
Dialogue: 0,0:16:05.02,0:16:08.86,Default,I can only cover a tiny few\Nhere, like view for annotation
Dialogue: 0,0:16:08.90,0:16:11.29,Default,and did select annotation view,
Dialogue: 0,0:16:11.64,0:16:13.76,Default,but another interesting\None is did change region.
Dialogue: 0,0:16:13.92,0:16:16.00,Default,And the reason this is\Ninteresting, this gets called,
Dialogue: 0,0:16:16.28,0:16:20.18,Default,if the map is animating, moving\Naround, changing the camera
Dialogue: 0,0:16:20.18,0:16:24.00,Default,or something, when it's done,\Nit'll be showing a new region,
Dialogue: 0,0:16:24.22,0:16:25.63,Default,it'll send this message to you.
Dialogue: 0,0:16:25.87,0:16:26.87,Default,Why is that important?
Dialogue: 0,0:16:26.87,0:16:27.67,Default,Why would you want that?
Dialogue: 0,0:16:27.88,0:16:29.55,Default,Well, because if you're\Ngoing to do animation,
Dialogue: 0,0:16:29.55,0:16:32.16,Default,like I'm showing San Francisco\Nand the user now wants
Dialogue: 0,0:16:32.16,0:16:35.58,Default,to see New York, if you just\Nsay set the coordinate New York,
Dialogue: 0,0:16:35.58,0:16:37.65,Default,it's going to go\Nwhoosh, over to New York,
Dialogue: 0,0:16:37.70,0:16:39.20,Default,and the whole country\Nis going to rip
Dialogue: 0,0:16:39.20,0:16:40.54,Default,by in about half a second.
Dialogue: 0,0:16:40.54,0:16:43.42,Default,So it's not going to be much of\Nan animation, but if you want
Dialogue: 0,0:16:43.42,0:16:46.74,Default,to move your camera up over the\NUnited States a few thousand
Dialogue: 0,0:16:46.74,0:16:49.58,Default,meters, and then\Ngo back down, okay?
Dialogue: 0,0:16:49.69,0:16:51.60,Default,You'll need to know when\Nyou get up to the top
Dialogue: 0,0:16:52.45,0:16:54.51,Default,so that you can start the\Nanimation going down, and so,
Dialogue: 0,0:16:54.67,0:16:57.05,Default,region to animated will get\Ncalled when you get to the top,
Dialogue: 0,0:16:57.05,0:16:59.46,Default,you start the animation to\Nmove the camera to the top,
Dialogue: 0,0:16:59.80,0:17:01.71,Default,when it gets to the top\Nand the region is set,
Dialogue: 0,0:17:01.71,0:17:03.74,Default,it'll call you this, and the\Nregion will be the whole United
Dialogue: 0,0:17:03.74,0:17:06.70,Default,States, and then you can start\Nyour animation and go back down.
Dialogue: 0,0:17:06.70,0:17:09.72,Default,Okay? And really, for nice\Napps, you might go up,
Dialogue: 0,0:17:10.04,0:17:13.13,Default,down to New York, and then\Ndrive down the street, okay?
Dialogue: 0,0:17:13.13,0:17:14.45,Default,It's kind of really\Ncool animation,
Dialogue: 0,0:17:14.45,0:17:17.13,Default,that each of those steps,\Nyou want to use this to go
Dialogue: 0,0:17:17.13,0:17:19.49,Default,to the next step, not\Nthe completion handlers
Dialogue: 0,0:17:19.49,0:17:22.02,Default,of the animation things,\Nthis is much better,
Dialogue: 0,0:17:22.02,0:17:23.51,Default,because this is going\Nto have all,
Dialogue: 0,0:17:23.51,0:17:24.64,Default,it's going to do\Nall the rotation,
Dialogue: 0,0:17:24.64,0:17:25.56,Default,want everything settled down,
Dialogue: 0,0:17:25.56,0:17:28.12,Default,it's almost like the settle\Ndown, the did pause we had
Dialogue: 0,0:17:28.39,0:17:30.14,Default,in the dynamic animator, okay?
Dialogue: 0,0:17:30.32,0:17:31.75,Default,So that's an important method\Nto know if you're going
Dialogue: 0,0:17:31.75,0:17:33.47,Default,to do good map animation.
Dialogue: 0,0:17:34.49,0:17:36.66,Default,Alright, so in addition\Nto the map view,
Dialogue: 0,0:17:36.66,0:17:38.07,Default,we also have searching.
Dialogue: 0,0:17:38.28,0:17:41.40,Default,Okay? So local search,\Nkind of like a geo coder,
Dialogue: 0,0:17:41.40,0:17:43.49,Default,but lots more powerful.
Dialogue: 0,0:17:43.77,0:17:46.20,Default,This basically lets\Nyou have, specify,
Dialogue: 0,0:17:46.20,0:17:48.47,Default,let's your user specify\Na natural language query,
Dialogue: 0,0:17:48.47,0:17:51.79,Default,like here I might create a\Nsearch request for 'Ikes', okay?
Dialogue: 0,0:17:51.79,0:17:54.86,Default,And I might search in a region\Nwhich is Stanford Campus,
Dialogue: 0,0:17:55.14,0:17:57.86,Default,and then I fire this off, of\Ncourse, this is going to go
Dialogue: 0,0:17:57.86,0:18:00.70,Default,over the network, not all this\Ninformation is on your device.
Dialogue: 0,0:18:00.70,0:18:01.95,Default,It's going to go\Nover the network,
Dialogue: 0,0:18:01.95,0:18:03.90,Default,it's going to do a fetch,\Ngoing to figure this out,
Dialogue: 0,0:18:03.90,0:18:05.85,Default,and it's going to return\Nto you and call you
Dialogue: 0,0:18:05.85,0:18:08.38,Default,to this completion handler\Nso you do it with start ,
Dialogue: 0,0:18:08.38,0:18:11.00,Default,ith completion, it'll call\Nthe completion handler later,
Dialogue: 0,0:18:11.31,0:18:14.19,Default,and you're going to get an\Narray of MK map items, okay?
Dialogue: 0,0:18:14.19,0:18:15.96,Default,MK map items are\Nbasically things
Dialogue: 0,0:18:16.39,0:18:18.24,Default,that describe a place\Non the map.
Dialogue: 0,0:18:18.80,0:18:22.71,Default,And they have inside of them an\NMK place mark, which is detail
Dialogue: 0,0:18:22.71,0:18:24.90,Default,about a place on the\Nmap, like the postal code
Dialogue: 0,0:18:25.20,0:18:27.14,Default,or region it's in,\Nthings like that.
Dialogue: 0,0:18:27.14,0:18:30.92,Default,MK map item is kind of cool\Nbecause it, there's a method
Dialogue: 0,0:18:30.92,0:18:34.19,Default,in there called open in map with\Nlaunch options, and if you send
Dialogue: 0,0:18:34.19,0:18:36.51,Default,that to an MK map item,\Nit will leave your app,
Dialogue: 0,0:18:36.51,0:18:38.40,Default,launch the maps app\Nand show it there.
Dialogue: 0,0:18:38.40,0:18:40.54,Default,So if you don't want to have\Na map view and all that stuff,
Dialogue: 0,0:18:40.54,0:18:43.09,Default,you can still use this\Nlocal search and then switch
Dialogue: 0,0:18:43.09,0:18:45.73,Default,over to the maps app if\Nyou want to show them
Dialogue: 0,0:18:45.73,0:18:46.83,Default,that particular location.
Dialogue: 0,0:18:46.83,0:18:46.97,Default,Yeah?
Dialogue: 0,0:18:48.52,0:18:52.63,Default,[ Inaudible Background\NQuestion ]
Dialogue: 0,0:18:53.13,0:18:54.06,Default,Yeah, so the question is what
Dialogue: 0,0:18:54.06,0:18:56.08,Default,about the tiles of\Nthe map itself?
Dialogue: 0,0:18:56.08,0:18:56.94,Default,All that map data?
Dialogue: 0,0:18:57.06,0:18:59.02,Default,Yeah, that's clearly not\Non your phone as well,
Dialogue: 0,0:18:59.21,0:19:00.42,Default,that's downloaded too.
Dialogue: 0,0:19:00.63,0:19:02.07,Default,So when you first look\Nat a place on the map,
Dialogue: 0,0:19:02.07,0:19:03.30,Default,it's just going to\Nbe like a grid,
Dialogue: 0,0:19:03.30,0:19:05.83,Default,kind of like the hollow deck\Nin Star Trek or whatever,
Dialogue: 0,0:19:05.83,0:19:08.57,Default,like just a grid, and then it's\Ngoing to fill in with the tiles.
Dialogue: 0,0:19:09.17,0:19:10.93,Default,Okay? And depending how\Nfast your network is,
Dialogue: 0,0:19:10.93,0:19:12.34,Default,that's how fast it's\Ngoing to download it.
Dialogue: 0,0:19:12.69,0:19:14.04,Default,So yeah, that's all\Nhappening, though,
Dialogue: 0,0:19:14.04,0:19:15.58,Default,in the background,\Nyou don't even know.
Dialogue: 0,0:19:15.75,0:19:16.73,Default,You have no idea\Nwhat's going on.
Dialogue: 0,0:19:16.73,0:19:18.65,Default,You can find out there\Nare delegate methods
Dialogue: 0,0:19:18.65,0:19:21.91,Default,that said got this title, you\Nknow, it'll tell you if you want
Dialogue: 0,0:19:21.91,0:19:23.06,Default,to know, but generally\Nyou don't care.
Dialogue: 0,0:19:23.95,0:19:27.04,Default,There's also a way\Nto get directions
Dialogue: 0,0:19:27.13,0:19:28.34,Default,from one place to another.
Dialogue: 0,0:19:28.62,0:19:32.56,Default,So, you just create this MK\Ndirections thing, you're going
Dialogue: 0,0:19:32.56,0:19:35.22,Default,to specify an MK map item at\Nthe beginning, at the end,
Dialogue: 0,0:19:35.50,0:19:38.34,Default,and it's going to, again, go\Nasynchronously over the network
Dialogue: 0,0:19:38.34,0:19:40.58,Default,and give you back a\Nlist of possible roots
Dialogue: 0,0:19:40.58,0:19:42.81,Default,that you can take, and these\Nroots are going to come back
Dialogue: 0,0:19:42.92,0:19:46.68,Default,with text descriptions,\Nyou know, take highway 101
Dialogue: 0,0:19:46.68,0:19:49.61,Default,for this much, or whatever, and\Nalso they're going to come back
Dialogue: 0,0:19:49.61,0:19:52.00,Default,with the MK polylines.
Dialogue: 0,0:19:52.21,0:19:55.30,Default,An MK polyline, exactly what\Nyou would think, it's a bunch
Dialogue: 0,0:19:55.30,0:19:58.97,Default,of lines, and this polyline,\Nyou can see the blue line here,
Dialogue: 0,0:19:59.78,0:20:03.88,Default,or the purple lines, will, it's\Nbasically a description of how
Dialogue: 0,0:20:03.88,0:20:06.13,Default,to draw and go from place\Nto place in the map,
Dialogue: 0,0:20:06.13,0:20:07.06,Default,which is really, really cool.
Dialogue: 0,0:20:07.44,0:20:10.17,Default,But it does beg the question\Nif I got a polyline, in hand,
Dialogue: 0,0:20:10.17,0:20:11.55,Default,how do I put it on the map?
Dialogue: 0,0:20:11.88,0:20:12.97,Default,How do I draw it on the map?
Dialogue: 0,0:20:13.34,0:20:17.10,Default,And the answer is we draw\Non the map using overlays.
Dialogue: 0,0:20:17.39,0:20:21.27,Default,Okay? So overlays are\Nessentially descriptions
Dialogue: 0,0:20:21.38,0:20:23.93,Default,of some shape that you\Nwant to draw on the map.
Dialogue: 0,0:20:24.06,0:20:26.97,Default,So a polyline would be one,\Nbut you could also do circles,
Dialogue: 0,0:20:27.75,0:20:30.63,Default,you know, arbitrary\Npolygons, things like that,
Dialogue: 0,0:20:30.63,0:20:34.46,Default,and the way this mechanism\Nworks is you create this shape,
Dialogue: 0,0:20:34.80,0:20:37.30,Default,like an MK polyline,\Nyou add an overlay,
Dialogue: 0,0:20:37.30,0:20:39.81,Default,you see that add overlay, the\Nlevel there is whether it's
Dialogue: 0,0:20:39.81,0:20:43.54,Default,above the roads or just above\Nthe, or above the labels,
Dialogue: 0,0:20:43.54,0:20:45.11,Default,which is kind of on top\Nof everything in the map,
Dialogue: 0,0:20:45.11,0:20:48.40,Default,so you could have the polyline\Nbe on the roads and have things
Dialogue: 0,0:20:48.40,0:20:51.29,Default,like 280 symbol be above\Nit, which looks really cool.
Dialogue: 0,0:20:51.85,0:20:56.75,Default,But then, the MK map view is\Ngoing to ask you later, okay,
Dialogue: 0,0:20:56.93,0:21:01.09,Default,now I need a renderer to\Ndraw this thing on the map.
Dialogue: 0,0:21:01.54,0:21:03.92,Default,Okay? An MK overlay renderer,\Nwhich is a little bit
Dialogue: 0,0:21:03.92,0:21:05.33,Default,like that MK annotation view,
Dialogue: 0,0:21:05.33,0:21:07.81,Default,except for an MK overlay\Nrenderer is not a view,
Dialogue: 0,0:21:08.12,0:21:10.66,Default,it's more of a mechanism\Nfor drawing on the map,
Dialogue: 0,0:21:11.12,0:21:14.29,Default,and then that renderer will\Nbe used to render on the map.
Dialogue: 0,0:21:14.29,0:21:17.28,Default,Now, these renderers come with\NiOS, there's a whole bunch
Dialogue: 0,0:21:17.28,0:21:19.94,Default,of them, circle renderer,\Npolyline renderer, polygon,
Dialogue: 0,0:21:20.32,0:21:22.52,Default,there's a tile renderer.
Dialogue: 0,0:21:23.15,0:21:24.54,Default,The tile renderer is cool
Dialogue: 0,0:21:24.54,0:21:27.39,Default,because it just renders\Nbit maps, okay,
Dialogue: 0,0:21:27.39,0:21:29.26,Default,and you can actually use\Nit to replace the data,
Dialogue: 0,0:21:29.93,0:21:31.99,Default,instead of the data,\Nthat comes from Apple.
Dialogue: 0,0:21:32.15,0:21:35.77,Default,So if you had your own custom\Nmap, you could have this tile
Dialogue: 0,0:21:35.77,0:21:38.17,Default,and it's a little bit\Ninvolved, because you're talking
Dialogue: 0,0:21:38.17,0:21:41.24,Default,about being able to zoom in and\Nout and it has an API for that,
Dialogue: 0,0:21:41.70,0:21:43.75,Default,but you could possibly\Nreplace, or you might just want
Dialogue: 0,0:21:43.75,0:21:46.31,Default,to tile some image over a\Ncertain place in the world.
Dialogue: 0,0:21:46.37,0:21:48.03,Default,And so all that stuff is built
Dialogue: 0,0:21:48.03,0:21:52.58,Default,in with this MK shape\Nstuff in, in MK overlay.
Dialogue: 0,0:21:52.58,0:21:55.58,Default,So, overlays are really pretty\Ncool and you can do a lot
Dialogue: 0,0:21:55.58,0:21:56.98,Default,of stuff with them,\Nso I encourage you
Dialogue: 0,0:21:57.05,0:21:59.94,Default,to kind of look at that.
Dialogue: 0,0:21:59.94,0:22:01.23,Default,Okay. So that's it for maps.
Dialogue: 0,0:22:01.38,0:22:02.86,Default,And I'm going to do a big\Ndemo of all this stuff
Dialogue: 0,0:22:02.86,0:22:05.33,Default,so you can see all this stuff\Nin action, but before I do that,
Dialogue: 0,0:22:05.33,0:22:07.23,Default,there's another thing I'm going\Nto do in the demo that I want
Dialogue: 0,0:22:07.23,0:22:09.44,Default,to talk about briefly,\Nwhich is embed segues.
Dialogue: 0,0:22:09.66,0:22:12.52,Default,Okay? So, so far about segues,\Nyou know how to do push segues,
Dialogue: 0,0:22:12.52,0:22:14.91,Default,when you're in navigation\Ncontroller, you know how
Dialogue: 0,0:22:14.91,0:22:18.95,Default,to do replace segues in a split\Nview, although we didn't demo
Dialogue: 0,0:22:18.95,0:22:19.98,Default,that and it's pretty rare
Dialogue: 0,0:22:19.98,0:22:22.30,Default,to actually replace the\Ndetail or the master.
Dialogue: 0,0:22:23.23,0:22:25.71,Default,In a segue, we usually\Njust leave the detail there
Dialogue: 0,0:22:25.71,0:22:28.15,Default,and go look for it all the time,\Nlike we did in photo mania.
Dialogue: 0,0:22:28.70,0:22:31.67,Default,Pop over segues, we saw\Nthat last time, okay,
Dialogue: 0,0:22:31.67,0:22:32.77,Default,where we said we'll\Ndo a pop over.
Dialogue: 0,0:22:33.09,0:22:35.04,Default,And here's another one\Ncalled embed segues.
Dialogue: 0,0:22:35.04,0:22:37.36,Default,And an embed segue\Nis really cool,
Dialogue: 0,0:22:37.57,0:22:41.26,Default,you create a UI view\Ninside the view hierarchy
Dialogue: 0,0:22:41.26,0:22:44.39,Default,of some view controller,\Nand inside that UI view,
Dialogue: 0,0:22:44.58,0:22:47.57,Default,is the self dot view of\Nanother view controller.
Dialogue: 0,0:22:48.57,0:22:51.29,Default,Okay? So you basically take\Nanother view controller's self
Dialogue: 0,0:22:51.29,0:22:54.72,Default,dot view and embed it as a\NUI view inside another one.
Dialogue: 0,0:22:55.18,0:23:00.97,Default,Okay? So, that allows you to\Nbuild pretty complex views
Dialogue: 0,0:23:01.13,0:23:03.48,Default,and still divide up\Nthe responsibility
Dialogue: 0,0:23:03.48,0:23:06.50,Default,for a rectangular\Narea into MVCs, okay?
Dialogue: 0,0:23:06.50,0:23:09.19,Default,And I'm going to\Ndo this in the demo
Dialogue: 0,0:23:09.19,0:23:12.09,Default,so you get a little better idea\Nof what I'm talking about here.
Dialogue: 0,0:23:12.30,0:23:15.57,Default,Xcode makes is really,\Nreally easy to do this.
Dialogue: 0,0:23:15.88,0:23:17.76,Default,You just go to the object\Npalate and you're going
Dialogue: 0,0:23:17.76,0:23:20.04,Default,to find something down\Nthere called container view,
Dialogue: 0,0:23:20.44,0:23:23.38,Default,you drag that container\Nview into the view you want
Dialogue: 0,0:23:23.77,0:23:26.68,Default,and then it's going to actually\Nautomatically create a little
Dialogue: 0,0:23:26.88,0:23:30.19,Default,view controller with a segue\Nto it, but you can control,
Dialogue: 0,0:23:30.19,0:23:31.69,Default,drag from this container
Dialogue: 0,0:23:31.90,0:23:34.44,Default,to any VC you want\Nto be embedded there.
Dialogue: 0,0:23:34.98,0:23:37.02,Default,Okay? And then once\Nyou add control, drag,
Dialogue: 0,0:23:37.29,0:23:38.64,Default,it's just like any other segue.
Dialogue: 0,0:23:38.86,0:23:39.49,Default,It's just a segue.
Dialogue: 0,0:23:39.49,0:23:41.01,Default,It has to be prepared, right?
Dialogue: 0,0:23:41.01,0:23:41.41,Default,Because it's going
Dialogue: 0,0:23:41.41,0:23:43.12,Default,to be displaying something\Nin there, presumably.
Dialogue: 0,0:23:43.52,0:23:45.04,Default,But otherwise, it's\Nexactly the same.
Dialogue: 0,0:23:45.22,0:23:47.90,Default,And not only is that segue\Nexactly like any other segue,
Dialogue: 0,0:23:48.26,0:23:50.46,Default,the view, that container\Nyou see right there,
Dialogue: 0,0:23:50.69,0:23:52.48,Default,that's just like\Nany other UI view.
Dialogue: 0,0:23:52.86,0:23:57.31,Default,So, in the post view controller,\Nyou can set its dot hidden
Dialogue: 0,0:23:57.31,0:23:58.28,Default,if you want to hide it.
Dialogue: 0,0:23:58.49,0:24:00.50,Default,You can change its frame, okay,
Dialogue: 0,0:24:00.50,0:24:03.07,Default,you can animate its frame\Nchanging, moving around.
Dialogue: 0,0:24:03.43,0:24:05.41,Default,You can do anything you\Nwant, it's just kind
Dialogue: 0,0:24:05.58,0:24:07.21,Default,of an opaque UI view to you,
Dialogue: 0,0:24:07.21,0:24:08.55,Default,it's part of your view\Nhierarchy, you can take it
Dialogue: 0,0:24:08.55,0:24:11.01,Default,out of the view hierarchy,\Nput it back in, okay,
Dialogue: 0,0:24:11.01,0:24:13.58,Default,it's just that its contents\Nare going to be drawn
Dialogue: 0,0:24:14.01,0:24:15.96,Default,as the self dot view of\Nsome other view controller.
Dialogue: 0,0:24:17.08,0:24:17.57,Default,Okay? [Pause] Yeah.
Dialogue: 0,0:24:17.63,0:24:23.75,Default,The timing [inaudible] this\Nlittle bit thing to be careful
Dialogue: 0,0:24:23.75,0:24:25.85,Default,of is the timing\Nof setting things,
Dialogue: 0,0:24:25.85,0:24:29.32,Default,because when does this\Nembed happen, okay?
Dialogue: 0,0:24:29.50,0:24:31.96,Default,When does it's prepare for\Nsegue happen, basically?
Dialogue: 0,0:24:32.16,0:24:33.78,Default,Relative to other\Nthings happening
Dialogue: 0,0:24:33.78,0:24:35.70,Default,in that view controller\Nthat it's embedded in,
Dialogue: 0,0:24:35.70,0:24:37.57,Default,like that things\Noutlets being set,
Dialogue: 0,0:24:37.57,0:24:40.46,Default,etc. And the answer is\Nit happens pretty early.
Dialogue: 0,0:24:40.81,0:24:42.25,Default,Okay? Before outlet setting,
Dialogue: 0,0:24:42.25,0:24:44.08,Default,just like all prepare\Nfor segues do.
Dialogue: 0,0:24:44.35,0:24:45.74,Default,So a lot of times\Nyou're going to have
Dialogue: 0,0:24:45.74,0:24:48.63,Default,to do whatever code you\Ndo in the prepare also
Dialogue: 0,0:24:48.63,0:24:50.83,Default,in your outlet setting, if\Nthey depend on each other.
Dialogue: 0,0:24:51.28,0:24:53.39,Default,Okay? And we've already seen\Nthis in photo mania before,
Dialogue: 0,0:24:53.39,0:24:55.53,Default,anything you do in your\Nprepare for segue that depends
Dialogue: 0,0:24:55.53,0:24:57.69,Default,on an outlet, you're going\Nto do it in prepare segue,
Dialogue: 0,0:24:57.89,0:24:59.46,Default,you might also do it\Nin the outlet setter.
Dialogue: 0,0:24:59.98,0:25:03.91,Default,Okay? So whichever one happens\Nsecond will do the actual work.
Dialogue: 0,0:25:03.95,0:25:05.93,Default,Does everyone understand\Nwhat I mean by that?
Dialogue: 0,0:25:06.86,0:25:10.91,Default,No? Yes? Who does understand\Nwhat I mean by that?
Dialogue: 0,0:25:11.88,0:25:12.97,Default,Nobody. Okay, well.
Dialogue: 0,0:25:13.43,0:25:16.20,Default,Okay, it's maybe a little\Nhard to conceptualize
Dialogue: 0,0:25:16.20,0:25:18.56,Default,without seeing it, so in the\Ndemo I'll talk about it again
Dialogue: 0,0:25:18.56,0:25:19.67,Default,and hopefully it'll make sense.
Dialogue: 0,0:25:20.30,0:25:21.63,Default,Alright, so let's do this demo.
Dialogue: 0,0:25:22.13,0:25:23.76,Default,This is a very big demo.
Dialogue: 0,0:25:23.76,0:25:26.28,Default,I think I have enough\Ntime to do it all.
Dialogue: 0,0:25:27.65,0:25:32.39,Default,Notes here, make sure, in\Ncase I forget something.
Dialogue: 0,0:25:32.74,0:25:34.56,Default,Okay. So what are\Nwe going to do?
Dialogue: 0,0:25:34.88,0:25:38.16,Default,We are going to start with\Nphoto mania where we left off,
Dialogue: 0,0:25:38.16,0:25:40.90,Default,so here's the exact photo\Nmania we had before.
Dialogue: 0,0:25:41.03,0:25:42.72,Default,Where we left off.
Dialogue: 0,0:25:42.72,0:25:46.90,Default,This time we're going\Nto work in this iPhone,
Dialogue: 0,0:25:47.11,0:25:48.66,Default,in the iPhone storyboard\Nand then we'll copy it
Dialogue: 0,0:25:48.66,0:25:51.42,Default,over to the iPad storyboard,\Nso we're kind of going back
Dialogue: 0,0:25:51.42,0:25:52.81,Default,and forth working on each one.
Dialogue: 0,0:25:52.87,0:25:55.43,Default,Today we're going to go\Nwork on the iPhone one.
Dialogue: 0,0:25:55.43,0:25:56.65,Default,So, what are we going\Nto do here?
Dialogue: 0,0:25:56.65,0:25:58.55,Default,So this, hopefully\Nyou recognize this.
Dialogue: 0,0:25:58.55,0:26:00.29,Default,Right? This is our storyboard,
Dialogue: 0,0:26:00.45,0:26:01.89,Default,this is a bunch of\Nphotographers.
Dialogue: 0,0:26:02.08,0:26:04.17,Default,We click on a photographer,\Nwe get all the photos
Dialogue: 0,0:26:04.17,0:26:06.39,Default,by that photographer\Ncurrently in a table.
Dialogue: 0,0:26:06.69,0:26:10.82,Default,So what I'm going to build is\Nsame UI here, almost exactly,
Dialogue: 0,0:26:11.04,0:26:13.24,Default,except for that instead\Nof a table of the photos,
Dialogue: 0,0:26:13.24,0:26:15.13,Default,I'm going to put a\Nmap of the photos up.
Dialogue: 0,0:26:15.88,0:26:18.38,Default,Okay? With a pin for every\Nphoto by that photographer.
Dialogue: 0,0:26:18.75,0:26:19.94,Default,So I'm going to need a photos
Dialogue: 0,0:26:19.94,0:26:23.23,Default,by photographer map view\Ncontroller, instead of a photos
Dialogue: 0,0:26:23.23,0:26:25.60,Default,by photographer core data\Ntable view controller.
Dialogue: 0,0:26:25.60,0:26:27.75,Default,Okay, I'm still going to pull\Nall of this out of core data
Dialogue: 0,0:26:27.75,0:26:30.12,Default,and everything, but we're not\Ngoing to be doing a table view.
Dialogue: 0,0:26:30.12,0:26:31.36,Default,Does that make sense?
Dialogue: 0,0:26:31.61,0:26:32.22,Default,What I'm going to do?
Dialogue: 0,0:26:32.95,0:26:35.41,Default,Alright, so let's\Ngo ahead and drag,
Dialogue: 0,0:26:35.50,0:26:37.20,Default,create that view controller.
Dialogue: 0,0:26:37.45,0:26:40.14,Default,So a map view controller\Nis just a view controller,
Dialogue: 0,0:26:40.14,0:26:41.69,Default,so I'm drag out a\Nview controller here.
Dialogue: 0,0:26:41.69,0:26:43.00,Default,We'll put it under\Nhere because it's going
Dialogue: 0,0:26:43.00,0:26:45.41,Default,to be replacing this\Nguy right here,
Dialogue: 0,0:26:45.41,0:26:47.73,Default,which is the table\Nview controller of it.
Dialogue: 0,0:26:48.03,0:26:50.86,Default,Now, as with any view\Ncontroller, I need a class
Dialogue: 0,0:26:50.98,0:26:54.26,Default,for this, right now it's,\Nyou know, UI view controller,
Dialogue: 0,0:26:54.26,0:26:56.56,Default,so I need a custom subclass,\Nlet's go create that.
Dialogue: 0,0:26:57.17,0:27:00.49,Default,And that custom subclass\Nis going to be a regular,
Dialogue: 0,0:27:00.49,0:27:01.92,Default,old UI view controller.
Dialogue: 0,0:27:02.42,0:27:07.57,Default,Oops. UI view, view controller,\Nand I'm going to call it,
Dialogue: 0,0:27:08.00,0:27:09.54,Default,to be consistent, photos
Dialogue: 0,0:27:09.59,0:27:13.98,Default,by photographer map\Nview controller.
Dialogue: 0,0:27:14.23,0:27:16.73,Default,They're getting to be\Npretty long names here, but,
Dialogue: 0,0:27:16.73,0:27:20.72,Default,I could call it map MVC,\Nbut that's kind of weird.
Dialogue: 0,0:27:20.72,0:27:22.08,Default,So we'll call it map\Nview controller, alright?
Dialogue: 0,0:27:22.08,0:27:25.23,Default,So photos by photographer map\Nview controller, we'll put it
Dialogue: 0,0:27:25.23,0:27:26.39,Default,where we put everything,\Nwe'll put it
Dialogue: 0,0:27:26.39,0:27:28.58,Default,in with our controllers,\Nright there.
Dialogue: 0,0:27:29.58,0:27:31.01,Default,We got that.
Dialogue: 0,0:27:31.01,0:27:34.35,Default,In our storyboard, let's\Ngo ahead and set this thing
Dialogue: 0,0:27:34.35,0:27:36.35,Default,to be a map view controller.
Dialogue: 0,0:27:36.35,0:27:37.04,Default,Here it is, photos
Dialogue: 0,0:27:37.04,0:27:38.62,Default,by photographer map\Nview controller.
Dialogue: 0,0:27:39.23,0:27:41.59,Default,Let's build a UI for this thing.
Dialogue: 0,0:27:42.32,0:27:43.80,Default,Actually, before we do that,
Dialogue: 0,0:27:43.80,0:27:47.31,Default,I always like to do my\Npublic API for any new class.
Dialogue: 0,0:27:47.66,0:27:50.31,Default,The public API for this\Nclass is exactly the same
Dialogue: 0,0:27:50.31,0:27:51.76,Default,as the public API for the photos
Dialogue: 0,0:27:51.76,0:27:53.96,Default,by photographer core data\Ntable view controller.
Dialogue: 0,0:27:54.49,0:27:58.69,Default,Okay? In fact, we just copy and\Npaste it here to this thing.
Dialogue: 0,0:27:59.17,0:28:00.98,Default,Alright? [Pause] Woops.
Dialogue: 0,0:28:01.50,0:28:03.33,Default,And of course we need\Nto be import here.
Dialogue: 0,0:28:03.96,0:28:07.34,Default,Okay? So it's the same thing.
Dialogue: 0,0:28:07.34,0:28:09.90,Default,You set this photographer\Nin our map view controller,
Dialogue: 0,0:28:10.11,0:28:13.14,Default,and instead of showing the\Nphotos by that photographer
Dialogue: 0,0:28:13.14,0:28:15.12,Default,in a table, it's going to\Nput them in a map view.
Dialogue: 0,0:28:15.21,0:28:16.97,Default,So let's go back\Nto our storyboard
Dialogue: 0,0:28:17.15,0:28:19.50,Default,and build the UI for this thing.
Dialogue: 0,0:28:19.50,0:28:21.90,Default,And so, let's make a\Nlot more space here.
Dialogue: 0,0:28:22.57,0:28:23.58,Default,And go like this.
Dialogue: 0,0:28:24.64,0:28:26.86,Default,Get our assistant\Neditor up here.
Dialogue: 0,0:28:26.86,0:28:29.00,Default,Let's go to automatic mode .
Dialogue: 0,0:28:29.63,0:28:34.33,Default,Go here. So, here is the\Ncode for our map photos
Dialogue: 0,0:28:34.33,0:28:35.84,Default,by photographer map\Nview controller,
Dialogue: 0,0:28:35.84,0:28:37.38,Default,we don't need any\Nof this business.
Dialogue: 0,0:28:38.39,0:28:39.89,Default,Clear that out.
Dialogue: 0,0:28:40.11,0:28:42.14,Default,We're going to need a map\Nview, so let's go ahead
Dialogue: 0,0:28:42.14,0:28:45.69,Default,and grab a map view, that is\Njust a view like text view
Dialogue: 0,0:28:45.69,0:28:47.68,Default,or any other view, here it\Nis right here, map view.
Dialogue: 0,0:28:47.82,0:28:51.11,Default,So I'm going to drag that\Nout, put this in here.
Dialogue: 0,0:28:51.28,0:28:54.07,Default,Maybe I want to do\Nits constraints,
Dialogue: 0,0:28:54.07,0:28:56.73,Default,already set to suggested\Nconstraints.
Dialogue: 0,0:28:56.73,0:28:58.07,Default,Let's go take a look at those
Dialogue: 0,0:28:58.07,0:28:59.46,Default,and make sure it did\Nsomething sensible.
Dialogue: 0,0:28:59.46,0:29:02.34,Default,Oh. Yep, looks very sensible, so\Nit's going to stick to the size,
Dialogue: 0,0:29:02.34,0:29:04.76,Default,so whatever size our self\Ndot view is it's going
Dialogue: 0,0:29:04.76,0:29:05.42,Default,to stick to it.
Dialogue: 0,0:29:05.79,0:29:08.08,Default,Let's create an outlet\Nfor this map view.
Dialogue: 0,0:29:08.23,0:29:10.76,Default,So I'm just control, dragging,\NI'll call it map view.
Dialogue: 0,0:29:11.55,0:29:14.18,Default,Alright? So we got\Nan outlet there.
Dialogue: 0,0:29:14.43,0:29:19.40,Default,Notice that we have this\Nerror and warning here.
Dialogue: 0,0:29:19.79,0:29:20.99,Default,Okay? What's the problem?
Dialogue: 0,0:29:20.99,0:29:23.73,Default,The problem is we have\Nto import MK map view.
Dialogue: 0,0:29:24.04,0:29:24.62,Default,So let's do that.
Dialogue: 0,0:29:25.31,0:29:28.45,Default,Import map kit slash map kit.
Dialogue: 0,0:29:28.79,0:29:31.07,Default,Now, I told you that map\Nkit, it's not enough just
Dialogue: 0,0:29:31.07,0:29:32.45,Default,to import map kit like you did
Dialogue: 0,0:29:32.45,0:29:33.88,Default,for everything else\Nwe've done so far.
Dialogue: 0,0:29:34.18,0:29:37.84,Default,We have to go to our project\Nsettings, over here, at the top,
Dialogue: 0,0:29:38.39,0:29:40.82,Default,and in our project settings,\Nalong the top, you're going
Dialogue: 0,0:29:40.82,0:29:42.85,Default,to see this thing here\Ncalled build phases.
Dialogue: 0,0:29:43.34,0:29:46.31,Default,And the build phases specifies\Nwhat frameworks we link with.
Dialogue: 0,0:29:46.91,0:29:48.85,Default,Link binary with\Nlibraries, okay?
Dialogue: 0,0:29:48.96,0:29:51.10,Default,So don't forget this part or\Nwhen you run your app it's going
Dialogue: 0,0:29:51.10,0:29:53.36,Default,to say oh, no such\Nclass, MK map view.
Dialogue: 0,0:29:53.98,0:29:55.34,Default,Alright? So we're just\Ngoing to hit plus.
Dialogue: 0,0:29:55.54,0:29:56.59,Default,Now when you do that\Nyou're going to see
Dialogue: 0,0:29:56.59,0:30:00.62,Default,that iOS 7 has a lot of\Nlibraries and frameworks
Dialogue: 0,0:30:00.75,0:30:01.75,Default,that you can pick from here.
Dialogue: 0,0:30:02.17,0:30:04.64,Default,And luckily it lets you\Nsearch them, so I'm just going
Dialogue: 0,0:30:04.64,0:30:06.27,Default,to type map, and\Nhere I get map kit.
Dialogue: 0,0:30:06.27,0:30:08.26,Default,So now I've included\Nmap kit, I'm linking it
Dialogue: 0,0:30:08.26,0:30:11.03,Default,in with my application\Nso it'll work.
Dialogue: 0,0:30:11.93,0:30:12.27,Default,Okay?
Dialogue: 0,0:30:13.09,0:30:15.53,Default,Alright, so we've\Ngot this map view.
Dialogue: 0,0:30:15.83,0:30:19.71,Default,One thing I want to do right\Noff the bat is set myself
Dialogue: 0,0:30:19.71,0:30:21.82,Default,to be this map view's\Ndelegate, okay?
Dialogue: 0,0:30:21.82,0:30:24.36,Default,Because I'm going to use all\Nthose map view delegate methods
Dialogue: 0,0:30:24.36,0:30:25.58,Default,we talked about in the slides.
Dialogue: 0,0:30:26.43,0:30:27.72,Default,So, I have this here.
Dialogue: 0,0:30:27.72,0:30:29.74,Default,So this is the setter\Nfor map view
Dialogue: 0,0:30:29.74,0:30:31.57,Default,and I'm just hitting\Nunderbar map view is map view,
Dialogue: 0,0:30:31.86,0:30:34.09,Default,and here I'm setting the map\Nviews delegate to be myself,
Dialogue: 0,0:30:34.39,0:30:36.18,Default,of course it's warning\Nme, because I have
Dialogue: 0,0:30:36.22,0:30:39.26,Default,to implement MK map view\Ndelegate, so I will do that.
Dialogue: 0,0:30:39.45,0:30:43.68,Default,MK map view delegate, and\Nnow the warning goes away
Dialogue: 0,0:30:43.68,0:30:45.61,Default,because there are\Nno required methods
Dialogue: 0,0:30:45.77,0:30:47.74,Default,in the MK map view\Ndelegate protocol.
Dialogue: 0,0:30:48.14,0:30:49.16,Default,All of them are optional.
Dialogue: 0,0:30:49.86,0:30:54.15,Default,Okay? Now, one other\Nthing that I probably want
Dialogue: 0,0:30:54.15,0:30:58.74,Default,to do here is what I always want\Nto do when I have a public API
Dialogue: 0,0:30:58.74,0:31:03.03,Default,that kind of sets my\Nmodel, which is to do things
Dialogue: 0,0:31:03.03,0:31:06.16,Default,like self dot title equals\Nthe photographer's name,
Dialogue: 0,0:31:06.16,0:31:08.35,Default,okay, that's a nice thing.
Dialogue: 0,0:31:08.78,0:31:13.17,Default,And [pause] I also, here, every\Ntime I set that photographer,
Dialogue: 0,0:31:13.37,0:31:16.75,Default,I kind of need to reset the\Nphotos by photographer, right?
Dialogue: 0,0:31:16.88,0:31:19.40,Default,Because the whole point here\Nis that I show the photos
Dialogue: 0,0:31:19.40,0:31:20.93,Default,by photographer, if you\Nchange the photographer,
Dialogue: 0,0:31:20.93,0:31:22.09,Default,I need to change those photos.
Dialogue: 0,0:31:22.49,0:31:24.79,Default,So, to do the photos\Nby photographer thing,
Dialogue: 0,0:31:25.01,0:31:30.30,Default,I am going to create a\N[pause] new property.
Dialogue: 0,0:31:31.18,0:31:34.11,Default,Okay? Called photos by\Nphotographer, so let's add that,
Dialogue: 0,0:31:34.24,0:31:38.26,Default,property, nonatomic strong, it's\Njust going to be an NS array,
Dialogue: 0,0:31:39.21,0:31:45.75,Default,NS array, start photos\Nby photographer.
Dialogue: 0,0:31:45.75,0:31:51.65,Default,[Pause] Okay, and this is\Ngoing to be of photo objects.
Dialogue: 0,0:31:52.02,0:31:54.01,Default,So let's go ahead and\Nimport photo here too.
Dialogue: 0,0:31:54.76,0:31:55.75,Default,We're going to need that.
Dialogue: 0,0:31:56.30,0:31:59.35,Default,Okay, and, here's the getter\Nfor photos by photographer.
Dialogue: 0,0:31:59.59,0:32:00.68,Default,Very, very simple, alright?
Dialogue: 0,0:32:00.98,0:32:03.34,Default,It's the getter, so I'm just\Nsaying if the photographer,
Dialogue: 0,0:32:03.34,0:32:06.10,Default,photos by photographer is\Nnot set yet, then I'm going
Dialogue: 0,0:32:06.10,0:32:07.56,Default,to go fetch them\Nfrom the database.
Dialogue: 0,0:32:07.62,0:32:10.22,Default,So I create a fetch\Nrequest, it's for photos.
Dialogue: 0,0:32:10.68,0:32:14.43,Default,I create a predicate, who took\Nequals self dot photographer,
Dialogue: 0,0:32:14.79,0:32:16.76,Default,and here, we're in\Nthe table view,
Dialogue: 0,0:32:16.76,0:32:18.38,Default,I set the fetch results\Ncontroller,
Dialogue: 0,0:32:18.56,0:32:19.40,Default,here I'm actually going
Dialogue: 0,0:32:19.40,0:32:21.57,Default,to execute the fetch\Nrequest in the context.
Dialogue: 0,0:32:22.14,0:32:25.05,Default,And that returns an array, which\Nis this array that I'm going
Dialogue: 0,0:32:25.05,0:32:27.34,Default,to store right here, and\Nthen we'll return it.
Dialogue: 0,0:32:28.51,0:32:30.23,Default,Now every time we\Nset the photographer,
Dialogue: 0,0:32:30.42,0:32:33.67,Default,I better reset this\Nthing to nil.
Dialogue: 0,0:32:34.86,0:32:37.32,Default,Okay? It's going to lazily do\Nthis fetch whenever someone
Dialogue: 0,0:32:37.32,0:32:39.35,Default,actually wants it,\Nbut I better set it
Dialogue: 0,0:32:39.35,0:32:40.89,Default,to nil every time the\Nphotographer changes,
Dialogue: 0,0:32:40.89,0:32:44.33,Default,otherwise it's not going to\Ndo this lazy instantiation.
Dialogue: 0,0:32:44.62,0:32:47.62,Default,This lazy instantiation is nice\Nbecause this is core data fetch,
Dialogue: 0,0:32:47.62,0:32:49.69,Default,but it's still work, and I\Ndon't want to do this work
Dialogue: 0,0:32:49.69,0:32:51.51,Default,until someone actually\Nwants those photos
Dialogue: 0,0:32:51.51,0:32:53.93,Default,by the photographer mechanism.
Dialogue: 0,0:32:54.91,0:32:56.71,Default,Alright. So the other\Nthing we need to do is,
Dialogue: 0,0:32:56.92,0:32:59.62,Default,when our map view is set\Nor when our model is set,
Dialogue: 0,0:32:59.62,0:33:01.66,Default,we need to update\Nthe annotations.
Dialogue: 0,0:33:01.94,0:33:03.56,Default,Okay? We've got all those\Nannotations on the map
Dialogue: 0,0:33:03.62,0:33:05.28,Default,that are going to be the\Nphotos by photographer,
Dialogue: 0,0:33:05.63,0:33:06.71,Default,so we got to update those.
Dialogue: 0,0:33:06.71,0:33:08.66,Default,So we're going to have a\Nmethod here called update,
Dialogue: 0,0:33:09.03,0:33:13.17,Default,what'd I call it,\Nmap view annotations.
Dialogue: 0,0:33:14.14,0:33:17.87,Default,And we're going to have call\Nthis both from here [pause],
Dialogue: 0,0:33:19.43,0:33:22.47,Default,when we set the map\Nview, and also from here,
Dialogue: 0,0:33:23.05,0:33:26.07,Default,[pause] when we set our model.
Dialogue: 0,0:33:26.21,0:33:28.59,Default,Because we don't know what\Norder this is going to happen.
Dialogue: 0,0:33:28.59,0:33:31.35,Default,We don't know if our model\Nis set before our map view
Dialogue: 0,0:33:31.60,0:33:33.85,Default,or if our map view is\Nset before our model.
Dialogue: 0,0:33:34.16,0:33:37.08,Default,Either way, this update map\Nview annotations better do the
Dialogue: 0,0:33:37.08,0:33:37.57,Default,right thing.
Dialogue: 0,0:33:38.12,0:33:41.46,Default,Okay? So that's why\Nwe're calling from both.
Dialogue: 0,0:33:41.46,0:33:42.23,Default,So, how are we going
Dialogue: 0,0:33:42.23,0:33:44.26,Default,to implement this update\Nmap view annotations?
Dialogue: 0,0:33:44.51,0:33:45.77,Default,Well, I told you what\Nwe're going to do,
Dialogue: 0,0:33:45.92,0:33:49.13,Default,we're going to make a photo\Nobject be an MK annotation
Dialogue: 0,0:33:49.45,0:33:51.07,Default,so that all we need\Nto do to update
Dialogue: 0,0:33:51.38,0:33:54.89,Default,that map view annotations is\Nadd the photos to the map.
Dialogue: 0,0:33:56.02,0:33:58.14,Default,Okay? So how are we\Ngoing to turn photo
Dialogue: 0,0:33:58.38,0:34:00.77,Default,into an [inaudible]\NMK annotation?
Dialogue: 0,0:34:01.35,0:34:03.16,Default,And the answer is two-fold.
Dialogue: 0,0:34:03.16,0:34:04.13,Default,There's two things\Nwe need to do.
Dialogue: 0,0:34:04.48,0:34:07.47,Default,One thing, we need to fix\Nour model, or our, you know,
Dialogue: 0,0:34:07.61,0:34:10.51,Default,core data database, to have\Nthe latitude and longitude,
Dialogue: 0,0:34:10.70,0:34:12.64,Default,otherwise, if we don't\Nwhere the photo is,
Dialogue: 0,0:34:12.87,0:34:14.28,Default,we obviously can't\Nshow it on there.
Dialogue: 0,0:34:14.49,0:34:17.09,Default,Right? So, I'm going\Nto add latitude,
Dialogue: 0,0:34:17.28,0:34:20.43,Default,luckily Flickr provides\Nthis information, longitude,
Dialogue: 0,0:34:20.80,0:34:23.02,Default,and while I'm here I'm also\Ngoing to add thumb nail URL,
Dialogue: 0,0:34:23.02,0:34:25.82,Default,and I'll show you what we can\Ndo with that in a moment too.
Dialogue: 0,0:34:26.12,0:34:28.96,Default,So a thumb nail URL is a\Nstring, it's actually a URL,
Dialogue: 0,0:34:28.96,0:34:30.24,Default,but strings the best we can do.
Dialogue: 0,0:34:30.46,0:34:32.62,Default,Whereas the latitude and\Nlongitude are doubles.
Dialogue: 0,0:34:33.27,0:34:35.35,Default,Okay? Double precision,\Npoint and point numbers.
Dialogue: 0,0:34:36.04,0:34:38.07,Default,Okay? So I'm just adding\Nthis to my database.
Dialogue: 0,0:34:38.07,0:34:39.77,Default,I'm going to go up here
Dialogue: 0,0:34:39.77,0:34:42.89,Default,and create my managed object\Nsubclasses for photo mania,
Dialogue: 0,0:34:42.89,0:34:46.37,Default,I only change photo, so let's\Njust only regenerate photo.
Dialogue: 0,0:34:46.79,0:34:49.65,Default,We'll put this, same\Nplace, as we usually do,
Dialogue: 0,0:34:49.65,0:34:52.13,Default,it's asking if I want to replace\Nthe other ones, of course I do,
Dialogue: 0,0:34:52.51,0:34:55.86,Default,and now our photo has a\Nlatitude and longitude.
Dialogue: 0,0:34:56.64,0:34:59.66,Default,Okay? Notice these are NS\Nnumbers here, because everything
Dialogue: 0,0:34:59.66,0:35:00.93,Default,in the database is an object.
Dialogue: 0,0:35:01.71,0:35:04.35,Default,Of course we need to\Nupdate Flickr's loader,
Dialogue: 0,0:35:04.35,0:35:08.08,Default,our photo plus Flickr category,\Nright, which does the loading
Dialogue: 0,0:35:08.08,0:35:11.14,Default,of all this stuff, to\Nload up the latitude,
Dialogue: 0,0:35:11.84,0:35:13.13,Default,here I have a thing for that,
Dialogue: 0,0:35:13.13,0:35:15.78,Default,so here's the latitude being\Nloaded up, here's the longitude.
Dialogue: 0,0:35:15.78,0:35:17.42,Default,It's just looking at\Nthe photo dictionary
Dialogue: 0,0:35:17.85,0:35:19.22,Default,for the latitude and longitude.
Dialogue: 0,0:35:19.22,0:35:21.37,Default,I actually take the double\Nvalue and then turn it
Dialogue: 0,0:35:21.37,0:35:24.62,Default,into an NS number just\Nin case this is a string.
Dialogue: 0,0:35:25.47,0:35:27.86,Default,Okay? Cause strings\Nimplement double value too,
Dialogue: 0,0:35:28.15,0:35:30.11,Default,or that'll interpret\Nthemselves as a double value,
Dialogue: 0,0:35:30.11,0:35:31.55,Default,so I'm just going\Nto be double safe.
Dialogue: 0,0:35:31.55,0:35:33.44,Default,I'm not quite sure what I'm\Ngoing to get back from Flickr,
Dialogue: 0,0:35:33.44,0:35:36.02,Default,whether it's a string or a\Nnumber in the [inaudible],
Dialogue: 0,0:35:36.02,0:35:37.85,Default,so I'm just being safe there.
Dialogue: 0,0:35:38.04,0:35:39.71,Default,And then here at\Nthe thumb nail URL,
Dialogue: 0,0:35:39.71,0:35:42.56,Default,I'm just grabbing the\NFlickr photo format square,
Dialogue: 0,0:35:42.56,0:35:43.36,Default,which is what you're using
Dialogue: 0,0:35:43.36,0:35:45.90,Default,for your thumb nail\Nalso in your homework.
Dialogue: 0,0:35:46.10,0:35:49.25,Default,Okay? So now we've got our\Ndata model being loaded
Dialogue: 0,0:35:49.25,0:35:53.07,Default,up with photos from Flickr\Nthat have enough information.
Dialogue: 0,0:35:53.36,0:35:57.31,Default,Now we need to make photo be an\NMK annotation, and to do that,
Dialogue: 0,0:35:57.39,0:35:59.31,Default,I'm going to add\Nanother category.
Dialogue: 0,0:36:00.05,0:36:02.38,Default,Okay? I could put in\Nthat Flickr category,
Dialogue: 0,0:36:02.59,0:36:04.10,Default,but it's not really\Na Flickr thing
Dialogue: 0,0:36:04.10,0:36:05.87,Default,that it implements\NMK annotation.
Dialogue: 0,0:36:05.93,0:36:09.38,Default,So I'm going to create a new\Ncategory called the annotation
Dialogue: 0,0:36:09.38,0:36:11.11,Default,category, on photo.
Dialogue: 0,0:36:11.94,0:36:16.65,Default,Okay? We'll put that, it's\Nstill part of our model.
Dialogue: 0,0:36:16.65,0:36:20.01,Default,Here's the annotation\Ninterface, okay?
Dialogue: 0,0:36:20.01,0:36:21.83,Default,And, and this is, is empty.
Dialogue: 0,0:36:22.09,0:36:23.50,Default,So, what am I going to do here?
Dialogue: 0,0:36:23.50,0:36:28.11,Default,Actually, all I'm going to do is\Nsay photo is an MK annotation.
Dialogue: 0,0:36:28.84,0:36:31.50,Default,Okay? And I'll have to import.
Dialogue: 0,0:36:32.14,0:36:33.05,Default,[Inaudible] here.
Dialogue: 0,0:36:33.89,0:36:36.64,Default,Okay? So I've said that\Nphoto is an annotation.
Dialogue: 0,0:36:36.86,0:36:39.80,Default,Now I can put photos\Nin that map view.
Dialogue: 0,0:36:40.55,0:36:43.56,Default,Okay? But if I look at the\Nimplementation over here,
Dialogue: 0,0:36:43.90,0:36:46.31,Default,you're going to see\Nthat there's a warning.
Dialogue: 0,0:36:46.83,0:36:48.41,Default,What do you think\Nthis warning is?
Dialogue: 0,0:36:49.79,0:36:54.47,Default,Nobody? [Pause] Shirley, yes?
Dialogue: 0,0:36:55.37,0:36:56.47,Default,Yes, missing methods.
Dialogue: 0,0:36:56.50,0:36:58.06,Default,Because I said, here,
Dialogue: 0,0:36:58.25,0:37:00.53,Default,that I implement the\NMK annotation protocol,
Dialogue: 0,0:37:00.72,0:37:03.02,Default,but I don't implement that\Ncoordinate thing, so if I click
Dialogue: 0,0:37:03.02,0:37:05.91,Default,on this it says property\Ncoordinate has to be defined.
Dialogue: 0,0:37:06.49,0:37:08.86,Default,Okay? So let's implement\Ncoordinate here.
Dialogue: 0,0:37:10.16,0:37:11.38,Default,It's really easy to do.
Dialogue: 0,0:37:11.59,0:37:13.99,Default,We just have to return a\NCL location coordinate.
Dialogue: 0,0:37:13.99,0:37:16.50,Default,I'm going to get it by\Njust getting my latitude
Dialogue: 0,0:37:16.50,0:37:18.13,Default,and longitude as double values.
Dialogue: 0,0:37:18.41,0:37:20.96,Default,Remember, these are NS\Nnumbers, these are doubles.
Dialogue: 0,0:37:22.30,0:37:24.15,Default,Okay? So now I don't\Nhave that warning.
Dialogue: 0,0:37:24.35,0:37:27.84,Default,Now a photo is an ID angle\Nbracket MK annotation,
Dialogue: 0,0:37:28.10,0:37:29.69,Default,and now I can just put a photo
Dialogue: 0,0:37:29.69,0:37:32.58,Default,into a map view as\Nan MK annotation.
Dialogue: 0,0:37:32.58,0:37:33.73,Default,So let's go back and do that.
Dialogue: 0,0:37:34.25,0:37:35.32,Default,There's my map view.
Dialogue: 0,0:37:35.32,0:37:37.35,Default,Here's the update\Nmap view annotations.
Dialogue: 0,0:37:37.63,0:37:42.00,Default,First, I'm going to remove all\Nof our existing annotations.
Dialogue: 0,0:37:42.52,0:37:47.04,Default,[Pause] Okay, so I'm just\Nremoving all the annotations
Dialogue: 0,0:37:47.04,0:37:49.21,Default,that are currently in the\Nmap view, and then I'm going
Dialogue: 0,0:37:49.21,0:37:55.14,Default,to add annotations self\Ndot photos by photographer.
Dialogue: 0,0:37:55.65,0:37:57.70,Default,And I can, these\Nare photo stars,
Dialogue: 0,0:37:57.76,0:38:00.63,Default,but they're also ID angle\Nbracket MK annotations.
Dialogue: 0,0:38:00.63,0:38:01.70,Default,So I can call them here.
Dialogue: 0,0:38:02.28,0:38:05.51,Default,Okay? If we look at\Nthe documentation
Dialogue: 0,0:38:05.51,0:38:07.57,Default,for add annotations,\Nyou'll see it takes an array
Dialogue: 0,0:38:07.57,0:38:10.87,Default,of MK annotations,\Nand a photo is that.
Dialogue: 0,0:38:10.87,0:38:13.67,Default,I'm going to do another cool\Nthing, which is I'm going
Dialogue: 0,0:38:14.05,0:38:18.06,Default,to zoom the map in to show all\Nthe photos by this photographer.
Dialogue: 0,0:38:19.24,0:38:22.11,Default,Okay? Now I'm doing this in an\Nanimated way, but that just,
Dialogue: 0,0:38:22.28,0:38:24.74,Default,that's not really going to like\Nzoom out and then zoom back
Dialogue: 0,0:38:24.74,0:38:27.44,Default,in like I was talking about,\Nit's not going to zoom on over
Dialogue: 0,0:38:27.78,0:38:29.46,Default,to where it is, so it's\Nnot great animation,
Dialogue: 0,0:38:29.46,0:38:30.42,Default,you're probably going to want
Dialogue: 0,0:38:30.42,0:38:32.89,Default,to do something much\Nbetter than this.
Dialogue: 0,0:38:33.58,0:38:37.09,Default,Okay? So that's really all\Nwe need to make this work.
Dialogue: 0,0:38:37.43,0:38:40.10,Default,One thing, which\Nyou've I'm sure learned,
Dialogue: 0,0:38:40.52,0:38:44.16,Default,is that we've changed\Nour core data base model,
Dialogue: 0,0:38:44.31,0:38:47.17,Default,so the photo mania that's\Nalready on my device
Dialogue: 0,0:38:47.17,0:38:49.40,Default,or my simulator, I'm going\Nto want to delete that.
Dialogue: 0,0:38:49.59,0:38:52.16,Default,Okay? Because it's database\Nis now incompatible.
Dialogue: 0,0:38:52.64,0:38:54.15,Default,It doesn't have latitude\Nand longitude
Dialogue: 0,0:38:54.15,0:38:55.34,Default,and thumb nail URL in there.
Dialogue: 0,0:38:55.85,0:38:57.75,Default,So let's go ahead and run this.
Dialogue: 0,0:38:59.12,0:39:01.33,Default,[Pause] Hopefully our\Nnetwork is working
Dialogue: 0,0:39:01.33,0:39:02.82,Default,and we can get stuff\Nfrom Flickr.
Dialogue: 0,0:39:05.14,0:39:06.94,Default,There it is, we got some stuff.
Dialogue: 0,0:39:06.94,0:39:10.07,Default,And now, what we'd like to\Nhave happen here is we click
Dialogue: 0,0:39:10.07,0:39:12.73,Default,and instead of a table\Nview here, right,
Dialogue: 0,0:39:12.98,0:39:14.28,Default,we'd like to see this map.
Dialogue: 0,0:39:15.23,0:39:16.90,Default,Okay? So how do we\Ndo that segue?
Dialogue: 0,0:39:16.90,0:39:19.36,Default,Alright, we have this\NiPhone thing here.
Dialogue: 0,0:39:20.08,0:39:22.28,Default,We've got this nice map\Nview thing ready to go,
Dialogue: 0,0:39:22.51,0:39:25.63,Default,we want to segue to it, so\Nthis segue that goes here,
Dialogue: 0,0:39:25.89,0:39:27.08,Default,we want it to go down here.
Dialogue: 0,0:39:28.45,0:39:29.51,Default,Really easy to do.
Dialogue: 0,0:39:29.73,0:39:32.28,Default,All we have to do is make\Nsure it all fits on screen,
Dialogue: 0,0:39:32.28,0:39:33.33,Default,so I can show it to you.
Dialogue: 0,0:39:34.00,0:39:34.58,Default,Here we go.
Dialogue: 0,0:39:34.58,0:39:37.63,Default,I'm just going to segue by\Ncontrol, dragging from this row
Dialogue: 0,0:39:37.63,0:39:42.22,Default,in the photographer's table\Nview, down to our new one, okay?
Dialogue: 0,0:39:42.35,0:39:44.22,Default,It's a push, because we're\Nin the navigation controller,
Dialogue: 0,0:39:44.22,0:39:46.44,Default,and knows it took away this\Nsegue because I can only segue
Dialogue: 0,0:39:46.44,0:39:49.72,Default,from this row to one\Nplace, and now I'm segueing
Dialogue: 0,0:39:49.88,0:39:50.98,Default,to our map view down here.
Dialogue: 0,0:39:52.24,0:39:53.93,Default,Okay? So now we have this segue.
Dialogue: 0,0:39:54.24,0:39:56.94,Default,Now what about photographers\Ncontrol,
Dialogue: 0,0:39:57.10,0:39:58.27,Default,core data table view controller?
Dialogue: 0,0:39:58.27,0:40:00.65,Default,It has to prepare for\Nsegue properly, right?
Dialogue: 0,0:40:00.92,0:40:03.42,Default,So here's where it's prepare\Nfor segue with the photos
Dialogue: 0,0:40:03.42,0:40:06.76,Default,by photographer core data\Ntable view controller, so,
Dialogue: 0,0:40:06.76,0:40:08.39,Default,we're going to do\Nthe same thing here
Dialogue: 0,0:40:08.68,0:40:12.60,Default,with a [pause] map\Nview controller.
Dialogue: 0,0:40:13.26,0:40:13.57,Default,Okay?
Dialogue: 0,0:40:14.05,0:40:16.12,Default,So here, this is almost\Nexactly the same code,
Dialogue: 0,0:40:16.12,0:40:17.24,Default,it's just that I'm doing photos
Dialogue: 0,0:40:17.24,0:40:19.81,Default,by photographer map view\Ncontroller instead of photos
Dialogue: 0,0:40:19.81,0:40:22.27,Default,by photographer core data\Ntable view controller.
Dialogue: 0,0:40:22.53,0:40:25.47,Default,And we have these because we\Nhave to import, so let's go
Dialogue: 0,0:40:25.47,0:40:27.52,Default,and import our photos
Dialogue: 0,0:40:27.59,0:40:29.38,Default,by photographer map\Nview controller, okay?
Dialogue: 0,0:40:29.95,0:40:32.65,Default,Hopefully it gets rid of\Nall our worms, that's good.
Dialogue: 0,0:40:32.93,0:40:36.10,Default,So now we have this\Nsegue, so let's try again.
Dialogue: 0,0:40:36.69,0:40:38.63,Default,And hopefully our\Nnew segue will work.
Dialogue: 0,0:40:38.73,0:40:40.63,Default,We got the photographers,\Nwe click,
Dialogue: 0,0:40:40.98,0:40:42.72,Default,we got pins on the map, okay?
Dialogue: 0,0:40:42.86,0:40:46.14,Default,Showing all those photos by that\Nphotographer, and if we click
Dialogue: 0,0:40:46.14,0:40:50.47,Default,on a pin, it's actually going to\Nshow us the title and subtitle.
Dialogue: 0,0:40:50.68,0:40:51.99,Default,None of these have subtitles,
Dialogue: 0,0:40:51.99,0:40:54.46,Default,let's see if we can find\Nsomebody who has subtitle.
Dialogue: 0,0:40:54.99,0:40:56.68,Default,There we go, there's one,\Nthis person gets around,
Dialogue: 0,0:40:56.68,0:40:57.77,Default,from Scotland all the way
Dialogue: 0,0:40:57.77,0:41:00.13,Default,down to somewhere off the\Ncoast of Africa there.
Dialogue: 0,0:41:00.88,0:41:05.57,Default,Okay? So this is kind of cool,\Nbut we can't do our next step
Dialogue: 0,0:41:05.57,0:41:09.18,Default,of our segue, we can't segue\Nto showing the photo, and also,
Dialogue: 0,0:41:09.18,0:41:12.16,Default,wouldn't it be cool if we\Nhad a little thumb nail
Dialogue: 0,0:41:12.30,0:41:13.73,Default,of the photo in here?
Dialogue: 0,0:41:14.11,0:41:15.33,Default,So that we could kind of look
Dialogue: 0,0:41:15.33,0:41:17.64,Default,around at the various\Nphotos taken by this guy
Dialogue: 0,0:41:17.64,0:41:19.70,Default,until we find the one we\Nwant, and then we'll click
Dialogue: 0,0:41:19.70,0:41:23.37,Default,on something over here to segue\Nover to our showing the photo
Dialogue: 0,0:41:23.48,0:41:24.95,Default,in its grand, all its grandeur.
Dialogue: 0,0:41:25.37,0:41:26.55,Default,Okay? So let's do that.
Dialogue: 0,0:41:26.55,0:41:28.25,Default,Let's put these accessory\Nviews in.
Dialogue: 0,0:41:28.81,0:41:31.84,Default,Let's go back here to\Nour map view controller.
Dialogue: 0,0:41:32.85,0:41:33.86,Default,Some space.
Dialogue: 0,0:41:34.52,0:41:35.98,Default,Alright, so there's our\Nmap view controller,
Dialogue: 0,0:41:35.98,0:41:36.91,Default,what we've done so far.
Dialogue: 0,0:41:37.31,0:41:39.94,Default,And now we're going to do\Nthat map view delegate method,
Dialogue: 0,0:41:39.94,0:41:40.94,Default,this is our first one.
Dialogue: 0,0:41:41.30,0:41:46.87,Default,This is the one that returns\Nan MK annotation view given a
Dialogue: 0,0:41:46.87,0:41:48.18,Default,certain annotation.
Dialogue: 0,0:41:49.49,0:41:52.52,Default,Okay? So this is called map\Nview, view for annotation,
Dialogue: 0,0:41:52.52,0:41:54.00,Default,it's going to give an\Nannotation, that's going
Dialogue: 0,0:41:54.00,0:41:56.58,Default,to be one of our photos\Nand it's going to ask us
Dialogue: 0,0:41:56.82,0:41:59.11,Default,to return a view\Nfor that annotation.
Dialogue: 0,0:41:59.99,0:42:03.51,Default,I think for speed here I have\Nsomething, yeah, let's do that.
Dialogue: 0,0:42:03.51,0:42:06.17,Default,Okay, so this is going to\Ndo what we saw on the slides
Dialogue: 0,0:42:06.17,0:42:07.94,Default,where it's going\Nto have a reuse ID.
Dialogue: 0,0:42:07.94,0:42:10.39,Default,I like, this, by the way, is\Na good code snippet to have.
Dialogue: 0,0:42:10.39,0:42:12.17,Default,You can see this is kind\Nof completely generic
Dialogue: 0,0:42:12.44,0:42:14.42,Default,for doing a view for\Nannotation and a map view.
Dialogue: 0,0:42:14.83,0:42:17.46,Default,I like to use the name\Nof my class sometimes
Dialogue: 0,0:42:17.46,0:42:18.70,Default,as my reuse identifier,
Dialogue: 0,0:42:18.70,0:42:22.15,Default,that's pretty unique\Nthing to do for reuse.
Dialogue: 0,0:42:22.77,0:42:23.46,Default,Here's the DQ.
Dialogue: 0,0:42:23.46,0:42:26.41,Default,If the DQ doesn't work, I\Nhave to alloc init this thing,
Dialogue: 0,0:42:26.73,0:42:29.02,Default,I still wanted to show a call\Nout, I want it to be a pin
Dialogue: 0,0:42:29.41,0:42:32.71,Default,and then here I'm setting up the\Nview with anything I need to set
Dialogue: 0,0:42:32.71,0:42:34.23,Default,up here, it's just\Nsetting the annotation.
Dialogue: 0,0:42:35.32,0:42:38.94,Default,So, inside here is where\Nwe want to set up the left
Dialogue: 0,0:42:38.94,0:42:40.08,Default,and right accessory views.
Dialogue: 0,0:42:40.94,0:42:41.71,Default,So, let's do that.
Dialogue: 0,0:42:42.18,0:42:44.55,Default,So the left one is going\Nto be UI image view.
Dialogue: 0,0:42:44.55,0:42:46.84,Default,Okay? So I'm going to\Ncreate an image view here.
Dialogue: 0,0:42:48.11,0:42:50.71,Default,UI image view alloc init.
Dialogue: 0,0:42:51.62,0:42:55.44,Default,And I'm going to actually alloc\Ninit with frame and this is one
Dialogue: 0,0:42:55.44,0:42:57.63,Default,of the places in iOS\NI really don't like.
Dialogue: 0,0:42:57.97,0:43:02.92,Default,There is no way, no API, to find\Nout how big is that call out?
Dialogue: 0,0:43:04.01,0:43:06.21,Default,Okay? So I'd really like\Nto know how big that call
Dialogue: 0,0:43:06.21,0:43:08.62,Default,out so I can make my\Nimage view be a good size
Dialogue: 0,0:43:08.62,0:43:10.09,Default,to really fit there, okay?
Dialogue: 0,0:43:10.13,0:43:11.67,Default,So this is a place\Nwhere you have to,
Dialogue: 0,0:43:11.67,0:43:14.03,Default,unfortunately, put\Nmagic numbers.
Dialogue: 0,0:43:14.54,0:43:16.56,Default,Okay? And the magic\Nnumbers I found
Dialogue: 0,0:43:16.56,0:43:20.18,Default,that really work is an\Nimage view that is 46 by 46,
Dialogue: 0,0:43:20.18,0:43:23.61,Default,that seems to really fit\Nnicely in that left call
Dialogue: 0,0:43:23.61,0:43:25.17,Default,out accessory view, right there.
Dialogue: 0,0:43:25.26,0:43:28.28,Default,So that's kind of an\Nunfortunate piece of this.
Dialogue: 0,0:43:28.96,0:43:31.41,Default,So now I'm just going to\Nset that as the left call
Dialogue: 0,0:43:31.41,0:43:35.50,Default,out accessory view, and\Nthen the right one is going
Dialogue: 0,0:43:35.50,0:43:37.40,Default,to be a button, I just\Nwant to do a button,
Dialogue: 0,0:43:37.40,0:43:39.34,Default,so I think I have a\Ncode for that one, yeah,
Dialogue: 0,0:43:39.34,0:43:41.28,Default,the disclosure button, so\Nthat's this code right here.
Dialogue: 0,0:43:41.28,0:43:43.67,Default,So I'm just going to create a\NUI button, alloc init, okay?
Dialogue: 0,0:43:44.03,0:43:46.07,Default,I'm going to set\Nits background image
Dialogue: 0,0:43:46.07,0:43:48.46,Default,to be this disclosure\Nimage I have right here.
Dialogue: 0,0:43:49.05,0:43:52.82,Default,So let me go down here\Nto my image assets.
Dialogue: 0,0:43:53.36,0:43:55.58,Default,And let's drag this\Nin, like that.
Dialogue: 0,0:43:55.67,0:43:57.26,Default,Disclosure, I don't have\Na high-rise version,
Dialogue: 0,0:43:57.26,0:43:57.91,Default,but that's okay.
Dialogue: 0,0:43:57.97,0:44:01.85,Default,This is kind of, this is not\Na great solution, by the way,
Dialogue: 0,0:44:01.85,0:44:04.39,Default,to do an image here,\Nbecause really we want
Dialogue: 0,0:44:04.39,0:44:09.30,Default,to respect the tint color of the\Nmap view and that arrow is blue.
Dialogue: 0,0:44:10.19,0:44:10.77,Default,So that's bad.
Dialogue: 0,0:44:10.77,0:44:14.17,Default,It'd be much better to either\Ndraw it or if we are going
Dialogue: 0,0:44:14.17,0:44:16.14,Default,to use an image, you should\Ncome to Friday's section
Dialogue: 0,0:44:16.14,0:44:17.70,Default,and understand how\Nto change the color
Dialogue: 0,0:44:17.70,0:44:19.36,Default,of an image using core image.
Dialogue: 0,0:44:19.36,0:44:20.38,Default,Okay? That's what we're talking
Dialogue: 0,0:44:20.38,0:44:21.74,Default,about in Friday's\Nsection this week.
Dialogue: 0,0:44:22.25,0:44:23.21,Default,Little plug for that.
Dialogue: 0,0:44:23.79,0:44:26.23,Default,But anyway, for demo\Npurposes I'll use this thing.
Dialogue: 0,0:44:26.23,0:44:29.21,Default,Now I'm going to size to fit\Nthis button to fit that image
Dialogue: 0,0:44:29.21,0:44:30.75,Default,that I just did, and\Nthen I'm going to set it
Dialogue: 0,0:44:30.75,0:44:33.45,Default,as the right call out\Naccessory view right there.
Dialogue: 0,0:44:34.22,0:44:34.79,Default,Okay? Question?
Dialogue: 0,0:44:35.52,0:44:38.80,Default,[ Inaudible Background\NQuestion ]
Dialogue: 0,0:44:39.30,0:44:43.03,Default,You mean is the, the,\Nyou know, I'm not sure.
Dialogue: 0,0:44:43.69,0:44:46.45,Default,I believe it will size if\Nyou make a big view in there,
Dialogue: 0,0:44:46.45,0:44:48.92,Default,it'll make it bigger, but it\Nstarts to not look very good,
Dialogue: 0,0:44:49.13,0:44:50.59,Default,so you kind of want\Nto pick sizes
Dialogue: 0,0:44:50.59,0:44:52.05,Default,that make it stay the same size
Dialogue: 0,0:44:52.05,0:44:53.24,Default,because of the title\Nand subtitle.
Dialogue: 0,0:44:53.51,0:44:55.56,Default,It's a little bit, the\Nwhole thing with the call
Dialogue: 0,0:44:55.56,0:44:58.32,Default,out thing is a little bit, kind\Nof, you have to tweak it pixel
Dialogue: 0,0:44:58.32,0:45:00.29,Default,by or point by point,\Nunfortunately.
Dialogue: 0,0:45:00.93,0:45:05.46,Default,So, let's go ahead and take\Na look at what we got so far.
Dialogue: 0,0:45:06.48,0:45:08.99,Default,Alright? So now if we look at\Na photo and we do the call out.
Dialogue: 0,0:45:09.61,0:45:11.04,Default,We have room for the image.
Dialogue: 0,0:45:11.04,0:45:12.31,Default,We're not putting the\Nimage in there yet,
Dialogue: 0,0:45:12.63,0:45:13.67,Default,and we have this little button,
Dialogue: 0,0:45:13.67,0:45:15.16,Default,which when we click\Non does nothing.
Dialogue: 0,0:45:15.58,0:45:16.82,Default,Okay? So we're getting closer.
Dialogue: 0,0:45:16.82,0:45:18.97,Default,So let's put this image in\Nthere, and let's make it
Dialogue: 0,0:45:18.97,0:45:20.59,Default,so clicking on this segues.
Dialogue: 0,0:45:22.02,0:45:25.95,Default,Alright. So, how do we put\Nthis image into the image view?
Dialogue: 0,0:45:25.95,0:45:27.50,Default,Well, I'm going to\Nhave a little method
Dialogue: 0,0:45:27.50,0:45:30.43,Default,to do it here called,\Nwhat did I call this?
Dialogue: 0,0:45:30.43,0:45:32.01,Default,Update left call\Naccessory, yeah,
Dialogue: 0,0:45:32.36,0:45:34.54,Default,so here's my method\Nthat does this.
Dialogue: 0,0:45:34.71,0:45:35.96,Default,This looks like maybe\Na lot of code,
Dialogue: 0,0:45:35.96,0:45:37.12,Default,but it's actually not that much.
Dialogue: 0,0:45:37.12,0:45:39.93,Default,Mostly what I'm doing\Nis introspection to find
Dialogue: 0,0:45:39.93,0:45:42.45,Default,out if the left call\Nout accessory view is,
Dialogue: 0,0:45:42.45,0:45:44.30,Default,in fact, an image view.
Dialogue: 0,0:45:44.75,0:45:48.32,Default,Because I might have multiple\Npins with different call outs.
Dialogue: 0,0:45:48.32,0:45:49.75,Default,Some of them might\Nbe showing photos,
Dialogue: 0,0:45:49.75,0:45:51.40,Default,but some might be\Nshowing something else.
Dialogue: 0,0:45:51.62,0:45:53.42,Default,And maybe those are\Nsomething else they don't have
Dialogue: 0,0:45:53.59,0:45:55.57,Default,in image view as a the left\Ncall out accessory view.
Dialogue: 0,0:45:55.97,0:45:59.23,Default,Alright? So I'm both checking\Nto make sure that my call,
Dialogue: 0,0:45:59.23,0:46:01.61,Default,left call out is an image\Nview, I'm also checking
Dialogue: 0,0:46:01.61,0:46:04.22,Default,to make sure my annotation\Nis a photo, right,
Dialogue: 0,0:46:04.22,0:46:05.13,Default,and not something else.
Dialogue: 0,0:46:05.32,0:46:06.75,Default,Because it's perfectly\Nreasonable on a map
Dialogue: 0,0:46:06.78,0:46:09.05,Default,to have annotations,\Nsome of which are photos,
Dialogue: 0,0:46:09.05,0:46:10.22,Default,some of which are\Nsomething else.
Dialogue: 0,0:46:10.22,0:46:11.86,Default,Okay? The hometown\Nof the photographer
Dialogue: 0,0:46:11.86,0:46:12.78,Default,or something like that.
Dialogue: 0,0:46:12.78,0:46:16.24,Default,So that's what mostly what this\Nis it just is introspection
Dialogue: 0,0:46:16.31,0:46:16.99,Default,of those things.
Dialogue: 0,0:46:17.27,0:46:19.58,Default,Once I have a photo\Nand an image view,
Dialogue: 0,0:46:19.78,0:46:22.52,Default,then all I'm doing is\Nthis horrendous image
Dialogue: 0,0:46:22.52,0:46:24.22,Default,with image data, data\Nwith contents URL,
Dialogue: 0,0:46:24.22,0:46:25.95,Default,and why is it horrendous?
Dialogue: 0,0:46:25.95,0:46:27.62,Default,Of course because I'm\Nblocking the main queue,
Dialogue: 0,0:46:27.62,0:46:30.07,Default,but this is a demo so I get\Nto do it, you get to do it
Dialogue: 0,0:46:30.07,0:46:31.93,Default,in your homework, but I do.
Dialogue: 0,0:46:32.08,0:46:33.97,Default,So, this is going to\Nblock the main thread
Dialogue: 0,0:46:33.97,0:46:36.04,Default,for a short amount while\Nit goes out to Flickr
Dialogue: 0,0:46:36.04,0:46:38.38,Default,to fetch it, but\Nyou get the idea.
Dialogue: 0,0:46:38.38,0:46:40.20,Default,I put the warning in,\NI'm sure I'll go back
Dialogue: 0,0:46:40.20,0:46:41.98,Default,and fix it some other\Nday, yeah, sure.
Dialogue: 0,0:46:42.44,0:46:44.27,Default,Okay. So that's that.
Dialogue: 0,0:46:44.27,0:46:49.28,Default,Let's go ahead and look at that.
Dialogue: 0,0:46:49.41,0:46:51.79,Default,[Pause] Alright, so now if we\Nclick on something and we click
Dialogue: 0,0:46:51.79,0:46:54.04,Default,on a pin, hopefully\Nwe'll get an image,
Dialogue: 0,0:46:54.04,0:46:56.28,Default,maybe that guy didn't have,\Noh, that's not working,
Dialogue: 0,0:46:56.37,0:46:57.41,Default,why is that not working?
Dialogue: 0,0:46:57.41,0:47:00.14,Default,Oh! I, no, that's not why.
Dialogue: 0,0:47:01.11,0:47:02.13,Default,Okay, so, oh, I see\Nwhy [laughing],
Dialogue: 0,0:47:02.26,0:47:04.04,Default,because we never called this.
Dialogue: 0,0:47:04.22,0:47:05.39,Default,Okay, it'd be nice to call that.
Dialogue: 0,0:47:05.39,0:47:06.25,Default,It would probably work better.
Dialogue: 0,0:47:06.74,0:47:08.15,Default,So let's call that from here.
Dialogue: 0,0:47:08.80,0:47:13.26,Default,Okay, this is the\Nview for annotation.
Dialogue: 0,0:47:13.58,0:47:15.36,Default,So I'm calling this left\Ncall out here from view
Dialogue: 0,0:47:15.36,0:47:17.76,Default,for annotation, right, because\NI'm returning the little view
Dialogue: 0,0:47:17.76,0:47:20.57,Default,for annotation, that includes\Nbuilding the call out view,
Dialogue: 0,0:47:20.57,0:47:23.00,Default,so that'll work a lot\Nbetter, I'm going to guess.
Dialogue: 0,0:47:24.39,0:47:25.99,Default,Alright, so here we go here.
Dialogue: 0,0:47:26.30,0:47:28.52,Default,Click this up, nice, that\Nlooks pretty good, right?
Dialogue: 0,0:47:28.52,0:47:30.84,Default,So if we click on each one, we\Nkind of get a little look at it
Dialogue: 0,0:47:30.84,0:47:33.06,Default,and it kind of helps us decide\Nwhich one we want to step on,
Dialogue: 0,0:47:33.26,0:47:34.54,Default,press on, and we'll\Npress on this one.
Dialogue: 0,0:47:34.84,0:47:36.68,Default,Now there's a problem with\Nthe way I've done this though.
Dialogue: 0,0:47:36.68,0:47:38.81,Default,Let's find somebody who\Nhas a lot of photos.
Dialogue: 0,0:47:38.97,0:47:40.77,Default,Hopefully somebody\Nhas a lot of photos.
Dialogue: 0,0:47:40.77,0:47:45.24,Default,Somebody, well, eh, looks like\N15 photos is, or 16, alright.
Dialogue: 0,0:47:45.24,0:47:46.16,Default,So let's click on this guy.
Dialogue: 0,0:47:46.39,0:47:48.21,Default,When I click on this guy,\Nlook, it's taking a long time.
Dialogue: 0,0:47:48.21,0:47:50.43,Default,Okay? And this is a fast\NStanford network, so,
Dialogue: 0,0:47:50.43,0:47:53.23,Default,it's not too slow, but it still,\Nit's blocking the main thread,
Dialogue: 0,0:47:53.23,0:47:54.69,Default,but it's blocking the\Nmain thread a lot.
Dialogue: 0,0:47:55.10,0:47:55.87,Default,And why is that?
Dialogue: 0,0:47:55.87,0:47:58.97,Default,That's because it's fetching\Nthe thumb nail image for all 16
Dialogue: 0,0:47:58.97,0:48:00.57,Default,of those photos, okay?
Dialogue: 0,0:48:01.08,0:48:02.49,Default,All at once up front.
Dialogue: 0,0:48:02.49,0:48:05.32,Default,So we do not want to do that,\Nwe only want to do this fetch
Dialogue: 0,0:48:05.56,0:48:06.72,Default,when you click on the pin.
Dialogue: 0,0:48:07.14,0:48:10.71,Default,So we're going to implement\Nanother map view delegate
Dialogue: 0,0:48:10.71,0:48:13.58,Default,method, and you can see how\Nmany methods, delegate methods,
Dialogue: 0,0:48:13.58,0:48:14.90,Default,the map view has, quite a few.
Dialogue: 0,0:48:15.17,0:48:19.26,Default,We want this one down here,\Ndid select annotation view.
Dialogue: 0,0:48:19.51,0:48:21.46,Default,That's get called when\Nthe pin gets clicked on,
Dialogue: 0,0:48:21.46,0:48:23.81,Default,so I'm just going to move\Nthis update left call
Dialogue: 0,0:48:23.81,0:48:24.99,Default,out accessory view down to here.
Dialogue: 0,0:48:25.78,0:48:30.40,Default,Okay? So now, when we run,\Neven the 16 guy is going
Dialogue: 0,0:48:30.40,0:48:32.87,Default,to instantly come up, because\Nyou're not doing any fetching,
Dialogue: 0,0:48:32.87,0:48:35.59,Default,but when we click on\Nthis, little delay, okay?
Dialogue: 0,0:48:35.59,0:48:38.24,Default,Now I can't see all 16 of things\Nbecause they're all stacked up,
Dialogue: 0,0:48:38.24,0:48:40.65,Default,it's a little problem with\Nour UI, we probably want
Dialogue: 0,0:48:40.65,0:48:43.19,Default,to have some way to click\Nother things, you can kind
Dialogue: 0,0:48:43.19,0:48:46.01,Default,of click other things\None, but, anyway.
Dialogue: 0,0:48:46.28,0:48:49.55,Default,But now we want to, if I click\Nhere, I want to see this image
Dialogue: 0,0:48:49.59,0:48:51.71,Default,in my image view\Ncontroller, full-size.
Dialogue: 0,0:48:51.82,0:48:54.28,Default,So now let's implement\Nthis little thing.
Dialogue: 0,0:48:54.28,0:48:56.84,Default,And that it's going to\Ndo, we're going to do
Dialogue: 0,0:48:56.84,0:48:58.75,Default,with another map\Nview delegate method.
Dialogue: 0,0:48:58.75,0:49:00.10,Default,This is the one I\Ntold you about,
Dialogue: 0,0:49:00.47,0:49:03.87,Default,the call out accessory touched,\Nit's the one up here, see it?
Dialogue: 0,0:49:03.87,0:49:06.82,Default,Call out accessory\Ncontrol tapped, okay?
Dialogue: 0,0:49:06.94,0:49:11.63,Default,So this gets called whenever any\Nleft or right accessory view,
Dialogue: 0,0:49:11.63,0:49:15.40,Default,that is a UI control, like\NUI button is, gets tapped.
Dialogue: 0,0:49:15.60,0:49:16.31,Default,This gets called.
Dialogue: 0,0:49:16.46,0:49:18.85,Default,Now I only have one because the\Nimage view is not a UI control,
Dialogue: 0,0:49:18.85,0:49:20.09,Default,so I don't have to\Nworry about that.
Dialogue: 0,0:49:20.49,0:49:23.31,Default,So inside here, I\Ncan segue, okay?
Dialogue: 0,0:49:23.59,0:49:26.45,Default,But now, how do I segue, okay?
Dialogue: 0,0:49:26.52,0:49:28.54,Default,I've never shown you how\Nto do this, we did cover it
Dialogue: 0,0:49:28.54,0:49:29.70,Default,in the slides, but\NI never showed you,
Dialogue: 0,0:49:29.95,0:49:31.68,Default,how do I actually\Nsegue from here?
Dialogue: 0,0:49:32.08,0:49:35.43,Default,Because if I go back to my\Nstoryboard, there's no pins
Dialogue: 0,0:49:35.43,0:49:37.04,Default,for me to control, drag from?
Dialogue: 0,0:49:37.04,0:49:39.07,Default,How do I, what am I going to do?
Dialogue: 0,0:49:39.59,0:49:43.13,Default,Okay? So what we're going to\Ndo here is segue from code,
Dialogue: 0,0:49:43.47,0:49:45.59,Default,and here's how you\Nsegue from code.
Dialogue: 0,0:49:46.13,0:49:50.41,Default,You control, drag from\Nthe from view controller
Dialogue: 0,0:49:50.91,0:49:53.36,Default,to the two-view controller, just\Nfrom the whole view controller,
Dialogue: 0,0:49:53.36,0:49:55.73,Default,not from any button in\Nhere or anything like that,
Dialogue: 0,0:49:55.73,0:49:58.15,Default,and if you had a lot of buttons\Nin here, you could control,
Dialogue: 0,0:49:58.15,0:50:00.61,Default,drag from this bar so you\Ndon't accidentally control,
Dialogue: 0,0:50:00.61,0:50:01.48,Default,drag from a button.
Dialogue: 0,0:50:01.48,0:50:02.94,Default,So I'm just going,\Nand I'm not control,
Dialogue: 0,0:50:02.94,0:50:04.39,Default,dragging from the map view here.
Dialogue: 0,0:50:04.97,0:50:08.14,Default,Okay? In fact, here I'm going\Nto control, drag from down here.
Dialogue: 0,0:50:08.38,0:50:12.91,Default,Okay? So here's my photos\Nby photographer, here's the,
Dialogue: 0,0:50:13.39,0:50:16.56,Default,the icon that represents the\Ncontroller itself, so I'm going
Dialogue: 0,0:50:16.56,0:50:21.99,Default,to control drag from here up to\Nthis guy, if I can reach him.
Dialogue: 0,0:50:22.06,0:50:24.59,Default,Oh well, trust me.
Dialogue: 0,0:50:25.09,0:50:27.24,Default,>> I'm going to control\Ndrag from here to here.
Dialogue: 0,0:50:27.41,0:50:28.38,Default,Okay? There we go.
Dialogue: 0,0:50:28.64,0:50:30.68,Default,No. This to here.
Dialogue: 0,0:50:31.27,0:50:32.50,Default,Sorry. There we go.
Dialogue: 0,0:50:32.50,0:50:33.71,Default,Alright. So I'm going\Nto control,
Dialogue: 0,0:50:33.71,0:50:35.11,Default,drag from this view\Ncontroller to this one.
Dialogue: 0,0:50:35.11,0:50:38.81,Default,So, I'm creating a segue here\Nfrom that view controller
Dialogue: 0,0:50:38.81,0:50:41.49,Default,to the other one,\Ngenerically, from the controller
Dialogue: 0,0:50:41.49,0:50:42.60,Default,to the other controller,
Dialogue: 0,0:50:42.90,0:50:44.93,Default,and it's very important here\NI have to give it a name.
Dialogue: 0,0:50:45.36,0:50:47.58,Default,So I'm going to call\Nit show photo,
Dialogue: 0,0:50:47.58,0:50:49.83,Default,because that's what it\Ndoes, it shows this photo.
Dialogue: 0,0:50:50.42,0:50:52.48,Default,Okay? Why do I need\Nto give it a name?
Dialogue: 0,0:50:52.48,0:50:55.13,Default,Because from code, I have\Nto refer to this segue,
Dialogue: 0,0:50:55.13,0:50:56.99,Default,and I'm going to\Nrefer to it by name.
Dialogue: 0,0:50:57.63,0:50:58.83,Default,Okay? We'll call it show photo.
Dialogue: 0,0:50:58.91,0:51:00.10,Default,So let's go back and do that.
Dialogue: 0,0:51:00.10,0:51:01.58,Default,This is a one-liner.
Dialogue: 0,0:51:01.75,0:51:03.83,Default,I just say self, and I'm\Ngoing to call this method
Dialogue: 0,0:51:03.83,0:51:05.85,Default,in IU view controller,\NUI view controller,
Dialogue: 0,0:51:05.85,0:51:09.71,Default,called perform segue\Nwith identifier.
Dialogue: 0,0:51:09.85,0:51:11.78,Default,And here I press,\Nspecify show photo.
Dialogue: 0,0:51:12.29,0:51:14.52,Default,And notice I get to\Nspecify a sender.
Dialogue: 0,0:51:14.88,0:51:16.36,Default,Okay, where does\Nthis sender come in?
Dialogue: 0,0:51:16.56,0:51:19.65,Default,Well, this segue that I'm\Ngoing to perform, in code here,
Dialogue: 0,0:51:19.81,0:51:23.81,Default,still gets prepared for segue,\Nit's a normal push segue
Dialogue: 0,0:51:23.81,0:51:27.08,Default,so it has to prepare for segue\Nand if we remember prepare
Dialogue: 0,0:51:27.08,0:51:29.51,Default,for segue, it takes a sender.
Dialogue: 0,0:51:30.10,0:51:31.41,Default,And what is that sender?
Dialogue: 0,0:51:31.41,0:51:33.13,Default,Well, in the table\Nview controller case,
Dialogue: 0,0:51:33.13,0:51:36.22,Default,remember the sender\Nis V table view cell.
Dialogue: 0,0:51:36.88,0:51:39.69,Default,So what would we want the,\Nthe sender to be here?
Dialogue: 0,0:51:39.91,0:51:42.31,Default,Probably this annotation view.
Dialogue: 0,0:51:43.05,0:51:45.61,Default,Okay? This annotation\Nview, right here,
Dialogue: 0,0:51:45.93,0:51:49.52,Default,is the annotation view that\Nhas the call out that we tapped
Dialogue: 0,0:51:49.52,0:51:51.74,Default,that accessory view in,\Nso that's going to tell us
Dialogue: 0,0:51:51.74,0:51:53.70,Default,which annotation we're\Ntalking about, right?
Dialogue: 0,0:51:53.95,0:51:56.20,Default,So that's the sender\Nthat we're going to see
Dialogue: 0,0:51:56.32,0:51:59.26,Default,when we go do prepare\Nfor segue for this thing.
Dialogue: 0,0:51:59.26,0:52:01.86,Default,Alright? Alright, so let's\Ndo the prepare for segue
Dialogue: 0,0:52:01.86,0:52:03.51,Default,because this is a normal segue.
Dialogue: 0,0:52:03.51,0:52:07.47,Default,It has to be prepared, just\Nlike all the rest of the segues
Dialogue: 0,0:52:07.47,0:52:11.33,Default,that we have, and to do that,\NI'm going, just like I did
Dialogue: 0,0:52:11.33,0:52:14.69,Default,in table view, I'm, I have\Na little prepare here,
Dialogue: 0,0:52:14.92,0:52:18.87,Default,which is right here,\Nand this prepare kind
Dialogue: 0,0:52:18.87,0:52:23.78,Default,of generally will prepare this\Nmap view controller to segue
Dialogue: 0,0:52:23.78,0:52:26.90,Default,to an image view\Ncontroller, okay?
Dialogue: 0,0:52:27.45,0:52:30.02,Default,And it looks a lot like the\Nother one, okay, here I'm going
Dialogue: 0,0:52:30.02,0:52:33.68,Default,to find out if the annotation\Nthat we're going to prepare,
Dialogue: 0,0:52:33.68,0:52:35.69,Default,so we're going to prepare for\Nview controller, this is going
Dialogue: 0,0:52:35.69,0:52:37.95,Default,to be an image view controller,\Nto do a certain segue
Dialogue: 0,0:52:37.95,0:52:39.80,Default,to show a certain annotation.
Dialogue: 0,0:52:40.36,0:52:42.11,Default,And this had better be a photo,
Dialogue: 0,0:52:42.26,0:52:43.59,Default,because that's all\NI know how to do.
Dialogue: 0,0:52:43.87,0:52:45.66,Default,So I'm checking here to\Nmake sure it's a photo.
Dialogue: 0,0:52:46.05,0:52:49.15,Default,And if it is a photo, then I'm\Ngoing to check the identifier,
Dialogue: 0,0:52:49.15,0:52:51.46,Default,same thing with table view,\Nif there's no identifier,
Dialogue: 0,0:52:51.46,0:52:53.31,Default,then it's the kind of class,
Dialogue: 0,0:52:53.31,0:52:54.67,Default,it's an image view\Ncontroller class,
Dialogue: 0,0:52:54.92,0:52:56.00,Default,then I'm going to segue to it.
Dialogue: 0,0:52:57.06,0:52:59.23,Default,Okay? So this, I'm going\Nto call this from prepare
Dialogue: 0,0:52:59.23,0:53:00.27,Default,for segue in a second.
Dialogue: 0,0:53:00.66,0:53:02.78,Default,Let me go ahead and import\Nimage view controller.
Dialogue: 0,0:53:02.78,0:53:02.87,Default,[Pause] Okay?
Dialogue: 0,0:53:03.32,0:53:09.32,Default,Just so you don't have\Nthe warnings there.
Dialogue: 0,0:53:09.65,0:53:11.44,Default,So, everyone understand\Nwhat this code does?
Dialogue: 0,0:53:12.14,0:53:13.83,Default,Well I do the code\Nsignificance for speed,
Dialogue: 0,0:53:13.83,0:53:15.74,Default,but I want to make sure\Nyou understand all the code
Dialogue: 0,0:53:15.74,0:53:17.02,Default,that appeared there, okay?
Dialogue: 0,0:53:17.90,0:53:19.57,Default,Alright, so now we can\Ndo the prepare for segue
Dialogue: 0,0:53:19.57,0:53:21.00,Default,and it's going to\Nbe pretty easy.
Dialogue: 0,0:53:21.18,0:53:23.00,Default,So void, prepare for segue.
Dialogue: 0,0:53:23.00,0:53:27.22,Default,Okay? And in prepare\Nfor segue, the sender is
Dialogue: 0,0:53:27.22,0:53:28.74,Default,that MK annotation view.
Dialogue: 0,0:53:29.60,0:53:32.45,Default,Alright? So we know from\Nthat MK annotation view
Dialogue: 0,0:53:32.74,0:53:35.00,Default,which thing it is, so\NI'm just going to say
Dialogue: 0,0:53:35.30,0:53:40.72,Default,if the sender is an\NMK annotation view,
Dialogue: 0,0:53:40.87,0:53:44.59,Default,which it should be,\Nokay, then I'm going
Dialogue: 0,0:53:44.59,0:53:47.16,Default,to call this prepare\Nthing, that I did up here,
Dialogue: 0,0:53:47.16,0:53:48.42,Default,this prepare view controller.
Dialogue: 0,0:53:49.24,0:53:50.34,Default,Prepare view controller.
Dialogue: 0,0:53:50.58,0:53:51.88,Default,And the view controller\NI'm going
Dialogue: 0,0:53:51.88,0:53:54.69,Default,to prepare is segue dot\Ndestination view controller.
Dialogue: 0,0:53:55.02,0:53:56.95,Default,The segue is the\Nsegue's identifier.
Dialogue: 0,0:53:58.41,0:54:00.19,Default,Oops. Identifier.
Dialogue: 0,0:54:00.73,0:54:04.61,Default,And the annotation we're\Ngoing to show is what?
Dialogue: 0,0:54:04.93,0:54:08.65,Default,The annotation is this sender,\Nwhich is an MK annotation view,
Dialogue: 0,0:54:08.80,0:54:10.19,Default,is it's annotation,
Dialogue: 0,0:54:10.44,0:54:13.03,Default,so MK annotation view has a\Nproperty called annotation,
Dialogue: 0,0:54:13.16,0:54:15.92,Default,which returns to the\NID MK annotation that,
Dialogue: 0,0:54:16.20,0:54:19.50,Default,which is we want here, that that\NMK annotation view is showing.
Dialogue: 0,0:54:19.50,0:54:22.07,Default,So I'm going to say\NMK annotation view,
Dialogue: 0,0:54:22.42,0:54:24.20,Default,sender, annotation.
Dialogue: 0,0:54:24.20,0:54:26.12,Default,Okay? Make sense?
Dialogue: 0,0:54:26.71,0:54:35.18,Default,[Pause] So, we make it so we\Nperform the segue, when we call
Dialogue: 0,0:54:35.18,0:54:38.27,Default,out accessory is tapped, prepare\Nfor segueÃs going to get called
Dialogue: 0,0:54:38.27,0:54:40.77,Default,when that happens, and we're\Ngoing to call this thing
Dialogue: 0,0:54:40.77,0:54:42.24,Default,to do the actual preparation,
Dialogue: 0,0:54:42.24,0:54:44.07,Default,checking to make sure\Nwe're talking about photos,
Dialogue: 0,0:54:44.33,0:54:46.24,Default,making sure we're segueing\Ninto an image view controller.
Dialogue: 0,0:54:47.46,0:54:50.28,Default,Okay? Everybody got that?
Dialogue: 0,0:54:50.46,0:54:52.12,Default,Alright, so let's\Nsee if that works.
Dialogue: 0,0:54:53.86,0:54:57.80,Default,[Pause] Okay, so\Nlet's go to this guy.
Dialogue: 0,0:54:58.36,0:55:00.02,Default,This is our world traveler here.
Dialogue: 0,0:55:00.47,0:55:01.51,Default,Let's go click down here.
Dialogue: 0,0:55:01.63,0:55:03.89,Default,It's got this, it's got\Na nice image view here.
Dialogue: 0,0:55:03.89,0:55:06.21,Default,Let's try and click on\Nthis, and it segues.
Dialogue: 0,0:55:06.21,0:55:08.94,Default,Okay? And we'll get\Nthe exact same kind
Dialogue: 0,0:55:08.94,0:55:10.06,Default,of segue we got before.
Dialogue: 0,0:55:11.08,0:55:12.21,Default,Make sense?
Dialogue: 0,0:55:13.05,0:55:14.52,Default,Questions about that?
Dialogue: 0,0:55:15.10,0:55:18.53,Default,Alright. So that's really\Npretty awesome in, you know,
Dialogue: 0,0:55:18.53,0:55:21.44,Default,about 20 minutes, or\N25 minutes we were able
Dialogue: 0,0:55:21.44,0:55:24.66,Default,to add full map capability\Nto our iPhone version.
Dialogue: 0,0:55:24.66,0:55:27.48,Default,But what about our\NiPad, our iPad version?
Dialogue: 0,0:55:28.14,0:55:33.15,Default,Let's turn off my phone here,\Nand go do the iPad version.
Dialogue: 0,0:55:33.44,0:55:37.54,Default,So the iPad probably wants to\Nbe slightly different than this.
Dialogue: 0,0:55:37.92,0:55:40.73,Default,Although I'm going to start\Noff having it be very similar.
Dialogue: 0,0:55:40.91,0:55:43.06,Default,What I'm going to do in the\NiPad is I'm going to get rid
Dialogue: 0,0:55:43.32,0:55:47.12,Default,of this photographer's table and\Nphotos by photographer table.
Dialogue: 0,0:55:47.12,0:55:49.42,Default,So I'm just going to delete\Nthat, and I'm going to copy
Dialogue: 0,0:55:49.42,0:55:52.90,Default,and paste what I just\Ndid, here, in this one.
Dialogue: 0,0:55:53.42,0:55:57.12,Default,Copy, over here, paste, okay?
Dialogue: 0,0:55:57.46,0:55:58.81,Default,Let's control, drag.
Dialogue: 0,0:55:59.74,0:56:03.85,Default,Push segue, or sorry, root view\Nof this split view controller.
Dialogue: 0,0:56:04.39,0:56:05.77,Default,Let's go find everything.
Dialogue: 0,0:56:07.00,0:56:08.45,Default,Make some more space.
Dialogue: 0,0:56:09.00,0:56:09.90,Default,There it is.
Dialogue: 0,0:56:10.44,0:56:11.55,Default,Okay? So now we're going
Dialogue: 0,0:56:11.55,0:56:12.94,Default,to do the exact same\Nthing we did before.
Dialogue: 0,0:56:12.94,0:56:14.33,Default,We got the photographers\Nhere and we're going
Dialogue: 0,0:56:14.33,0:56:15.36,Default,to have the maps here.
Dialogue: 0,0:56:15.36,0:56:17.93,Default,So let's go see what that\Nlooks like, at first.
Dialogue: 0,0:56:18.99,0:56:19.14,Default,[Pause] Alright.
Dialogue: 0,0:56:20.12,0:56:22.84,Default,Is this working?
Dialogue: 0,0:56:23.72,0:56:28.51,Default,Yes. [Pause] Oh, wait, we're\Ngoing to have to, sorry.
Dialogue: 0,0:56:29.44,0:56:33.62,Default,We're going to have to stop here\Nbecause we are going to crash
Dialogue: 0,0:56:33.66,0:56:38.49,Default,because we changed our\N[pause] database scheme.
Dialogue: 0,0:56:38.49,0:56:39.94,Default,So let's get rid of that.
Dialogue: 0,0:56:40.76,0:56:41.58,Default,Run again.
Dialogue: 0,0:56:42.52,0:56:46.52,Default,[ Background Sounds ]
Dialogue: 0,0:56:47.02,0:56:51.00,Default,[ Inaudible Background\NQuestion ]
Dialogue: 0,0:56:51.79,0:56:54.49,Default,Okay, so the question is\Nif I were in the real world
Dialogue: 0,0:56:54.49,0:56:57.06,Default,and I had apps on the app store\Nhere and I changed my scheme
Dialogue: 0,0:56:57.39,0:56:59.94,Default,and my users upgrade,\Nhow would I handle that?
Dialogue: 0,0:56:59.94,0:57:03.11,Default,And the answer is, and we don't\Nteach this because, you know,
Dialogue: 0,0:57:03.46,0:57:05.67,Default,you know how it is,\Ntime constraints,
Dialogue: 0,0:57:05.72,0:57:08.37,Default,but there's actually a mechanism\Nfor versioning your scheme
Dialogue: 0,0:57:08.69,0:57:11.56,Default,and then doing auto-migration\Nfrom previous versions,
Dialogue: 0,0:57:11.56,0:57:13.04,Default,getting the data out\Nof a previous version
Dialogue: 0,0:57:13.04,0:57:13.86,Default,to the new scheme.
Dialogue: 0,0:57:14.19,0:57:16.23,Default,So you have to change your\Nscheme in a compatible way,
Dialogue: 0,0:57:16.23,0:57:17.89,Default,obviously you want to keep\Nall your user information,
Dialogue: 0,0:57:17.89,0:57:20.13,Default,but that migration\Ncan be automated.
Dialogue: 0,0:57:20.40,0:57:21.44,Default,So it's pretty cool actually.
Dialogue: 0,0:57:22.88,0:57:25.39,Default,So, check it out in the\Ncore data documentation,
Dialogue: 0,0:57:25.39,0:57:25.75,Default,how to do it.
Dialogue: 0,0:57:26.06,0:57:28.44,Default,Alright, so here's our\Nphotographers, and if I click
Dialogue: 0,0:57:28.44,0:57:32.33,Default,on a photographer, then\Nawesome, I get the map, okay?
Dialogue: 0,0:57:32.33,0:57:35.23,Default,And if I click on\Nthese, woo, that work,
Dialogue: 0,0:57:35.23,0:57:36.47,Default,this is just awesome,\Nit works great.
Dialogue: 0,0:57:36.47,0:57:38.59,Default,Let's try and show the photo.
Dialogue: 0,0:57:38.63,0:57:40.52,Default,Uh oh. Why doesn't that work?
Dialogue: 0,0:57:41.15,0:57:44.20,Default,Because it's doing\Nperform segue here, okay?
Dialogue: 0,0:57:44.54,0:57:46.79,Default,And we don't use a\Nsegue on the iPad,
Dialogue: 0,0:57:46.79,0:57:50.06,Default,we just go find the image\Nview controller in our detail
Dialogue: 0,0:57:50.06,0:57:51.32,Default,and update it directly, right?
Dialogue: 0,0:57:51.76,0:57:55.84,Default,So we have to do the same fix we\Ndid when we made this work on,
Dialogue: 0,0:57:56.01,0:57:58.09,Default,with the tables, we got to do\Nthe same thing with the map.
Dialogue: 0,0:57:58.17,0:58:01.48,Default,So, I'm going to go back, back\Nto my map view controller.
Dialogue: 0,0:58:02.09,0:58:03.21,Default,Right here.
Dialogue: 0,0:58:03.65,0:58:08.02,Default,And I'm going to put some, I'm\Ngoing to put a property in here
Dialogue: 0,0:58:08.29,0:58:11.84,Default,that finds an image view\Ncontroller in the detail
Dialogue: 0,0:58:11.84,0:58:14.07,Default,of a split view I'm in,\Nif there's one there.
Dialogue: 0,0:58:14.45,0:58:16.51,Default,Okay? Call this image\Nview controller.
Dialogue: 0,0:58:16.84,0:58:18.29,Default,And here's the property\NI'm going to add.
Dialogue: 0,0:58:19.82,0:58:23.57,Default,Right? So this property is\Ngoing to be nil if I'm not
Dialogue: 0,0:58:23.57,0:58:25.59,Default,in a split view controller\Nwhere my detail is
Dialogue: 0,0:58:25.59,0:58:26.61,Default,in image view controller.
Dialogue: 0,0:58:27.04,0:58:29.83,Default,Right? Otherwise, it's going to\Nbe that image view controller.
Dialogue: 0,0:58:30.33,0:58:32.52,Default,Ya'll recognize this code\Nfrom our table view, right?
Dialogue: 0,0:58:32.84,0:58:35.31,Default,Split view controller last\Nobject, that's our detail.
Dialogue: 0,0:58:35.56,0:58:37.77,Default,If it's in a navigation\Ncontroller, I'll look in to see
Dialogue: 0,0:58:37.77,0:58:39.19,Default,if it's the root\Nview controller.
Dialogue: 0,0:58:39.46,0:58:40.99,Default,And then if it's\Na view controller,
Dialogue: 0,0:58:41.37,0:58:43.07,Default,an image view controller,\NI'll return it.
Dialogue: 0,0:58:43.78,0:58:44.76,Default,Otherwise nil.
Dialogue: 0,0:58:45.12,0:58:46.58,Default,So on the iPhone this\Nis going to be nil,
Dialogue: 0,0:58:46.58,0:58:49.67,Default,because it can't be a split view\Non the iPhone anyway, right?
Dialogue: 0,0:58:49.92,0:58:51.11,Default,So this is cool.
Dialogue: 0,0:58:51.11,0:58:53.75,Default,So now I know whether there\Nis an image view controller,
Dialogue: 0,0:58:53.93,0:58:56.25,Default,so I could do something,\Nfor example, when I'm doing
Dialogue: 0,0:58:56.25,0:58:57.95,Default,that segue, where's that segue?
Dialogue: 0,0:58:57.95,0:59:00.72,Default,Right here, this perform segue.
Dialogue: 0,0:59:00.72,0:59:04.31,Default,I could say if I have an\Nimage view controller,
Dialogue: 0,0:59:04.71,0:59:07.99,Default,then just update it\Ndirectly, directly, otherwise,
Dialogue: 0,0:59:07.99,0:59:09.94,Default,you can try this perform segue.
Dialogue: 0,0:59:09.94,0:59:11.86,Default,By the way, there's\Nreally no way
Dialogue: 0,0:59:11.86,0:59:13.96,Default,to try this perform\Nsegue without crashing.
Dialogue: 0,0:59:14.37,0:59:16.60,Default,So you really got to know\Nwhether you're actually
Dialogue: 0,0:59:16.60,0:59:17.60,Default,segueing, okay?
Dialogue: 0,0:59:17.87,0:59:20.20,Default,Luckily, here, if I have an\Nimage view controller around,
Dialogue: 0,0:59:20.42,0:59:21.68,Default,I know I'm not going\Nto be segueing,
Dialogue: 0,0:59:21.79,0:59:23.88,Default,and if I don't have an image\Nview controller around,
Dialogue: 0,0:59:23.88,0:59:25.83,Default,I probably do want to be\Nsegueing, because I got
Dialogue: 0,0:59:25.83,0:59:29.10,Default,to show the photos somehow, if\NI'm going to allow that, the,
Dialogue: 0,0:59:29.10,0:59:30.57,Default,that little button to be there.
Dialogue: 0,0:59:30.97,0:59:32.85,Default,So if I have this self-image\Nview controller here,
Dialogue: 0,0:59:32.85,0:59:34.07,Default,I can just prepare it.
Dialogue: 0,0:59:34.36,0:59:36.12,Default,So we've got this\Nprepare controller,
Dialogue: 0,0:59:36.12,0:59:39.90,Default,I'm going to prepare the image\Nview controller, segue is nil.
Dialogue: 0,0:59:39.90,0:59:43.09,Default,The annotation, what, where does\Nthe annotation want to show,
Dialogue: 0,0:59:43.09,0:59:44.92,Default,again, its right here, okay?
Dialogue: 0,0:59:45.57,0:59:47.06,Default,View dot annotation.
Dialogue: 0,0:59:47.69,0:59:47.81,Default,[Pause] Woops.
Dialogue: 0,0:59:49.21,0:59:51.35,Default,I always do that, don't I?
Dialogue: 0,0:59:51.35,0:59:53.01,Default,Okay? So there's that.
Dialogue: 0,0:59:53.86,0:59:54.98,Default,Okay, so I'm just\Ngoing to prepare
Dialogue: 0,0:59:54.98,0:59:56.55,Default,that image view controller\Nif it's there,
Dialogue: 0,0:59:56.55,0:59:57.36,Default,otherwise we'll segue.
Dialogue: 0,0:59:57.36,0:59:58.52,Default,Everyone understand this?
Dialogue: 0,0:59:58.52,0:59:59.49,Default,So let's go look at this.
Dialogue: 0,1:00:00.20,1:00:00.98,Default,See how this works.
Dialogue: 0,1:00:01.52,1:00:09.15,Default,[ Background Sounds ]
Dialogue: 0,1:00:09.65,1:00:11.35,Default,Alright, so let's look\Nat some photos again.
Dialogue: 0,1:00:11.67,1:00:16.05,Default,I'll find some photos like,\NI don't know who we got here,
Dialogue: 0,1:00:16.05,1:00:17.79,Default,this guy, so we got this.
Dialogue: 0,1:00:18.77,1:00:19.89,Default,Click this, okay?
Dialogue: 0,1:00:19.89,1:00:21.10,Default,We got this right here.
Dialogue: 0,1:00:21.29,1:00:24.96,Default,If I click this little\Nbutton, it worked.
Dialogue: 0,1:00:25.61,1:00:28.28,Default,Okay? So it uses the thing, if\NI go over here somewhere else,
Dialogue: 0,1:00:28.95,1:00:31.54,Default,let's do this guy right here.
Dialogue: 0,1:00:31.82,1:00:33.63,Default,Notice that overlaps,\NI don't really
Dialogue: 0,1:00:33.63,1:00:36.77,Default,like that UI very much,\Nbut it is what it is.
Dialogue: 0,1:00:37.47,1:00:39.77,Default,Okay? So that's kind of okay.
Dialogue: 0,1:00:40.02,1:00:41.94,Default,This is kind of okay,\Nthis UI, it's really not
Dialogue: 0,1:00:42.01,1:00:44.49,Default,that great though\Nbecause I'm showing
Dialogue: 0,1:00:44.49,1:00:47.67,Default,that little thumb nail there\Nand then I'm, I click on it,
Dialogue: 0,1:00:47.67,1:00:49.04,Default,I'm also showing the big one.
Dialogue: 0,1:00:49.29,1:00:51.66,Default,Why don't I just not\Nhave a thumb nail,
Dialogue: 0,1:00:51.86,1:00:54.34,Default,not have the little blue\Narrow, and every time I click
Dialogue: 0,1:00:54.34,1:00:56.21,Default,on a pin, just show the photo.
Dialogue: 0,1:00:56.50,1:00:58.71,Default,There's no reason not\Nto just show the photo.
Dialogue: 0,1:00:58.71,1:00:59.71,Default,So how would I do that?
Dialogue: 0,1:00:59.83,1:01:01.93,Default,So just forget this whole thing\Nwith that little blue arrow,
Dialogue: 0,1:01:01.93,1:01:03.14,Default,you don't even need\Nthat blue arrow.
Dialogue: 0,1:01:04.17,1:01:04.78,Default,Let's do that.
Dialogue: 0,1:01:04.78,1:01:07.99,Default,Let's go up here to, this\Nis where we build the left
Dialogue: 0,1:01:07.99,1:01:09.52,Default,and right accessory\Nviews, right here.
Dialogue: 0,1:01:09.83,1:01:14.15,Default,So I'm going to say if I don't\Nhave an image view controller,
Dialogue: 0,1:01:14.38,1:01:16.82,Default,then go ahead and put\Nthose call outs in there.
Dialogue: 0,1:01:18.96,1:01:20.16,Default,[Pause] Otherwise\Ndon't put them there.
Dialogue: 0,1:01:21.07,1:01:24.87,Default,And then also, now that the call\Nouts are there, aren't there,
Dialogue: 0,1:01:24.87,1:01:27.51,Default,this is never to get called, in\Nhere, because there's no call
Dialogue: 0,1:01:27.51,1:01:29.40,Default,out accessory if I have\Nthe image view controller.
Dialogue: 0,1:01:29.78,1:01:32.70,Default,So let's go ahead and\Ncut this out of here,
Dialogue: 0,1:01:33.51,1:01:36.17,Default,and let's put that\Ncode in select.
Dialogue: 0,1:01:36.39,1:01:37.66,Default,So here's where it's selected.
Dialogue: 0,1:01:38.37,1:01:42.02,Default,So when it's selected,\Nlet's go ahead and [pause],
Dialogue: 0,1:01:43.43,1:01:50.18,Default,views control higher, woop,\Nnope, that didn't work.
Dialogue: 0,1:01:51.18,1:01:52.63,Default,[Pause] Control I, there we go.
Dialogue: 0,1:01:52.93,1:01:55.08,Default,Alright. So when the pin\Nis selected, when we click
Dialogue: 0,1:01:55.08,1:01:57.95,Default,on the pin, if I have an\Nimage view control around,
Dialogue: 0,1:01:57.95,1:01:58.82,Default,I'll just prepare it.
Dialogue: 0,1:01:59.22,1:02:03.50,Default,Otherwise, I will update the\Ncall out accessory views and all
Dialogue: 0,1:02:03.50,1:02:04.62,Default,that stuff, which I don't have
Dialogue: 0,1:02:04.80,1:02:07.55,Default,if I have an image\Nview controller.
Dialogue: 0,1:02:08.00,1:02:08.98,Default,So let's see what\Nthis looks like.
Dialogue: 0,1:02:09.52,1:02:17.31,Default,[ Background Sounds ]
Dialogue: 0,1:02:17.81,1:02:18.68,Default,Okay. So, no.
Dialogue: 0,1:02:18.68,1:02:19.61,Default,Let's click again here.
Dialogue: 0,1:02:20.43,1:02:23.98,Default,And it's going to be a\Nmultiple, oops, multiple photo.
Dialogue: 0,1:02:24.22,1:02:26.29,Default,Okay, so, let's click\Non one here.
Dialogue: 0,1:02:27.04,1:02:29.04,Default,Alright, automatically,\Nas soon as I click on it,
Dialogue: 0,1:02:29.04,1:02:31.57,Default,it's going to update\Nthe image view.
Dialogue: 0,1:02:31.73,1:02:35.34,Default,Okay? So that's kind of cool.
Dialogue: 0,1:02:35.34,1:02:36.13,Default,That's a nicer UI.
Dialogue: 0,1:02:36.13,1:02:38.05,Default,I don't really need\Nthat thumb nail.
Dialogue: 0,1:02:38.05,1:02:42.57,Default,I don't need the [pause],\Nthe other stuff on there.
Dialogue: 0,1:02:42.57,1:02:43.20,Default,So that's cool.
Dialogue: 0,1:02:43.58,1:02:46.18,Default,One thing though that's a little\Nweird on it is watch this.
Dialogue: 0,1:02:46.18,1:02:48.58,Default,So now if I go here, okay?
Dialogue: 0,1:02:49.14,1:02:52.18,Default,Now I've got dead man\NJones, his photos,
Dialogue: 0,1:02:52.50,1:02:54.34,Default,but I've got somebody\Nelse's photo on the right.
Dialogue: 0,1:02:54.34,1:02:56.06,Default,That's kind of weird.
Dialogue: 0,1:02:56.47,1:02:57.54,Default,Okay, that's kind of a bad UI.
Dialogue: 0,1:02:57.76,1:03:00.87,Default,So let's make it so that\Nevery time we show the photos
Dialogue: 0,1:03:00.87,1:03:03.16,Default,by a photographer,\Nlet's just autopick one.
Dialogue: 0,1:03:04.05,1:03:05.50,Default,Okay? How would we do that?
Dialogue: 0,1:03:05.70,1:03:06.57,Default,Very simple.
Dialogue: 0,1:03:06.92,1:03:11.54,Default,When we update our view,\Nmap view annotations here,
Dialogue: 0,1:03:11.85,1:03:14.23,Default,I'm just going to\Nautoselect a photo.
Dialogue: 0,1:03:14.72,1:03:17.27,Default,But only in the case where I\Nhave an image view controller
Dialogue: 0,1:03:17.47,1:03:18.12,Default,lying around.
Dialogue: 0,1:03:18.52,1:03:20.18,Default,If I have an image view\Ncontroller lying around,
Dialogue: 0,1:03:20.43,1:03:21.78,Default,then I'll autoselect a photo.
Dialogue: 0,1:03:22.07,1:03:23.39,Default,And how am I autoselecting?
Dialogue: 0,1:03:23.52,1:03:26.00,Default,Well, I'm just grabbing the\Nfirst object out of our photos
Dialogue: 0,1:03:26.00,1:03:28.62,Default,by photographer array, okay?
Dialogue: 0,1:03:28.62,1:03:31.14,Default,And if there's any in there,\Nthen I'm going to select
Dialogue: 0,1:03:31.14,1:03:33.21,Default,that annotation, okay?
Dialogue: 0,1:03:33.21,1:03:36.05,Default,That causes that call out\Nto appear, but it doesn't,
Dialogue: 0,1:03:36.14,1:03:38.48,Default,when you select it with\Nthis, it doesn't call
Dialogue: 0,1:03:38.48,1:03:41.19,Default,that did select method\Nup here to get called.
Dialogue: 0,1:03:41.66,1:03:46.28,Default,Okay? This method, up here,\Ndid select annotation view,
Dialogue: 0,1:03:46.40,1:03:48.80,Default,this only gets called\Nwhen the user selects it.
Dialogue: 0,1:03:49.64,1:03:52.27,Default,Okay? So the user didn't\Nselect it here, we selected it,
Dialogue: 0,1:03:52.27,1:03:54.12,Default,so we still have to do\Nthat prepare ourself.
Dialogue: 0,1:03:54.64,1:03:57.57,Default,Okay? Let's take a look at that.
Dialogue: 0,1:03:58.52,1:04:07.28,Default,[ Background Sounds ]
Dialogue: 0,1:04:07.78,1:04:09.61,Default,Alright. So let's\Npick somebody here.
Dialogue: 0,1:04:10.35,1:04:13.35,Default,Click on that, and you can see\Nit autoselected the scooter one,
Dialogue: 0,1:04:13.35,1:04:16.18,Default,I picked something else, we'll\Ngo here, it autoselects one.
Dialogue: 0,1:04:16.55,1:04:18.00,Default,It goes here and autoselect one.
Dialogue: 0,1:04:18.00,1:04:22.52,Default,So now we're kind of all in sync\Nbetween the two, between what's
Dialogue: 0,1:04:22.52,1:04:23.73,Default,on the right and\Nwhat's on the left.
Dialogue: 0,1:04:24.43,1:04:26.73,Default,Okay? But if I click\Nanother one, it'll change it.
Dialogue: 0,1:04:27.62,1:04:28.64,Default,Okay? So that's not a bad UI.
Dialogue: 0,1:04:28.64,1:04:31.42,Default,I kind of, kind of like it,\Nit's kind of okay, but I'm going
Dialogue: 0,1:04:31.42,1:04:33.71,Default,to show you another way\Nto do this on the iPad,
Dialogue: 0,1:04:33.96,1:04:35.80,Default,to show you the embed segues.
Dialogue: 0,1:04:36.01,1:04:38.84,Default,One could argue whether this is\Na better UI or the embedded one,
Dialogue: 0,1:04:38.84,1:04:40.06,Default,you can kind of see them both
Dialogue: 0,1:04:40.06,1:04:41.51,Default,and you can tell me what\Nyou think is better.
Dialogue: 0,1:04:41.51,1:04:42.82,Default,But what I'm going to do is,
Dialogue: 0,1:04:42.82,1:04:45.40,Default,you see where the sun is\Nright there, in that photo?
Dialogue: 0,1:04:45.65,1:04:48.91,Default,I'm actually going to take this\Nmap view that's on the left,
Dialogue: 0,1:04:48.91,1:04:51.78,Default,and I'm going to embed it\Ninside this image view.
Dialogue: 0,1:04:51.78,1:04:54.07,Default,So this map view is\Ngoing to showing there,
Dialogue: 0,1:04:54.32,1:04:55.48,Default,and so what we're going to see
Dialogue: 0,1:04:55.61,1:04:57.68,Default,in this column is just\Nthe photographers,
Dialogue: 0,1:04:57.68,1:04:58.78,Default,these will be photographers.
Dialogue: 0,1:04:59.32,1:05:01.30,Default,Embedded where the\Nsun is will be the map
Dialogue: 0,1:05:01.60,1:05:03.16,Default,for whatever photographer\Nwe choose
Dialogue: 0,1:05:03.16,1:05:05.33,Default,and then we'll have our photo,\Nand we'll still be able to zoom
Dialogue: 0,1:05:05.33,1:05:08.16,Default,in our photos, zoom around,\Nit'll be occluded, right?
Dialogue: 0,1:05:08.16,1:05:10.16,Default,It'll be covered up, although\Nmaybe we could add a button
Dialogue: 0,1:05:10.16,1:05:12.12,Default,somewhere that would hide\Nthat map and reshow it,
Dialogue: 0,1:05:12.12,1:05:14.52,Default,a little bar next to the\NURL, because that map,
Dialogue: 0,1:05:14.52,1:05:17.50,Default,it's just going to be a UI\Nview, in there, we can hide,
Dialogue: 0,1:05:17.50,1:05:20.97,Default,set it to dot hidden, we could\Nanimate it, transparency,
Dialogue: 0,1:05:20.97,1:05:22.46,Default,fading away, whatever\Nwe wanted to do
Dialogue: 0,1:05:22.46,1:05:23.68,Default,because it's just\Ngoing to be UI view.
Dialogue: 0,1:05:24.09,1:05:26.48,Default,But the contents of\Nthat UI view are going
Dialogue: 0,1:05:26.48,1:05:29.83,Default,to be the same contents\Nthat are in this map view
Dialogue: 0,1:05:29.83,1:05:30.85,Default,over here, exactly the same.
Dialogue: 0,1:05:30.85,1:05:32.73,Default,I'm going to use that\Nexact same view controller.
Dialogue: 0,1:05:33.29,1:05:34.98,Default,Okay? And this is,\Nagain, we're talking
Dialogue: 0,1:05:34.98,1:05:37.14,Default,about view controller reuse.
Dialogue: 0,1:05:37.68,1:05:39.49,Default,Okay? So, let's go\Nahead and do that.
Dialogue: 0,1:05:39.49,1:05:42.54,Default,By the way, we noticed we have\Nwarnings back in the code here.
Dialogue: 0,1:05:42.83,1:05:43.99,Default,Why do we have this warning?
Dialogue: 0,1:05:44.24,1:05:47.38,Default,That's because autoselected\Nphoto is a photo star,
Dialogue: 0,1:05:47.79,1:05:52.00,Default,and we don't import anything\Nhere that tells this code
Dialogue: 0,1:05:52.17,1:05:54.12,Default,that a photo star\Nis an MK annotation.
Dialogue: 0,1:05:55.06,1:05:57.98,Default,Okay? So we have to go up here\Nto where we import a photo,
Dialogue: 0,1:05:58.28,1:06:02.54,Default,and instead import photo plus\NMK, or sorry, plus annotation.
Dialogue: 0,1:06:03.25,1:06:05.53,Default,Okay? Because this is\Nwhere, this is the file
Dialogue: 0,1:06:05.53,1:06:10.48,Default,in which we declared that\Nphotos were MK annotations.
Dialogue: 0,1:06:11.03,1:06:12.12,Default,Everyone understand that?
Dialogue: 0,1:06:12.60,1:06:16.36,Default,Okay, so you got to make sure\Nyou import whichever interface
Dialogue: 0,1:06:17.05,1:06:18.86,Default,defines that.
Dialogue: 0,1:06:19.33,1:06:21.55,Default,Okay. So how are we going\Nto do this embed thing?
Dialogue: 0,1:06:21.55,1:06:25.32,Default,Let's go over here to our iPad,\Nstoryboard, all I'm going to do
Dialogue: 0,1:06:25.32,1:06:30.07,Default,to start is to drag an embedded\Nthing in here, so let's do that.
Dialogue: 0,1:06:30.30,1:06:32.01,Default,This is a bit of a\Nchallenge when it comes
Dialogue: 0,1:06:32.01,1:06:33.15,Default,to screen real estates.
Dialogue: 0,1:06:33.77,1:06:34.54,Default,Let's go here.
Dialogue: 0,1:06:34.94,1:06:36.92,Default,So the embedded thing, it's\Ndown towards the bottom,
Dialogue: 0,1:06:36.92,1:06:37.73,Default,here it is right here.
Dialogue: 0,1:06:37.82,1:06:40.40,Default,You see it says container view\Ndefines a region of view control
Dialogue: 0,1:06:40.40,1:06:43.12,Default,that can include a\Nchild view controller.
Dialogue: 0,1:06:43.86,1:06:45.05,Default,Okay? So I'm going to drag
Dialogue: 0,1:06:45.05,1:06:47.45,Default,that into this view\Ncontroller right here,
Dialogue: 0,1:06:47.45,1:06:49.61,Default,this is our image\Nview controller,
Dialogue: 0,1:06:49.84,1:06:50.70,Default,so let's drag that in.
Dialogue: 0,1:06:51.13,1:06:54.17,Default,Now when you drag this in, it's\Na bit of a pain in the neck
Dialogue: 0,1:06:54.34,1:06:57.48,Default,to size this to where you\Nwant and all those things,
Dialogue: 0,1:06:57.69,1:07:00.48,Default,but I'll show you another\Nway, when you have a big view
Dialogue: 0,1:07:00.48,1:07:02.48,Default,like that, that you're\Ndragging in and you want
Dialogue: 0,1:07:02.48,1:07:03.92,Default,to place it somewhere to do it,
Dialogue: 0,1:07:04.12,1:07:05.76,Default,which is use the\Ndocument online.
Dialogue: 0,1:07:06.27,1:07:08.40,Default,So here's the document\Noutline, here's my container.
Dialogue: 0,1:07:08.57,1:07:11.22,Default,Notice it added it as a\Nsubview of my scroll view,
Dialogue: 0,1:07:11.22,1:07:13.71,Default,but I don't want to scroll that\Nmap around, I want it to sit
Dialogue: 0,1:07:13.71,1:07:16.92,Default,on top of the scroll view, I\Nactually want the scroll view
Dialogue: 0,1:07:16.92,1:07:18.77,Default,in the back, and then\Nthe container view,
Dialogue: 0,1:07:18.77,1:07:20.25,Default,and then we can do our\Nactivity indicator.
Dialogue: 0,1:07:20.25,1:07:22.07,Default,So that's one thing\NI can do is move it
Dialogue: 0,1:07:22.07,1:07:24.95,Default,out from being a scroll view.
Dialogue: 0,1:07:25.09,1:07:26.49,Default,And can anyone think of a way
Dialogue: 0,1:07:26.49,1:07:28.93,Default,that I can place this\Ncontainer where I want?
Dialogue: 0,1:07:30.02,1:07:31.94,Default,Magic word, begins with an A?
Dialogue: 0,1:07:33.89,1:07:34.51,Default,[Pause] Down here?
Dialogue: 0,1:07:35.71,1:07:37.88,Default,Yes, we can use autolayout.
Dialogue: 0,1:07:38.69,1:07:40.60,Default,Right? To specify\Nexactly what we want.
Dialogue: 0,1:07:40.83,1:07:42.24,Default,So let's fix its\Nwidth and height.
Dialogue: 0,1:07:42.24,1:07:45.35,Default,This is a case where we would\Nwant some magic numbers of width
Dialogue: 0,1:07:45.35,1:07:47.50,Default,and height, because we want\Nto kind of decide how much
Dialogue: 0,1:07:47.50,1:07:50.05,Default,of that view we want to\Nocclude with the map,
Dialogue: 0,1:07:50.35,1:07:53.03,Default,what the relative value is,\Nand then let's also pin it
Dialogue: 0,1:07:53.03,1:07:56.04,Default,to the top, by the standard\Nvalue, and then let's pin it
Dialogue: 0,1:07:56.29,1:07:58.55,Default,over here to the right,\Nso we're going to put it
Dialogue: 0,1:07:58.55,1:07:59.83,Default,in the upper right-hand corner.
Dialogue: 0,1:08:00.28,1:08:02.76,Default,And let's see what that\Nlooks like, first of all,
Dialogue: 0,1:08:03.13,1:08:05.20,Default,and notice we have the\Nlittle yellow thing here.
Dialogue: 0,1:08:05.52,1:08:07.86,Default,Because we have a misplaced\Nview, and so I'm going
Dialogue: 0,1:08:07.86,1:08:09.43,Default,to go ahead and fix\Nthat misplacement.
Dialogue: 0,1:08:09.83,1:08:11.51,Default,And now let's go look and\Nsee how this looks like.
Dialogue: 0,1:08:11.51,1:08:15.14,Default,Eh, it just doesn't quite\Nlook like I want, because it's
Dialogue: 0,1:08:15.14,1:08:18.58,Default,under this bar, I don't\Nreally want it under this bar,
Dialogue: 0,1:08:18.58,1:08:21.38,Default,so it's a standard width from\Nthe top, but under this bar.
Dialogue: 0,1:08:21.76,1:08:23.94,Default,The way you can, by the way,\Ncontrol whether things are
Dialogue: 0,1:08:23.94,1:08:27.33,Default,under the bar is select your\Nwhole controller and inspect it.
Dialogue: 0,1:08:27.53,1:08:30.77,Default,And you'll see down here,\Nthere's extend edges, okay?
Dialogue: 0,1:08:31.03,1:08:33.21,Default,So if I say under top bars, no,
Dialogue: 0,1:08:33.53,1:08:35.29,Default,then it moves that\Ncontainer down.
Dialogue: 0,1:08:35.29,1:08:37.30,Default,Now that created some\Nautolayout things,
Dialogue: 0,1:08:37.30,1:08:40.39,Default,both for this little spinner guy\Nand this, so let's fix those.
Dialogue: 0,1:08:41.62,1:08:43.24,Default,Right? Because we moved\Neverything down a little bit,
Dialogue: 0,1:08:43.24,1:08:45.59,Default,so those need to be\Nput back relatively
Dialogue: 0,1:08:46.34,1:08:47.21,Default,to where they should be.
Dialogue: 0,1:08:47.21,1:08:48.05,Default,So that's a way to do it.
Dialogue: 0,1:08:48.05,1:08:50.35,Default,Now, of course, now the image\Nview is not under there,
Dialogue: 0,1:08:50.35,1:08:52.34,Default,and I might want one\Nand not the other,
Dialogue: 0,1:08:52.34,1:08:54.58,Default,and we can certainly set\Nour autolayouts constraints
Dialogue: 0,1:08:54.58,1:08:55.63,Default,to whatever we want,\Nbut I just wanted
Dialogue: 0,1:08:55.63,1:08:57.07,Default,to show you this\Nextend edges thing.
Dialogue: 0,1:08:57.07,1:08:58.08,Default,Some of you discovered this
Dialogue: 0,1:08:58.08,1:09:03.26,Default,when you were doing your\Nhomework before, but, so, okay.
Dialogue: 0,1:09:03.26,1:09:05.31,Default,One thing that happened\Nthrough all of this,
Dialogue: 0,1:09:05.31,1:09:09.68,Default,we got this container, is\Nwe have to specify what's
Dialogue: 0,1:09:09.68,1:09:13.31,Default,in this container, and it\Nactually put something on here.
Dialogue: 0,1:09:14.02,1:09:16.06,Default,Okay? It's hard to see,\Nlet's move it down.
Dialogue: 0,1:09:16.57,1:09:19.38,Default,It actually put this, this is\Na generic UI view controller,
Dialogue: 0,1:09:19.38,1:09:21.04,Default,if we inspect it, you can\Nsee it's a generic view I
Dialogue: 0,1:09:21.04,1:09:21.67,Default,view controller.
Dialogue: 0,1:09:21.96,1:09:24.12,Default,So this view controller,\Nself dot view,
Dialogue: 0,1:09:24.12,1:09:25.10,Default,is going to appear in here.
Dialogue: 0,1:09:25.47,1:09:27.17,Default,But I don't want\Nthis view controller,
Dialogue: 0,1:09:27.17,1:09:28.33,Default,self dot view, in here.
Dialogue: 0,1:09:28.48,1:09:29.58,Default,So I'm going to delete that.
Dialogue: 0,1:09:30.08,1:09:34.31,Default,Instead, I want this view\Ncontroller's self dot view,
Dialogue: 0,1:09:34.31,1:09:35.70,Default,the map view controller, right?
Dialogue: 0,1:09:36.19,1:09:37.11,Default,So how do I do that?
Dialogue: 0,1:09:37.42,1:09:39.51,Default,This is a segue, control, drag.
Dialogue: 0,1:09:40.17,1:09:42.97,Default,So I'm control, dragging\Nfrom the container to here,
Dialogue: 0,1:09:43.35,1:09:45.78,Default,only option I'm going to have\Nis embed, because the source
Dialogue: 0,1:09:45.78,1:09:48.96,Default,of this is the container, and\Nnow I've embedded that in there.
Dialogue: 0,1:09:49.26,1:09:52.57,Default,Okay? I don't want\Nthis segue anymore,
Dialogue: 0,1:09:52.57,1:09:54.73,Default,because I don't want when,\NI choose the photographer,
Dialogue: 0,1:09:54.73,1:09:55.98,Default,I don't want to load\Nthis table up,
Dialogue: 0,1:09:55.98,1:09:57.63,Default,so let's get rid of that, okay?
Dialogue: 0,1:09:57.63,1:10:00.93,Default,And so now, we have this here,\Nlet's move it down again.
Dialogue: 0,1:10:02.43,1:10:02.72,Default,Okay?
Dialogue: 0,1:10:03.05,1:10:05.78,Default,So this photos by\Nphotographer map view is going
Dialogue: 0,1:10:05.78,1:10:06.86,Default,to appear inside here.
Dialogue: 0,1:10:07.40,1:10:13.28,Default,Now this is a segue, okay, maybe\Nwe would call this embed map
Dialogue: 0,1:10:13.44,1:10:15.59,Default,or something like that, because\Nthat's what this segue does.
Dialogue: 0,1:10:15.92,1:10:19.05,Default,This segue has to be prepared,\Njust like any other segue,
Dialogue: 0,1:10:19.05,1:10:20.39,Default,this is a normal segue.
Dialogue: 0,1:10:20.39,1:10:22.73,Default,Who's going to do the preparing?
Dialogue: 0,1:10:22.73,1:10:26.18,Default,Well, it's the view controller\Ninto which this is embedded.
Dialogue: 0,1:10:26.60,1:10:28.10,Default,That is this.
Dialogue: 0,1:10:28.99,1:10:30.71,Default,Which is an image\Nview controller.
Dialogue: 0,1:10:31.78,1:10:33.70,Default,How does this photos
Dialogue: 0,1:10:33.70,1:10:35.17,Default,by photographer need\Nto be prepared?
Dialogue: 0,1:10:35.42,1:10:38.17,Default,It needs the photographer,\Nright?
Dialogue: 0,1:10:38.46,1:10:42.09,Default,That's its public API, just\Nto remind you, over here,
Dialogue: 0,1:10:42.40,1:10:44.25,Default,photos by photographer\Nmap view controller,
Dialogue: 0,1:10:44.59,1:10:45.71,Default,needs a photographer.
Dialogue: 0,1:10:45.76,1:10:46.85,Default,So if we're going to prepare it,
Dialogue: 0,1:10:46.85,1:10:48.05,Default,we need to pass the\Nphotographer.
Dialogue: 0,1:10:48.39,1:10:51.74,Default,Well, that's a problem, because\Nthis image view doesn't have
Dialogue: 0,1:10:51.74,1:10:52.48,Default,the photographer.
Dialogue: 0,1:10:52.74,1:10:54.89,Default,All the image view\Nhas is the image.
Dialogue: 0,1:10:55.44,1:10:58.28,Default,Okay? So we're going to have\Nto create a little subclass,
Dialogue: 0,1:10:58.51,1:11:00.86,Default,of image view controller,\Nwhich I'm going to call photos
Dialogue: 0,1:11:00.86,1:11:03.91,Default,by photographer, image view\Ncontroller, and it's going
Dialogue: 0,1:11:03.91,1:11:05.70,Default,to pass the photographer\Non through.
Dialogue: 0,1:11:06.67,1:11:08.44,Default,Okay? So we're going\Nto segue to it,
Dialogue: 0,1:11:08.67,1:11:11.63,Default,like we are already segueing,\Nit's not really segueing,
Dialogue: 0,1:11:11.63,1:11:14.18,Default,but we're setting this\Ndetail view controller,
Dialogue: 0,1:11:14.18,1:11:17.75,Default,we're preparing already,\Nbut we're going to have
Dialogue: 0,1:11:17.75,1:11:20.48,Default,to prepare it with\Nthis photographers.
Dialogue: 0,1:11:20.69,1:11:23.84,Default,So let's create that\Nsubclass with this controller.
Dialogue: 0,1:11:25.03,1:11:28.99,Default,Okay. It's a subclass of\Nimage view controller,
Dialogue: 0,1:11:28.99,1:11:30.85,Default,we're going to call it photos
Dialogue: 0,1:11:30.90,1:11:33.66,Default,by photographer image\Nview controller.
Dialogue: 0,1:11:35.58,1:11:37.68,Default,Okay. We'll put it\Nwith our controllers.
Dialogue: 0,1:11:39.15,1:11:43.49,Default,Okay? Now in the iPad only,\NI'm going to change this
Dialogue: 0,1:11:43.75,1:11:45.84,Default,to not be an image view\Ncontroller anymore,
Dialogue: 0,1:11:45.84,1:11:47.29,Default,I'm going to change\Nit to be a photos
Dialogue: 0,1:11:47.47,1:11:51.42,Default,by photographer image\Nview controller, okay?
Dialogue: 0,1:11:51.63,1:11:52.35,Default,So now it's a photo
Dialogue: 0,1:11:52.35,1:11:54.48,Default,by photographer image view\Ncontroller, which is this thing.
Dialogue: 0,1:11:54.79,1:11:57.73,Default,The public API of this,\Nagain, it's the same
Dialogue: 0,1:11:57.73,1:12:00.66,Default,as all these other photos\Nby photographer, it's this,
Dialogue: 0,1:12:00.98,1:12:04.91,Default,actually watch this, we'll copy\Nthis, and we'll paste that,
Dialogue: 0,1:12:05.54,1:12:09.71,Default,put that there, put that\Nthere, get rid of that,
Dialogue: 0,1:12:10.34,1:12:11.60,Default,see it going back\Nand forth too much.
Dialogue: 0,1:12:11.85,1:12:14.66,Default,So it has a photographer,\Nit's a photos by photographer,
Dialogue: 0,1:12:14.66,1:12:16.33,Default,but this is an image\Nview controller,
Dialogue: 0,1:12:16.33,1:12:17.30,Default,so it has a photographer.
Dialogue: 0,1:12:17.59,1:12:19.61,Default,What does it do when it\Ngets the photographer?
Dialogue: 0,1:12:19.61,1:12:21.25,Default,Well let's look at that.
Dialogue: 0,1:12:21.38,1:12:22.88,Default,In fact, before we\Neven look at that,
Dialogue: 0,1:12:23.24,1:12:25.30,Default,let's talk about\Nthat embed segue and,
Dialogue: 0,1:12:25.30,1:12:26.74,Default,and having it prepare.
Dialogue: 0,1:12:26.74,1:12:29.25,Default,So I got that code here\Nso we can look at it.
Dialogue: 0,1:12:30.29,1:12:34.19,Default,Okay? I'm going to put this\Nup here, talk about all this
Dialogue: 0,1:12:34.19,1:12:38.39,Default,in a second here, and I'm\Ngoing to import photos
Dialogue: 0,1:12:38.39,1:12:40.14,Default,by photographer map\Nview controller.
Dialogue: 0,1:12:40.62,1:12:42.28,Default,Alright, so let's look at\Nthis code that comes in.
Dialogue: 0,1:12:42.28,1:12:43.60,Default,So this is photos
Dialogue: 0,1:12:43.60,1:12:45.18,Default,by photographer image\Nview controller.
Dialogue: 0,1:12:45.53,1:12:49.31,Default,It is, right now, trying to\Nhandle preparing that embed.
Dialogue: 0,1:12:49.73,1:12:51.83,Default,So it's preparing\Nthis segue right here.
Dialogue: 0,1:12:51.97,1:12:53.78,Default,Its doing the prepare\Non this segue.
Dialogue: 0,1:12:54.37,1:12:55.59,Default,Okay? How is it doing that?
Dialogue: 0,1:12:56.16,1:12:57.94,Default,Well, it's looking to see
Dialogue: 0,1:12:58.91,1:13:01.70,Default,if the destination view\Ncontroller is a photos
Dialogue: 0,1:13:01.70,1:13:03.93,Default,by photographer map view\Ncontroller, which it should be,
Dialogue: 0,1:13:03.93,1:13:04.89,Default,that's what we're embedding.
Dialogue: 0,1:13:05.53,1:13:07.32,Default,Right? Photos by photographer\Nmap view controller,
Dialogue: 0,1:13:07.65,1:13:10.04,Default,and if it is, then it's going\Nto set the photographer.
Dialogue: 0,1:13:10.92,1:13:12.53,Default,Completely obvious, right?
Dialogue: 0,1:13:12.81,1:13:14.76,Default,And it's setting it to\Nself dot photographer,
Dialogue: 0,1:13:14.76,1:13:17.32,Default,that's this method\Nright here in photos
Dialogue: 0,1:13:17.32,1:13:19.00,Default,by photographer image\Nview controller.
Dialogue: 0,1:13:19.47,1:13:20.14,Default,That's all good.
Dialogue: 0,1:13:20.33,1:13:23.42,Default,But notice also I'm grabbing\Na hold of this photos
Dialogue: 0,1:13:23.42,1:13:24.95,Default,by photographer map control.
Dialogue: 0,1:13:24.95,1:13:26.60,Default,Why am I grabbing a\Nhold of this thing?
Dialogue: 0,1:13:26.99,1:13:28.21,Default,Well I'm grabbing a hold of this
Dialogue: 0,1:13:28.21,1:13:35.04,Default,because this might get called\Nbefore [pause] this gets called.
Dialogue: 0,1:13:35.68,1:13:39.41,Default,Okay? In other words, before\Nmy image view controllers,
Dialogue: 0,1:13:39.64,1:13:41.20,Default,photos by photographer\Nimage view controller,
Dialogue: 0,1:13:41.38,1:13:44.75,Default,gets it photographer, it\Nmight be asked to segue
Dialogue: 0,1:13:44.75,1:13:46.69,Default,to the embedded one,
Dialogue: 0,1:13:46.91,1:13:48.79,Default,and it might not have\Nthis photographer yet.
Dialogue: 0,1:13:49.04,1:13:52.53,Default,So we need to go here,\Nin our set photographer,
Dialogue: 0,1:13:53.92,1:13:55.25,Default,which we always do this anyway,
Dialogue: 0,1:13:55.25,1:13:59.34,Default,things like self dot title\Nequals photographer dot name
Dialogue: 0,1:13:59.34,1:14:01.01,Default,and stuff like that.
Dialogue: 0,1:14:02.14,1:14:06.17,Default,We, here, we need to\N[pause], if we get here
Dialogue: 0,1:14:06.17,1:14:08.15,Default,after we've embedded,\Nthen we need
Dialogue: 0,1:14:08.15,1:14:11.56,Default,to say self dot map view\Ncontroller photographer equals
Dialogue: 0,1:14:11.69,1:14:12.53,Default,our photographer.
Dialogue: 0,1:14:13.68,1:14:15.41,Default,Okay? So this is the exact\Nsame thing we're talking
Dialogue: 0,1:14:15.41,1:14:18.11,Default,about for prepare can\Nhappen before the setting,
Dialogue: 0,1:14:18.11,1:14:20.67,Default,setting can happen after,\Nyou know, back and forth, so,
Dialogue: 0,1:14:20.67,1:14:22.38,Default,but I have to do it in\Nboth of these places.
Dialogue: 0,1:14:22.38,1:14:24.44,Default,Does that make sense?
Dialogue: 0,1:14:25.68,1:14:27.52,Default,Okay? Good, now I'm seeing\Nmore nodding heads this time
Dialogue: 0,1:14:27.52,1:14:27.95,Default,and that's good.
Dialogue: 0,1:14:27.95,1:14:29.71,Default,Because when I talked about it\Nin the slides you were like huh?
Dialogue: 0,1:14:29.76,1:14:30.67,Default,Okay, but now you understood.
Dialogue: 0,1:14:30.67,1:14:34.53,Default,If we set our model after we\Nare asked to prepare that embed,
Dialogue: 0,1:14:34.90,1:14:38.17,Default,then we have to go back\Nand set the photographer.
Dialogue: 0,1:14:39.57,1:14:41.15,Default,Okay? Now the last thing we need
Dialogue: 0,1:14:41.15,1:14:45.78,Default,to do is do the preparing\Nof this guy now.
Dialogue: 0,1:14:46.14,1:14:49.27,Default,This guys needs to be prepared,\Nit's the detail view controller,
Dialogue: 0,1:14:49.84,1:14:51.32,Default,right, of this split view.
Dialogue: 0,1:14:51.48,1:14:53.95,Default,And so now when we click in\Nthe photographer's thing,
Dialogue: 0,1:14:53.95,1:14:57.26,Default,we need to prepare this guy by\Npassing him the photographers.
Dialogue: 0,1:14:57.58,1:14:58.90,Default,So that's really easy too.
Dialogue: 0,1:14:59.13,1:15:00.74,Default,Here's where we prepare, right?
Dialogue: 0,1:15:00.74,1:15:04.68,Default,So right now, in our\Nphotographers table view,
Dialogue: 0,1:15:04.68,1:15:06.37,Default,we know how to prepare\Nthe photos
Dialogue: 0,1:15:06.37,1:15:08.10,Default,by photographer core\Ndata table view.
Dialogue: 0,1:15:08.38,1:15:10.22,Default,We know how to prepare\Nthe photos
Dialogue: 0,1:15:10.22,1:15:13.36,Default,by photographer map view\Ncontroller, and now we know how
Dialogue: 0,1:15:13.36,1:15:15.29,Default,to prepare the photos
Dialogue: 0,1:15:15.29,1:15:17.55,Default,by photographer image\Nview controller, as well.
Dialogue: 0,1:15:18.08,1:15:21.36,Default,Okay? We prepare them all\Nexactly the same way, right?
Dialogue: 0,1:15:22.42,1:15:25.54,Default,But they're all different\Ndestination view controllers.
Dialogue: 0,1:15:25.99,1:15:27.91,Default,So let's import,\Nmake that go away,
Dialogue: 0,1:15:28.43,1:15:31.96,Default,photos by photographer\Nimage view controller,
Dialogue: 0,1:15:33.16,1:15:34.05,Default,and now we can run.
Dialogue: 0,1:15:35.52,1:15:46.76,Default,[ Background Sounds ]
Dialogue: 0,1:15:47.26,1:15:49.94,Default,Okay. So you can see our map,\Ncomes up the United States,
Dialogue: 0,1:15:49.94,1:15:51.75,Default,we haven't chosen a\Nphotographer, so there's,
Dialogue: 0,1:15:51.75,1:15:52.85,Default,there's no photos in there.
Dialogue: 0,1:15:53.16,1:15:54.24,Default,Let's pick a photographer.
Dialogue: 0,1:15:54.71,1:15:55.97,Default,This guy. Okay?
Dialogue: 0,1:15:56.07,1:15:58.30,Default,Here's our map, we can kind of\Nsee where in the world we are.
Dialogue: 0,1:15:58.82,1:16:01.22,Default,Looks like we are\Nin Taipei, okay?
Dialogue: 0,1:16:01.22,1:16:03.10,Default,And it's showing\Nthe scooter thing.
Dialogue: 0,1:16:03.10,1:16:05.06,Default,If I click on the other\None, we get that one.
Dialogue: 0,1:16:05.76,1:16:08.48,Default,Okay? So this is quite\Na different kind of UI,
Dialogue: 0,1:16:08.48,1:16:12.15,Default,I can still zoom out here, I\Ncan still move this map around,
Dialogue: 0,1:16:12.52,1:16:15.94,Default,I could rotate it\Naround, I can zoom in.
Dialogue: 0,1:16:16.42,1:16:21.23,Default,Alright? I can click on\Nanother photographer here.
Dialogue: 0,1:16:22.02,1:16:23.54,Default,Right? [Pause] Okay?
Dialogue: 0,1:16:24.01,1:16:25.37,Default,Make sense?
Dialogue: 0,1:16:25.74,1:16:27.24,Default,How that's working?
Dialogue: 0,1:16:27.77,1:16:30.59,Default,So, I mean, again, you can\Nargue which is the better UI.
Dialogue: 0,1:16:31.07,1:16:31.94,Default,This one's kind of cool.
Dialogue: 0,1:16:31.94,1:16:34.46,Default,I think if I had a little button\Nup next to URL that said map,
Dialogue: 0,1:16:34.46,1:16:36.15,Default,that was maybe a little\Nmap icon and I pressed it
Dialogue: 0,1:16:36.15,1:16:38.36,Default,and the map would disappear and\Nreappear, this might be kind
Dialogue: 0,1:16:38.36,1:16:41.61,Default,of cooler because if you look at\Nthis UI, I have my photographers
Dialogue: 0,1:16:41.61,1:16:44.01,Default,and my photos and the\Nselected photo all
Dialogue: 0,1:16:44.01,1:16:44.87,Default,on screen at the same time.
Dialogue: 0,1:16:45.42,1:16:47.99,Default,Alright? So I can be zooming\Nin, looking at anything I want,
Dialogue: 0,1:16:48.19,1:16:49.66,Default,clicking on another\Nphoto by this guy,
Dialogue: 0,1:16:49.66,1:16:52.40,Default,switching to another\Nphotographer, back and forth,
Dialogue: 0,1:16:52.78,1:16:55.80,Default,all, right at my fingertips so\Nthat I don't have to, you know,
Dialogue: 0,1:16:56.09,1:17:00.27,Default,be segueing and things\Nchanging and all that.
Dialogue: 0,1:17:00.60,1:17:02.71,Default,Make sense?
Dialogue: 0,1:17:03.03,1:17:05.41,Default,Okay. That's all I\Nhave for you today,
Dialogue: 0,1:17:05.84,1:17:06.84,Default,and I will see you on Monday.
Dialogue: 0,1:17:06.84,1:17:08.74,Default,Good luck with your\Nhomework that's due on Friday
Dialogue: 0,1:17:08.74,1:17:10.28,Default,and I'll be here for\Nany questions you have.
Dialogue: 0,1:17:11.77,1:17:14.98,Default,>> For more, please\Nvisit us at stanford.edu.
